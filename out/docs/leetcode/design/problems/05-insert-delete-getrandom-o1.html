<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" href="/interview/_next/static/media/e4af272ccee01ff0-s.p.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="stylesheet" href="/interview/_next/static/css/387024c6a2216908.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/interview/_next/static/chunks/webpack-be7d7df45533bffc.js"/><script src="/interview/_next/static/chunks/fd9d1056-6922f449a204c2cc.js" async=""></script><script src="/interview/_next/static/chunks/117-e7ecc085ce9cfab3.js" async=""></script><script src="/interview/_next/static/chunks/main-app-b06be5f3411c20c3.js" async=""></script><script src="/interview/_next/static/chunks/918-3273b83890f10546.js" async=""></script><script src="/interview/_next/static/chunks/930-3262a6c9c5acace4.js" async=""></script><script src="/interview/_next/static/chunks/app/docs/%5B...slug%5D/page-32962e9542d32755.js" async=""></script><script src="/interview/_next/static/chunks/710-dfaa11b4dff08f8e.js" async=""></script><script src="/interview/_next/static/chunks/972-011bba60ed155615.js" async=""></script><script src="/interview/_next/static/chunks/233-3e0c1d820a17eca9.js" async=""></script><script src="/interview/_next/static/chunks/app/layout-333f4adcd11f8f39.js" async=""></script><title>Frontend Interview Prep 2025 - Big Tech Interview Guide</title><meta name="description" content="Comprehensive frontend interview preparation for Big Tech companies including React, TypeScript, algorithms, and system design."/><link rel="icon" href="/favicon.ico"/><meta name="theme-color" content="#1a1a1a"/><meta property="og:title" content="Frontend Interview Prep 2025"/><meta property="og:description" content="Complete guide for frontend engineers targeting Big Tech companies"/><meta property="og:type" content="website"/><link rel="preconnect" href="https://fonts.googleapis.com"/><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"/><title>Insert Delete GetRandom O(1) - Frontend Interview Docs</title><meta name="description" content=" # Insert Delete GetRandom O(1)    ## Problem Description   *  * Implement the RandomizedSet class:  * - RandomizedSet() Initializes the RandomizedSet object.  "/><meta property="og:title" content="Insert Delete GetRandom O(1) - Frontend Interview Docs"/><meta property="og:description" content=" # Insert Delete GetRandom O(1)    ## Problem Description   *  * Implement the RandomizedSet class:  * - RandomizedSet() Initializes the RandomizedSet object.  "/><meta property="og:type" content="article"/><meta name="twitter:card" content="summary"/><meta name="twitter:title" content="Insert Delete GetRandom O(1) - Frontend Interview Docs"/><meta name="twitter:description" content=" # Insert Delete GetRandom O(1)    ## Problem Description   *  * Implement the RandomizedSet class:  * - RandomizedSet() Initializes the RandomizedSet object.  "/><meta name="next-size-adjust"/><script src="/interview/_next/static/chunks/polyfills-42372ed130431b0a.js" noModule=""></script><style data-styled="" data-styled-version="6.1.19">*{margin:0;padding:0;box-sizing:border-box;}/*!sc*/
html{font-size:16px;line-height:1.5;scroll-behavior:smooth;}/*!sc*/
body{font-family:Inter,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,sans-serif;font-size:1rem;line-height:1.5;color:#1e293b;background-color:#ffffff;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;}/*!sc*/
h1,h2,h3,h4,h5,h6{font-weight:700;line-height:1.25;margin-bottom:0.5em;}/*!sc*/
h1{font-size:3rem;}/*!sc*/
@media (max-width: 768px){h1{font-size:2.25rem;}}/*!sc*/
h2{font-size:2.25rem;}/*!sc*/
@media (max-width: 768px){h2{font-size:1.875rem;}}/*!sc*/
h3{font-size:1.875rem;}/*!sc*/
@media (max-width: 768px){h3{font-size:1.5rem;}}/*!sc*/
h4{font-size:1.5rem;}/*!sc*/
@media (max-width: 768px){h4{font-size:1.25rem;}}/*!sc*/
h5{font-size:1.25rem;}/*!sc*/
h6{font-size:1.125rem;}/*!sc*/
p{margin-bottom:1rem;line-height:1.75;}/*!sc*/
a{color:#3b82f6;text-decoration:none;transition:color 0.15s ease;}/*!sc*/
a:hover{color:#2563eb;}/*!sc*/
a:focus{outline:2px solid #3b82f6;outline-offset:2px;}/*!sc*/
button{cursor:pointer;border:none;background:none;font-family:inherit;font-size:inherit;}/*!sc*/
button:disabled{cursor:not-allowed;opacity:0.6;}/*!sc*/
button:focus{outline:2px solid #3b82f6;outline-offset:2px;}/*!sc*/
input,textarea,select{font-family:inherit;font-size:inherit;}/*!sc*/
input:focus,textarea:focus,select:focus{outline:2px solid #3b82f6;outline-offset:2px;}/*!sc*/
img{max-width:100%;height:auto;}/*!sc*/
ul,ol{margin-bottom:1rem;padding-left:1.5rem;}/*!sc*/
li{margin-bottom:0.25rem;}/*!sc*/
blockquote{margin:1rem 0;padding:1rem;border-left:4px solid #3b82f6;background-color:#f1f5f9;font-style:italic;}/*!sc*/
code{font-family:SFMono-Regular,Consolas,"Liberation Mono",Menlo,monospace;font-size:0.9em;background-color:#f1f5f9;padding:0.2em 0.4em;border-radius:0.25rem;}/*!sc*/
pre{background-color:#f1f5f9;padding:1rem;border-radius:0.5rem;overflow-x:auto;margin-bottom:1rem;}/*!sc*/
pre code{background:none;padding:0;}/*!sc*/
table{width:100%;border-collapse:collapse;margin-bottom:1rem;}/*!sc*/
th,td{padding:0.75rem;text-align:left;border-bottom:1px solid #e2e8f0;}/*!sc*/
th{font-weight:600;background-color:#f1f5f9;}/*!sc*/
.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0;}/*!sc*/
.skip-link{position:absolute;top:-40px;left:6px;background:#3b82f6;color:white;padding:8px;text-decoration:none;border-radius:4px;z-index:100;}/*!sc*/
.skip-link:focus{top:6px;}/*!sc*/
::-webkit-scrollbar{width:8px;height:8px;}/*!sc*/
::-webkit-scrollbar-track{background:#f1f5f9;}/*!sc*/
::-webkit-scrollbar-thumb{background:#94a3b8;border-radius:4px;}/*!sc*/
::-webkit-scrollbar-thumb:hover{background:#64748b;}/*!sc*/
::selection{background:#3b82f6;color:white;}/*!sc*/
.focus-visible{outline:2px solid #3b82f6;outline-offset:2px;}/*!sc*/
.fade-in{opacity:0;animation:fadeIn 0.3s ease forwards;}/*!sc*/
.slide-up{transform:translateY(20px);opacity:0;animation:slideUp 0.3s ease forwards;}/*!sc*/
@keyframes fadeIn{to{opacity:1;}}/*!sc*/
@keyframes slideUp{to{transform:translateY(0);opacity:1;}}/*!sc*/
@media print{*{background:white!important;color:black!important;box-shadow:none!important;text-shadow:none!important;}a,a:visited{text-decoration:underline;}h1,h2,h3,h4,h5,h6{break-after:avoid;}pre,blockquote{border:1px solid #999;break-inside:avoid;}img{max-width:100%!important;}@page{margin:0.5in;}}/*!sc*/
data-styled.g1[id="sc-global-kxA-Ddz1"]{content:"sc-global-kxA-Ddz1,"}/*!sc*/
.wbMrm{position:fixed;top:0;width:100%;z-index:1020;background:transparent;backdrop-filter:blur(10px);border-bottom:1px solid transparent;transition:all 0.3s ease;}/*!sc*/
data-styled.g2[id="sc-bRKDuR"]{content:"wbMrm,"}/*!sc*/
.kDxBNU{max-width:1200px;margin:0 auto;padding:0 2rem;display:flex;align-items:center;justify-content:space-between;height:70px;}/*!sc*/
data-styled.g3[id="sc-hvigdm"]{content:"kDxBNU,"}/*!sc*/
.cvsJZg{display:flex;align-items:center;gap:0.5rem;font-size:1.5rem;font-weight:700;color:#3b82f6;text-decoration:none;cursor:pointer;}/*!sc*/
.cvsJZg:hover{color:#2563eb;}/*!sc*/
data-styled.g4[id="sc-fhHczv"]{content:"cvsJZg,"}/*!sc*/
.lfYVIv{display:flex;align-items:center;gap:2rem;}/*!sc*/
@media (max-width: 768px){.lfYVIv{display:none;}}/*!sc*/
data-styled.g5[id="sc-ggWZvA"]{content:"lfYVIv,"}/*!sc*/
.bhKRhV{color:#1e293b;font-weight:500;text-decoration:none;transition:color 0.15s ease;position:relative;}/*!sc*/
.bhKRhV:hover{color:#3b82f6;}/*!sc*/
.bhKRhV:after{content:'';position:absolute;bottom:-5px;left:0;width:0;height:2px;background:#3b82f6;transition:width 0.15s ease;}/*!sc*/
.bhKRhV:hover:after{width:100%;}/*!sc*/
data-styled.g6[id="sc-dTvVRJ"]{content:"bhKRhV,"}/*!sc*/
.gpUImn{display:none;background:none;border:none;color:#1e293b;cursor:pointer;padding:0.5rem;}/*!sc*/
@media (max-width: 768px){.gpUImn{display:block;}}/*!sc*/
data-styled.g7[id="sc-jwTyAe"]{content:"gpUImn,"}/*!sc*/
.hpKWkw{display:flex;align-items:center;gap:0.5rem;background:#f1f5f9;border:1px solid #e2e8f0;border-radius:0.5rem;padding:0.5rem 1rem;color:#64748b;font-size:0.9rem;transition:all 0.15s ease;}/*!sc*/
.hpKWkw:hover{background:#ffffff;border-color:#3b82f6;}/*!sc*/
data-styled.g11[id="sc-kNOymR"]{content:"hpKWkw,"}/*!sc*/
.cJzheU{background:#1e293b;color:white;padding:3rem 0 1rem;margin-top:auto;}/*!sc*/
data-styled.g12[id="sc-dYwGCk"]{content:"cJzheU,"}/*!sc*/
.hJUFeT{max-width:1200px;margin:0 auto;padding:0 2rem;}/*!sc*/
data-styled.g13[id="sc-lgpSej"]{content:"hJUFeT,"}/*!sc*/
.mSxwd{display:grid;grid-template-columns:1fr 1fr 1fr 1fr;gap:2rem;margin-bottom:2rem;}/*!sc*/
@media (max-width: 768px){.mSxwd{grid-template-columns:1fr 1fr;gap:1.5rem;}}/*!sc*/
@media (max-width: 480px){.mSxwd{grid-template-columns:1fr;}}/*!sc*/
data-styled.g14[id="sc-eqYatC"]{content:"mSxwd,"}/*!sc*/
.cmBIup h3{font-size:1.1rem;font-weight:600;margin-bottom:1rem;color:white;}/*!sc*/
.cmBIup ul{list-style:none;padding:0;margin:0;}/*!sc*/
.cmBIup li{margin-bottom:0.5rem;}/*!sc*/
.cmBIup a{color:rgba(255, 255, 255, 0.7);text-decoration:none;transition:color 0.15s ease;}/*!sc*/
.cmBIup a:hover{color:white;}/*!sc*/
data-styled.g15[id="sc-kcLKEh"]{content:"cmBIup,"}/*!sc*/
.bAsNIP{display:flex;align-items:center;gap:0.5rem;font-size:1.2rem;font-weight:700;margin-bottom:1rem;color:white;}/*!sc*/
data-styled.g16[id="sc-dntSTA"]{content:"bAsNIP,"}/*!sc*/
.gWXMDV{color:rgba(255, 255, 255, 0.7);line-height:1.6;margin-bottom:1rem;}/*!sc*/
data-styled.g17[id="sc-kvnevz"]{content:"gWXMDV,"}/*!sc*/
.jCoOHQ{display:flex;gap:1rem;}/*!sc*/
.jCoOHQ a{display:flex;align-items:center;justify-content:center;width:40px;height:40px;background:rgba(255, 255, 255, 0.1);border-radius:0.5rem;color:rgba(255, 255, 255, 0.7);transition:all 0.15s ease;}/*!sc*/
.jCoOHQ a:hover{background:rgba(255, 255, 255, 0.2);color:white;}/*!sc*/
data-styled.g18[id="sc-dFVmKS"]{content:"jCoOHQ,"}/*!sc*/
.crUaYh{border-top:1px solid rgba(255, 255, 255, 0.1);padding-top:2rem;display:flex;justify-content:space-between;align-items:center;}/*!sc*/
@media (max-width: 768px){.crUaYh{flex-direction:column;gap:1rem;text-align:center;}}/*!sc*/
data-styled.g19[id="sc-kCuUfV"]{content:"crUaYh,"}/*!sc*/
.esMlQF{color:rgba(255, 255, 255, 0.7);margin:0;font-size:0.9rem;}/*!sc*/
data-styled.g20[id="sc-dNdcvo"]{content:"esMlQF,"}/*!sc*/
.eHcrXx{display:flex;gap:2rem;}/*!sc*/
@media (max-width: 480px){.eHcrXx{flex-direction:column;gap:1rem;}}/*!sc*/
.eHcrXx a{color:rgba(255, 255, 255, 0.7);text-decoration:none;font-size:0.9rem;transition:color 0.15s ease;}/*!sc*/
.eHcrXx a:hover{color:white;}/*!sc*/
data-styled.g21[id="sc-fbQrwq"]{content:"eHcrXx,"}/*!sc*/
.dAQFGp{color:#1e293b;line-height:1.6;}/*!sc*/
.dAQFGp h1,.dAQFGp h2,.dAQFGp h3,.dAQFGp h4,.dAQFGp h5,.dAQFGp h6{color:#1e293b;margin-top:2rem;margin-bottom:1rem;font-weight:600;}/*!sc*/
.dAQFGp h1{font-size:2rem;border-bottom:2px solid #e2e8f0;padding-bottom:0.5rem;}/*!sc*/
.dAQFGp h2{font-size:1.5rem;border-bottom:1px solid #e2e8f0;padding-bottom:0.3rem;}/*!sc*/
.dAQFGp h3{font-size:1.25rem;}/*!sc*/
.dAQFGp h4{font-size:1.1rem;}/*!sc*/
.dAQFGp p{margin-bottom:1rem;color:#64748b;}/*!sc*/
.dAQFGp a{color:#3b82f6;text-decoration:none;}/*!sc*/
.dAQFGp a:hover{text-decoration:underline;}/*!sc*/
.dAQFGp ul,.dAQFGp ol{margin-bottom:1rem;padding-left:1.5rem;}/*!sc*/
.dAQFGp ul li,.dAQFGp ol li{margin-bottom:0.5rem;color:#64748b;}/*!sc*/
.dAQFGp blockquote{border-left:4px solid #3b82f6;padding-left:1rem;margin:1rem 0;font-style:italic;color:#64748b;background:#f1f5f9;padding:1rem;border-radius:0.5rem;}/*!sc*/
.dAQFGp code{background:#f1f5f9;padding:0.2rem 0.4rem;border-radius:0.25rem;font-family:SFMono-Regular,Consolas,"Liberation Mono",Menlo,monospace;font-size:0.9em;color:#f59e0b;}/*!sc*/
.dAQFGp pre{background:#ffffff;border:1px solid #e2e8f0;border-radius:0.5rem;padding:1rem;margin:1rem 0;overflow-x:auto;}/*!sc*/
.dAQFGp pre code{background:none;padding:0;color:#1e293b;font-size:0.9rem;}/*!sc*/
.dAQFGp table{width:100%;border-collapse:collapse;margin:1rem 0;}/*!sc*/
.dAQFGp table th,.dAQFGp table td{border:1px solid #e2e8f0;padding:0.5rem;text-align:left;}/*!sc*/
.dAQFGp table th{background:#ffffff;font-weight:600;}/*!sc*/
.dAQFGp table tr:nth-child(even){background:#f1f5f9;}/*!sc*/
.dAQFGp hr{border:none;height:1px;background:#e2e8f0;margin:2rem 0;}/*!sc*/
.dAQFGp .highlight{background:#3b82f620;padding:0.2rem 0.4rem;border-radius:0.25rem;font-weight:600;}/*!sc*/
.dAQFGp .hljs{background:#ffffff;color:#1e293b;}/*!sc*/
.dAQFGp .hljs-keyword{color:#3b82f6;font-weight:600;}/*!sc*/
.dAQFGp .hljs-string{color:#10b981;}/*!sc*/
.dAQFGp .hljs-function{color:#f59e0b;}/*!sc*/
.dAQFGp .hljs-comment{color:#94a3b8;font-style:italic;}/*!sc*/
.dAQFGp .hljs-number{color:#f59e0b;}/*!sc*/
.dAQFGp .hljs-variable{color:#1e293b;}/*!sc*/
.dAQFGp .hljs-title{color:#f59e0b;font-weight:600;}/*!sc*/
data-styled.g22[id="sc-gGKoUb"]{content:"dAQFGp,"}/*!sc*/
</style></head><body class="__className_6eac61"><div style="min-height:100vh;display:flex;flex-direction:column"><nav class="sc-bRKDuR wbMrm"><div class="sc-hvigdm kDxBNU"><a href="/interview"><a class="sc-fhHczv cvsJZg"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-code "><polyline points="16 18 22 12 16 6"></polyline><polyline points="8 6 2 12 8 18"></polyline></svg>Frontend Interview Prep</a></a><div class="sc-ggWZvA lfYVIv"><a href="/interview/problems"><a class="sc-dTvVRJ bhKRhV">Problems</a></a><a href="/interview/learn"><a class="sc-dTvVRJ bhKRhV">Learn</a></a><a href="/interview/study-guide"><a class="sc-dTvVRJ bhKRhV">Study Guide</a></a><a href="/interview/system-design"><a class="sc-dTvVRJ bhKRhV">System Design</a></a><a href="/interview/performance"><a class="sc-dTvVRJ bhKRhV">Performance</a></a><a href="/interview/accessibility"><a class="sc-dTvVRJ bhKRhV">Accessibility</a></a><a href="/interview/interview-tips"><a class="sc-dTvVRJ bhKRhV">Interview Tips</a></a><button class="sc-kNOymR hpKWkw"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-search "><circle cx="11" cy="11" r="8"></circle><path d="m21 21-4.3-4.3"></path></svg>Search</button></div><button class="sc-jwTyAe gpUImn"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-menu "><line x1="4" x2="20" y1="12" y2="12"></line><line x1="4" x2="20" y1="6" y2="6"></line><line x1="4" x2="20" y1="18" y2="18"></line></svg></button></div></nav><main style="flex:1"><div style="max-width:1200px;margin:0 auto;padding:2rem;padding-top:6rem"><div style="margin-bottom:2rem"><nav style="color:#64748b;font-size:0.9rem;margin-bottom:1rem"><a href="/interview" style="color:#3b82f6;text-decoration:none">Home</a> &gt; <span>leetcode &gt; design &gt; problems &gt; 05-insert-delete-getrandom-o1</span></nav><h1 style="font-size:2.5rem;font-weight:800;margin-bottom:0.5rem;color:#1e293b">Insert Delete GetRandom O(1)</h1><div style="color:#64748b;font-size:0.9rem;margin-bottom:2rem"><span>üìÅ <!-- -->leetcode/design/problems/05-insert-delete-getrandom-o1.md</span></div></div><div class="sc-gGKoUb dAQFGp"><h1 id="insert-delete-getrandom-o(1)" node="[object Object]">Insert Delete GetRandom O(1)</h1>
<h2 id="problem-description" node="[object Object]">Problem Description</h2>
<ul>
<li>
<ul>
<li>Implement the RandomizedSet class:  * - RandomizedSet() Initializes the RandomizedSet object.  * - bool insert(int val) Inserts an item val into the set if not present. Returns true if the item was not present, false otherwise.  * - bool remove(int val) Removes an item val from the set if present. Returns true if the item was present, false otherwise.</li>
</ul>
</li>
</ul>
<h2 id="solutions" node="[object Object]">Solutions</h2>
<p>{% raw %}
/**</p>
<ul>
<li>Insert Delete GetRandom O(1)</li>
<li></li>
<li>Problem: <a href="https://leetcode.com/problems/insert-delete-getrandom-o1/" target="_blank" rel="noopener noreferrer" node="[object Object]">https://leetcode.com/problems/insert-delete-getrandom-o1/</a></li>
<li></li>
<li>Implement the RandomizedSet class:</li>
<li>
<ul>
<li>RandomizedSet() Initializes the RandomizedSet object.</li>
</ul>
</li>
<li>
<ul>
<li>bool insert(int val) Inserts an item val into the set if not present. Returns true if the item was not present, false otherwise.</li>
</ul>
</li>
<li>
<ul>
<li>bool remove(int val) Removes an item val from the set if present. Returns true if the item was present, false otherwise.</li>
</ul>
</li>
<li>
<ul>
<li>int getRandom() Returns a random element from the current set of elements (it&#x27;s guaranteed that at least one element exists when this method is called).</li>
</ul>
</li>
<li></li>
<li>Each function must work in average O(1) time complexity.</li>
<li></li>
<li>Example 1:</li>
<li>Input: [&quot;RandomizedSet&quot;, &quot;insert&quot;, &quot;remove&quot;, &quot;insert&quot;, &quot;getRandom&quot;, &quot;remove&quot;, &quot;insert&quot;, &quot;getRandom&quot;]</li>
<li>[[], [1], [2], [2], [], [1], [2], []]</li>
<li>Output: [null, true, false, true, 2, true, false, 2]</li>
<li></li>
<li>Explanation:</li>
<li>RandomizedSet randomizedSet = new RandomizedSet();</li>
<li>randomizedSet.insert(1); // Inserts 1 to the set. Returns true as 1 was inserted successfully.</li>
<li>randomizedSet.remove(2); // Returns false as 2 does not exist in the set.</li>
<li>randomizedSet.insert(2); // Inserts 2 to the set, returns true. Set now contains [1,2].</li>
<li>randomizedSet.getRandom(); // getRandom() should return either 1 or 2 randomly.</li>
<li>randomizedSet.remove(1); // Removes 1 from the set, returns true. Set now contains [2].</li>
<li>randomizedSet.insert(2); // 2 was already in the set, so return false.</li>
<li>randomizedSet.getRandom(); // Since 2 is the only number in the set, getRandom() will always return 2.</li>
<li></li>
<li>Constraints:</li>
<li>
<ul>
<li>-2^31 &lt;= val &lt;= 2^31 - 1</li>
</ul>
</li>
<li>
<ul>
<li>At most 2 * 10^5 calls will be made to insert, remove, and getRandom.</li>
</ul>
</li>
<li>
<ul>
<li>There will be at least one element in the data structure when getRandom is called.</li>
</ul>
</li>
<li></li>
<li>Solution Approach:</li>
<li>
<ol>
<li>Use HashMap + ArrayList combination</li>
</ol>
</li>
<li>
<ol start="2">
<li>HashMap stores value -&gt; index mapping</li>
</ol>
</li>
<li>
<ol start="3">
<li>ArrayList stores values for random access</li>
</ol>
</li>
<li>
<ol start="4">
<li>For removal, swap with last element and remove last</li>
</ol>
</li>
<li>
<ol start="5">
<li>All operations achieve O(1) average time complexity</li>
</ol>
</li>
<li></li>
<li>Time Complexity: O(1) average for all operations</li>
<li>Space Complexity: O(n) where n is the number of elements
*/</li>
</ul>
<p>/**</p>
<ul>
<li>RandomizedSet class with O(1) operations</li>
<li></li>
<li>L·ªõp RandomizedSet v·ªõi c√°c thao t√°c O(1)
*/
class RandomizedSet {
private map: Map&lt;number, number&gt;; // value -&gt; index
private array: number[]; // values for random access</li>
</ul>
<p>constructor() {
this.map = new Map();
this.array = [];
}</p>
<p>/**</p>
<ul>
<li>Insert a value into the set</li>
<li></li>
<li>Ch√®n m·ªôt gi√° tr·ªã v√†o t·∫≠p h·ª£p</li>
<li></li>
<li>@param val - Value to insert</li>
<li>@returns true if inserted, false if already exists
*/
insert(val: number): boolean {
if (this.map.has(val)) {
return false;
}</li>
</ul>
<pre><pre><code class="hljs undefined">this.array.push(val);
</code></pre></pre>
<pre><pre><code class="hljs undefined">this.map.set(val, this.array.length - 1);
return true;
</code></pre></pre>
<p>}</p>
<p>/**</p>
<ul>
<li>Remove a value from the set</li>
<li></li>
<li>X√≥a m·ªôt gi√° tr·ªã kh·ªèi t·∫≠p h·ª£p</li>
<li></li>
<li>@param val - Value to remove</li>
<li>@returns true if removed, false if not found
*/
remove(val: number): boolean {
if (!this.map.has(val)) {
return false;
}</li>
</ul>
<pre><pre><code class="hljs undefined">const index = this.map.get(val)!;
</code></pre></pre>
<pre><pre><code class="hljs undefined">const lastElement = this.array[this.array.length - 1];

// Swap with last element
this.array[index] = lastElement;
this.map.set(lastElement, index);

// Remove last element
this.array.pop();
this.map.delete(val);

return true;
</code></pre></pre>
<p>}</p>
<p>/**</p>
<ul>
<li>Get a random element from the set</li>
<li></li>
<li>L·∫•y m·ªôt ph·∫ßn t·ª≠ ng·∫´u nhi√™n t·ª´ t·∫≠p h·ª£p</li>
<li></li>
<li>@returns Random element from the set
*/
getRandom(): number {
const randomIndex = Math.floor(Math.random() * this.array.length);
return this.array[randomIndex];
}</li>
</ul>
<p>/**</p>
<ul>
<li>Get the size of the set</li>
<li></li>
<li>L·∫•y k√≠ch th∆∞·ªõc c·ªßa t·∫≠p h·ª£p</li>
<li></li>
<li>@returns Number of elements in the set
*/
size(): number {
return this.array.length;
}</li>
</ul>
<p>/**</p>
<ul>
<li>Check if a value exists in the set</li>
<li></li>
<li>Ki·ªÉm tra xem m·ªôt gi√° tr·ªã c√≥ t·ªìn t·∫°i trong t·∫≠p h·ª£p kh√¥ng</li>
<li></li>
<li>@param val - Value to check</li>
<li>@returns true if exists, false otherwise
*/
has(val: number): boolean {
return this.map.has(val);
}</li>
</ul>
<p>/**</p>
<ul>
<li>Get all elements in the set</li>
<li></li>
<li>L·∫•y t·∫•t c·∫£ ph·∫ßn t·ª≠ trong t·∫≠p h·ª£p</li>
<li></li>
<li>@returns Array of all elements
*/
toArray(): number[] {
return [...this.array];
}
}</li>
</ul>
<p>/**</p>
<ul>
<li>Alternative Implementation: Using Set + Array</li>
<li></li>
<li>Gi·∫£i ph√°p thay th·∫ø: S·ª≠ d·ª•ng Set + Array
*/
class RandomizedSetAlternative {
private set: Set<number>;
private array: number[];</number></li>
</ul>
<p>constructor() {
this.set = new Set();
this.array = [];
}</p>
<p>insert(val: number): boolean {
if (this.set.has(val)) {
return false;
}</p>
<pre><pre><code class="hljs undefined">this.set.add(val);
this.array.push(val);
return true;
</code></pre></pre>
<p>}</p>
<p>remove(val: number): boolean {
if (!this.set.has(val)) {
return false;
}</p>
<pre><pre><code class="hljs undefined">this.set.delete(val);
const index = this.array.indexOf(val);

if (index &gt; -1) {
  this.array.splice(index, 1);
}

return true;
</code></pre></pre>
<p>}</p>
<p>getRandom(): number {
const randomIndex = Math.floor(Math.random() * this.array.length);
return this.array[randomIndex];
}</p>
<p>size(): number {
return this.set.size;
}</p>
<p>has(val: number): boolean {
return this.set.has(val);
}</p>
<p>toArray(): number[] {
return [...this.set];
}
}</p>
<p>/**</p>
<ul>
<li>Implementation with Statistics Tracking</li>
<li></li>
<li>Gi·∫£i ph√°p v·ªõi theo d√µi th·ªëng k√™
*/
class RandomizedSetWithStats extends RandomizedSet {
private insertCount: number = 0;
private removeCount: number = 0;
private getRandomCount: number = 0;
private valueFrequency: Map&lt;number, number&gt; = new Map();</li>
</ul>
<p>insert(val: number): boolean {
const result = super.insert(val);
this.insertCount++;</p>
<pre><pre><code class="hljs undefined">if (result) {
  this.valueFrequency.set(val, (this.valueFrequency.get(val) || 0) + 1);
}

return result;
</code></pre></pre>
<p>}</p>
<p>remove(val: number): boolean {
const result = super.remove(val);
this.removeCount++;</p>
<pre><pre><code class="hljs undefined">if (result) {
  const freq = this.valueFrequency.get(val) || 0;
  if (freq &gt; 1) {
    this.valueFrequency.set(val, freq - 1);
  } else {
    this.valueFrequency.delete(val);
  }
}

return result;
</code></pre></pre>
<p>}</p>
<p>getRandom(): number {
this.getRandomCount++;
return super.getRandom();
}</p>
<p>/**</p>
<ul>
<li>Get statistics about operations</li>
<li></li>
<li>L·∫•y th·ªëng k√™ v·ªÅ c√°c thao t√°c</li>
<li></li>
<li>@returns Object containing operation statistics
*/
getStats(): {
insertCount: number;
removeCount: number;
getRandomCount: number;
valueFrequency: Map&lt;number, number&gt;;
} {
return {
insertCount: this.insertCount,
removeCount: this.removeCount,
getRandomCount: this.getRandomCount,
valueFrequency: new Map(this.valueFrequency),
};
}</li>
</ul>
<p>/**</p>
<ul>
<li>Get random distribution analysis</li>
<li></li>
<li>Ph√¢n t√≠ch ph√¢n b·ªë ng·∫´u nhi√™n</li>
<li></li>
<li>@param iterations - Number of getRandom calls to test</li>
<li>@returns Object containing distribution analysis
*/
analyzeRandomDistribution(iterations: number): {
distribution: Map&lt;number, number&gt;;
expectedFrequency: number;
actualFrequencies: number[];
} {
const distribution = new Map&lt;number, number&gt;();
const elements = this.toArray();</li>
</ul>
<pre><pre><code class="hljs undefined">if (elements.length === 0) {
</code></pre></pre>
<pre><pre><code class="hljs undefined">  return { distribution, expectedFrequency: 0, actualFrequencies: [] };
}

const expectedFrequency = iterations / elements.length;

for (let i = 0; i &lt; iterations; i++) {
  const randomValue = this.getRandom();
  distribution.set(randomValue, (distribution.get(randomValue) || 0) + 1);
}

const actualFrequencies = elements.map((val) =&gt; distribution.get(val) || 0);

return { distribution, expectedFrequency, actualFrequencies };
</code></pre></pre>
<p>}
}</p>
<p>// Test cases / C√°c tr∆∞·ªùng h·ª£p ki·ªÉm th·ª≠
function runTests() {
console.log(&quot;=== Insert Delete GetRandom O(1) Tests ===&quot;);
console.log(&quot;=== Ki·ªÉm th·ª≠ b√†i to√°n Ch√®n X√≥a L·∫•y ng·∫´u nhi√™n O(1) ===\n&quot;);</p>
<p>const testCases = [
{
name: &quot;Example 1: Standard operations&quot;,
operations: [
{ type: &quot;insert&quot;, value: 1, expected: true },
{ type: &quot;remove&quot;, value: 2, expected: false },
{ type: &quot;insert&quot;, value: 2, expected: true },
{ type: &quot;getRandom&quot;, expected: &quot;any&quot; },
{ type: &quot;remove&quot;, value: 1, expected: true },
{ type: &quot;insert&quot;, value: 2, expected: false },
{ type: &quot;getRandom&quot;, expected: 2 },
],
description: &quot;Standard sequence of operations&quot;,
},
{
name: &quot;Empty set operations&quot;,
operations: [
{ type: &quot;remove&quot;, value: 1, expected: false },
{ type: &quot;insert&quot;, value: 1, expected: true },
{ type: &quot;getRandom&quot;, expected: 1 },
],
description: &quot;Operations on initially empty set&quot;,
},
{
name: &quot;Duplicate insertions&quot;,
operations: [
{ type: &quot;insert&quot;, value: 1, expected: true },
{ type: &quot;insert&quot;, value: 1, expected: false },
{ type: &quot;insert&quot;, value: 2, expected: true },
{ type: &quot;insert&quot;, value: 2, expected: false },
],
description: &quot;Testing duplicate insertions&quot;,
},
{
name: &quot;Remove non-existent elements&quot;,
operations: [
{ type: &quot;remove&quot;, value: 1, expected: false },
{ type: &quot;insert&quot;, value: 1, expected: true },
{ type: &quot;remove&quot;, value: 2, expected: false },
{ type: &quot;remove&quot;, value: 1, expected: true },
{ type: &quot;remove&quot;, value: 1, expected: false },
],
description: &quot;Testing removal of non-existent elements&quot;,
},
];</p>
<p>for (const testCase of testCases) {
console.log(<pre><code class="hljs undefined">Test: ${testCase.name}</code></pre>);
console.log(<pre><code class="hljs undefined">Description: ${testCase.description}</code></pre>);</p>
<pre><pre><code class="hljs undefined">const randomizedSet = new RandomizedSet();
let testPassed = true;

for (let i = 0; i &lt; testCase.operations.length; i++) {
  const operation = testCase.operations[i];
  let result: any;

  switch (operation.type) {
    case &quot;insert&quot;:
      result = randomizedSet.insert(operation.value);
      break;
    case &quot;remove&quot;:
      result = randomizedSet.remove(operation.value);
      break;
    case &quot;getRandom&quot;:
      result = randomizedSet.getRandom();
      break;
  }

  let passed = false;
  if (operation.expected === &quot;any&quot;) {
    passed = true; // Any value is acceptable for getRandom
  } else {
    passed = result === operation.expected;
  }

  console.log(
    `  ${i + 1}. ${operation.type}(${operation.value || &quot;&quot;}) -&gt; ${result} ${
      passed ? &quot;‚úÖ&quot; : &quot;‚ùå&quot;
    }`
  );

  if (!passed) {
    testPassed = false;
  }
}

console.log(`Test ${testPassed ? &quot;PASSED&quot; : &quot;FAILED&quot;}`);
console.log(`Final set: [${randomizedSet.toArray().join(&quot;, &quot;)}]`);
console.log(&quot;---&quot;);
</code></pre></pre>
<p>}</p>
<p>// Test with statistics
console.log(&quot;\n=== Testing with Statistics ===&quot;);
console.log(&quot;=== Ki·ªÉm th·ª≠ v·ªõi th·ªëng k√™ ===\n&quot;);</p>
<p>const statsSet = new RandomizedSetWithStats();</p>
<p>// Perform some operations
statsSet.insert(1);
statsSet.insert(2);
statsSet.insert(3);
statsSet.remove(2);
statsSet.insert(4);
statsSet.getRandom();
statsSet.getRandom();
statsSet.getRandom();</p>
<p>const stats = statsSet.getStats();
console.log(&quot;Operation Statistics:&quot;);
console.log(<pre><code class="hljs undefined">  Insert operations: ${stats.insertCount}</code></pre>);
console.log(<pre><code class="hljs undefined">  Remove operations: ${stats.removeCount}</code></pre>);
console.log(<pre><code class="hljs undefined">  GetRandom operations: ${stats.getRandomCount}</code></pre>);
console.log(<pre><code class="hljs undefined">  Current set: [${statsSet.toArray().join(&quot;, &quot;)}]</code></pre>);</p>
<p>// Test random distribution
console.log(&quot;\n=== Testing Random Distribution ===&quot;);
console.log(&quot;=== Ki·ªÉm th·ª≠ ph√¢n b·ªë ng·∫´u nhi√™n ===\n&quot;);</p>
<p>const testSet = new RandomizedSetWithStats();
testSet.insert(1);
testSet.insert(2);
testSet.insert(3);
testSet.insert(4);
testSet.insert(5);</p>
<p>const distributionAnalysis = testSet.analyzeRandomDistribution(1000);</p>
<p>console.log(&quot;Random Distribution Analysis (1000 calls):&quot;);
console.log(
<pre><code class="hljs undefined">Expected frequency per element: ${distributionAnalysis.expectedFrequency.toFixed(       2     )}</code></pre>
);
console.log(&quot;Actual frequencies:&quot;);
testSet.toArray().forEach((val, index) =&gt; {
const actual = distributionAnalysis.actualFrequencies[index];
const expected = distributionAnalysis.expectedFrequency;
const deviation = (Math.abs(actual - expected) / expected) * 100;
console.log(<pre><code class="hljs undefined">  ${val}: ${actual} (${deviation.toFixed(1)}% deviation)</code></pre>);
});</p>
<p>// Performance comparison
console.log(&quot;\n=== Performance Comparison ===&quot;);
console.log(&quot;=== So s√°nh hi·ªáu su·∫•t ===\n&quot;);</p>
<p>const set1 = new RandomizedSet();
const set2 = new RandomizedSetAlternative();</p>
<p>const operations = 10000;
const testValues = Array.from({ length: 1000 }, (_, i) =&gt; i);</p>
<p>console.log(<pre><code class="hljs undefined">Testing with ${operations} operations...</code></pre>);
console.log(<pre><code class="hljs undefined">Ki·ªÉm th·ª≠ v·ªõi ${operations} thao t√°c...</code></pre>);</p>
<p>// Test RandomizedSet
const start1 = performance.now();
for (let i = 0; i &lt; operations; i++) {
const val = testValues[i % testValues.length];
const operation = i % 3;</p>
<pre><pre><code class="hljs undefined">switch (operation) {
  case 0:
    set1.insert(val);
    break;
  case 1:
    set1.remove(val);
    break;
  case 2:
    set1.getRandom();
    break;
}
</code></pre></pre>
<p>}
const time1 = performance.now() - start1;</p>
<p>// Test RandomizedSetAlternative
const start2 = performance.now();
for (let i = 0; i &lt; operations; i++) {
const val = testValues[i % testValues.length];
const operation = i % 3;</p>
<pre><pre><code class="hljs undefined">switch (operation) {
  case 0:
    set2.insert(val);
    break;
  case 1:
    set2.remove(val);
    break;
  case 2:
    set2.getRandom();
    break;
}
</code></pre></pre>
<p>}
const time2 = performance.now() - start2;</p>
<p>console.log(<pre><code class="hljs undefined">HashMap + Array: ${time1.toFixed(4)}ms</code></pre>);
console.log(<pre><code class="hljs undefined">Set + Array: ${time2.toFixed(4)}ms</code></pre>);
console.log(<pre><code class="hljs undefined">Speedup: ${(time2 / time1).toFixed(2)}x</code></pre>);</p>
<p>// Verify final states match
const finalState1 = set1.toArray().sort((a, b) =&gt; a - b);
const finalState2 = set2.toArray().sort((a, b) =&gt; a - b);
console.log(
<pre><code class="hljs undefined">Final states match: ${       JSON.stringify(finalState1) === JSON.stringify(finalState2)         ? &quot;‚úÖ Yes&quot;         : &quot;‚ùå No&quot;     }</code></pre>
);
}</p>
<p>// Run tests if this file is executed directly
if (require.main === module) {
runTests();
}</p>
<p>export { RandomizedSet, RandomizedSetAlternative, RandomizedSetWithStats };
{% endraw %}</p></div></div></main><footer class="sc-dYwGCk cJzheU"><div class="sc-lgpSej hJUFeT"><div class="sc-eqYatC mSxwd"><div class="sc-kcLKEh cmBIup"><div class="sc-dntSTA bAsNIP"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-code "><polyline points="16 18 22 12 16 6"></polyline><polyline points="8 6 2 12 8 18"></polyline></svg>Frontend Interview Prep</div><p class="sc-kvnevz gWXMDV">Comprehensive interview preparation for frontend engineers targeting Big Tech companies.</p><div class="sc-dFVmKS jCoOHQ"><a href="https://github.com" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-github "><path d="M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4"></path><path d="M9 18c-4.51 2-5-2-7-2"></path></svg></a><a href="https://twitter.com" aria-label="Twitter"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-twitter "><path d="M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z"></path></svg></a><a href="https://linkedin.com" aria-label="LinkedIn"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-linkedin "><path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"></path><rect width="4" height="12" x="2" y="9"></rect><circle cx="4" cy="4" r="2"></circle></svg></a><a href="mailto:contact@example.com" aria-label="Email"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-mail "><rect width="20" height="16" x="2" y="4" rx="2"></rect><path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"></path></svg></a></div></div><div class="sc-kcLKEh cmBIup"><h3>Study Materials</h3><ul><li><a href="/algorithms">Algorithms</a></li><li><a href="/react">React &amp; Frontend</a></li><li><a href="/system-design">System Design</a></li><li><a href="/typescript">TypeScript</a></li><li><a href="/performance">Performance</a></li></ul></div><div class="sc-kcLKEh cmBIup"><h3>Companies</h3><ul><li><a href="/google">Google</a></li><li><a href="/meta">Meta</a></li><li><a href="/amazon">Amazon</a></li><li><a href="/microsoft">Microsoft</a></li><li><a href="/apple">Apple</a></li></ul></div><div class="sc-kcLKEh cmBIup"><h3>Resources</h3><ul><li><a href="/interview-tips">Interview Tips</a></li><li><a href="/coding-challenges">Coding Challenges</a></li><li><a href="/mock-interviews">Mock Interviews</a></li><li><a href="/blog">Blog</a></li><li><a href="/faq">FAQ</a></li></ul></div></div><div class="sc-kCuUfV crUaYh"><p class="sc-dNdcvo esMlQF">¬© 2025 Frontend Interview Prep. All rights reserved.</p><div class="sc-fbQrwq eHcrXx"><a href="/privacy">Privacy Policy</a><a href="/terms">Terms of Service</a><a href="/contact">Contact</a></div></div></div></footer></div><script src="/interview/_next/static/chunks/webpack-be7d7df45533bffc.js" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0]);self.__next_f.push([2,null])</script><script>self.__next_f.push([1,"1:HL[\"/interview/_next/static/media/e4af272ccee01ff0-s.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n2:HL[\"/interview/_next/static/css/387024c6a2216908.css\",\"style\"]\n"])</script><script>self.__next_f.push([1,"3:I[2846,[],\"\"]\n5:I[5907,[\"918\",\"static/chunks/918-3273b83890f10546.js\",\"930\",\"static/chunks/930-3262a6c9c5acace4.js\",\"687\",\"static/chunks/app/docs/%5B...slug%5D/page-32962e9542d32755.js\"],\"default\"]\n7:I[4707,[],\"\"]\n9:I[6423,[],\"\"]\na:I[2,[\"918\",\"static/chunks/918-3273b83890f10546.js\",\"710\",\"static/chunks/710-dfaa11b4dff08f8e.js\",\"972\",\"static/chunks/972-011bba60ed155615.js\",\"233\",\"static/chunks/233-3e0c1d820a17eca9.js\",\"185\",\"static/chunks/app/layout-333f4adcd11f8f39.js\"],\"default\",1]\nc:I[1060,[],\"\"]\n6:T3a88,"])</script><script>self.__next_f.push([1,"\n# Insert Delete GetRandom O(1)\n\n\n\n## Problem Description\n\n *  * Implement the RandomizedSet class:  * - RandomizedSet() Initializes the RandomizedSet object.  * - bool insert(int val) Inserts an item val into the set if not present. Returns true if the item was not present, false otherwise.  * - bool remove(int val) Removes an item val from the set if present. Returns true if the item was present, false otherwise. \n\n## Solutions\n\n{% raw %}\n/**\n * Insert Delete GetRandom O(1)\n *\n * Problem: https://leetcode.com/problems/insert-delete-getrandom-o1/\n *\n * Implement the RandomizedSet class:\n * - RandomizedSet() Initializes the RandomizedSet object.\n * - bool insert(int val) Inserts an item val into the set if not present. Returns true if the item was not present, false otherwise.\n * - bool remove(int val) Removes an item val from the set if present. Returns true if the item was present, false otherwise.\n * - int getRandom() Returns a random element from the current set of elements (it's guaranteed that at least one element exists when this method is called).\n *\n * Each function must work in average O(1) time complexity.\n *\n * Example 1:\n * Input: [\"RandomizedSet\", \"insert\", \"remove\", \"insert\", \"getRandom\", \"remove\", \"insert\", \"getRandom\"]\n * [[], [1], [2], [2], [], [1], [2], []]\n * Output: [null, true, false, true, 2, true, false, 2]\n *\n * Explanation:\n * RandomizedSet randomizedSet = new RandomizedSet();\n * randomizedSet.insert(1); // Inserts 1 to the set. Returns true as 1 was inserted successfully.\n * randomizedSet.remove(2); // Returns false as 2 does not exist in the set.\n * randomizedSet.insert(2); // Inserts 2 to the set, returns true. Set now contains [1,2].\n * randomizedSet.getRandom(); // getRandom() should return either 1 or 2 randomly.\n * randomizedSet.remove(1); // Removes 1 from the set, returns true. Set now contains [2].\n * randomizedSet.insert(2); // 2 was already in the set, so return false.\n * randomizedSet.getRandom(); // Since 2 is the only number in the set, getRandom() will always return 2.\n *\n * Constraints:\n * - -2^31 \u003c= val \u003c= 2^31 - 1\n * - At most 2 * 10^5 calls will be made to insert, remove, and getRandom.\n * - There will be at least one element in the data structure when getRandom is called.\n *\n * Solution Approach:\n * 1. Use HashMap + ArrayList combination\n * 2. HashMap stores value -\u003e index mapping\n * 3. ArrayList stores values for random access\n * 4. For removal, swap with last element and remove last\n * 5. All operations achieve O(1) average time complexity\n *\n * Time Complexity: O(1) average for all operations\n * Space Complexity: O(n) where n is the number of elements\n */\n\n/**\n * RandomizedSet class with O(1) operations\n *\n * L·ªõp RandomizedSet v·ªõi c√°c thao t√°c O(1)\n */\nclass RandomizedSet {\n  private map: Map\u003cnumber, number\u003e; // value -\u003e index\n  private array: number[]; // values for random access\n\n  constructor() {\n    this.map = new Map();\n    this.array = [];\n  }\n\n  /**\n   * Insert a value into the set\n   *\n   * Ch√®n m·ªôt gi√° tr·ªã v√†o t·∫≠p h·ª£p\n   *\n   * @param val - Value to insert\n   * @returns true if inserted, false if already exists\n   */\n  insert(val: number): boolean {\n    if (this.map.has(val)) {\n      return false;\n    }\n\n    this.array.push(val);\n    this.map.set(val, this.array.length - 1);\n    return true;\n  }\n\n  /**\n   * Remove a value from the set\n   *\n   * X√≥a m·ªôt gi√° tr·ªã kh·ªèi t·∫≠p h·ª£p\n   *\n   * @param val - Value to remove\n   * @returns true if removed, false if not found\n   */\n  remove(val: number): boolean {\n    if (!this.map.has(val)) {\n      return false;\n    }\n\n    const index = this.map.get(val)!;\n    const lastElement = this.array[this.array.length - 1];\n\n    // Swap with last element\n    this.array[index] = lastElement;\n    this.map.set(lastElement, index);\n\n    // Remove last element\n    this.array.pop();\n    this.map.delete(val);\n\n    return true;\n  }\n\n  /**\n   * Get a random element from the set\n   *\n   * L·∫•y m·ªôt ph·∫ßn t·ª≠ ng·∫´u nhi√™n t·ª´ t·∫≠p h·ª£p\n   *\n   * @returns Random element from the set\n   */\n  getRandom(): number {\n    const randomIndex = Math.floor(Math.random() * this.array.length);\n    return this.array[randomIndex];\n  }\n\n  /**\n   * Get the size of the set\n   *\n   * L·∫•y k√≠ch th∆∞·ªõc c·ªßa t·∫≠p h·ª£p\n   *\n   * @returns Number of elements in the set\n   */\n  size(): number {\n    return this.array.length;\n  }\n\n  /**\n   * Check if a value exists in the set\n   *\n   * Ki·ªÉm tra xem m·ªôt gi√° tr·ªã c√≥ t·ªìn t·∫°i trong t·∫≠p h·ª£p kh√¥ng\n   *\n   * @param val - Value to check\n   * @returns true if exists, false otherwise\n   */\n  has(val: number): boolean {\n    return this.map.has(val);\n  }\n\n  /**\n   * Get all elements in the set\n   *\n   * L·∫•y t·∫•t c·∫£ ph·∫ßn t·ª≠ trong t·∫≠p h·ª£p\n   *\n   * @returns Array of all elements\n   */\n  toArray(): number[] {\n    return [...this.array];\n  }\n}\n\n/**\n * Alternative Implementation: Using Set + Array\n *\n * Gi·∫£i ph√°p thay th·∫ø: S·ª≠ d·ª•ng Set + Array\n */\nclass RandomizedSetAlternative {\n  private set: Set\u003cnumber\u003e;\n  private array: number[];\n\n  constructor() {\n    this.set = new Set();\n    this.array = [];\n  }\n\n  insert(val: number): boolean {\n    if (this.set.has(val)) {\n      return false;\n    }\n\n    this.set.add(val);\n    this.array.push(val);\n    return true;\n  }\n\n  remove(val: number): boolean {\n    if (!this.set.has(val)) {\n      return false;\n    }\n\n    this.set.delete(val);\n    const index = this.array.indexOf(val);\n\n    if (index \u003e -1) {\n      this.array.splice(index, 1);\n    }\n\n    return true;\n  }\n\n  getRandom(): number {\n    const randomIndex = Math.floor(Math.random() * this.array.length);\n    return this.array[randomIndex];\n  }\n\n  size(): number {\n    return this.set.size;\n  }\n\n  has(val: number): boolean {\n    return this.set.has(val);\n  }\n\n  toArray(): number[] {\n    return [...this.set];\n  }\n}\n\n/**\n * Implementation with Statistics Tracking\n *\n * Gi·∫£i ph√°p v·ªõi theo d√µi th·ªëng k√™\n */\nclass RandomizedSetWithStats extends RandomizedSet {\n  private insertCount: number = 0;\n  private removeCount: number = 0;\n  private getRandomCount: number = 0;\n  private valueFrequency: Map\u003cnumber, number\u003e = new Map();\n\n  insert(val: number): boolean {\n    const result = super.insert(val);\n    this.insertCount++;\n\n    if (result) {\n      this.valueFrequency.set(val, (this.valueFrequency.get(val) || 0) + 1);\n    }\n\n    return result;\n  }\n\n  remove(val: number): boolean {\n    const result = super.remove(val);\n    this.removeCount++;\n\n    if (result) {\n      const freq = this.valueFrequency.get(val) || 0;\n      if (freq \u003e 1) {\n        this.valueFrequency.set(val, freq - 1);\n      } else {\n        this.valueFrequency.delete(val);\n      }\n    }\n\n    return result;\n  }\n\n  getRandom(): number {\n    this.getRandomCount++;\n    return super.getRandom();\n  }\n\n  /**\n   * Get statistics about operations\n   *\n   * L·∫•y th·ªëng k√™ v·ªÅ c√°c thao t√°c\n   *\n   * @returns Object containing operation statistics\n   */\n  getStats(): {\n    insertCount: number;\n    removeCount: number;\n    getRandomCount: number;\n    valueFrequency: Map\u003cnumber, number\u003e;\n  } {\n    return {\n      insertCount: this.insertCount,\n      removeCount: this.removeCount,\n      getRandomCount: this.getRandomCount,\n      valueFrequency: new Map(this.valueFrequency),\n    };\n  }\n\n  /**\n   * Get random distribution analysis\n   *\n   * Ph√¢n t√≠ch ph√¢n b·ªë ng·∫´u nhi√™n\n   *\n   * @param iterations - Number of getRandom calls to test\n   * @returns Object containing distribution analysis\n   */\n  analyzeRandomDistribution(iterations: number): {\n    distribution: Map\u003cnumber, number\u003e;\n    expectedFrequency: number;\n    actualFrequencies: number[];\n  } {\n    const distribution = new Map\u003cnumber, number\u003e();\n    const elements = this.toArray();\n\n    if (elements.length === 0) {\n      return { distribution, expectedFrequency: 0, actualFrequencies: [] };\n    }\n\n    const expectedFrequency = iterations / elements.length;\n\n    for (let i = 0; i \u003c iterations; i++) {\n      const randomValue = this.getRandom();\n      distribution.set(randomValue, (distribution.get(randomValue) || 0) + 1);\n    }\n\n    const actualFrequencies = elements.map((val) =\u003e distribution.get(val) || 0);\n\n    return { distribution, expectedFrequency, actualFrequencies };\n  }\n}\n\n// Test cases / C√°c tr∆∞·ªùng h·ª£p ki·ªÉm th·ª≠\nfunction runTests() {\n  console.log(\"=== Insert Delete GetRandom O(1) Tests ===\");\n  console.log(\"=== Ki·ªÉm th·ª≠ b√†i to√°n Ch√®n X√≥a L·∫•y ng·∫´u nhi√™n O(1) ===\\n\");\n\n  const testCases = [\n    {\n      name: \"Example 1: Standard operations\",\n      operations: [\n        { type: \"insert\", value: 1, expected: true },\n        { type: \"remove\", value: 2, expected: false },\n        { type: \"insert\", value: 2, expected: true },\n        { type: \"getRandom\", expected: \"any\" },\n        { type: \"remove\", value: 1, expected: true },\n        { type: \"insert\", value: 2, expected: false },\n        { type: \"getRandom\", expected: 2 },\n      ],\n      description: \"Standard sequence of operations\",\n    },\n    {\n      name: \"Empty set operations\",\n      operations: [\n        { type: \"remove\", value: 1, expected: false },\n        { type: \"insert\", value: 1, expected: true },\n        { type: \"getRandom\", expected: 1 },\n      ],\n      description: \"Operations on initially empty set\",\n    },\n    {\n      name: \"Duplicate insertions\",\n      operations: [\n        { type: \"insert\", value: 1, expected: true },\n        { type: \"insert\", value: 1, expected: false },\n        { type: \"insert\", value: 2, expected: true },\n        { type: \"insert\", value: 2, expected: false },\n      ],\n      description: \"Testing duplicate insertions\",\n    },\n    {\n      name: \"Remove non-existent elements\",\n      operations: [\n        { type: \"remove\", value: 1, expected: false },\n        { type: \"insert\", value: 1, expected: true },\n        { type: \"remove\", value: 2, expected: false },\n        { type: \"remove\", value: 1, expected: true },\n        { type: \"remove\", value: 1, expected: false },\n      ],\n      description: \"Testing removal of non-existent elements\",\n    },\n  ];\n\n  for (const testCase of testCases) {\n    console.log(`Test: ${testCase.name}`);\n    console.log(`Description: ${testCase.description}`);\n\n    const randomizedSet = new RandomizedSet();\n    let testPassed = true;\n\n    for (let i = 0; i \u003c testCase.operations.length; i++) {\n      const operation = testCase.operations[i];\n      let result: any;\n\n      switch (operation.type) {\n        case \"insert\":\n          result = randomizedSet.insert(operation.value);\n          break;\n        case \"remove\":\n          result = randomizedSet.remove(operation.value);\n          break;\n        case \"getRandom\":\n          result = randomizedSet.getRandom();\n          break;\n      }\n\n      let passed = false;\n      if (operation.expected === \"any\") {\n        passed = true; // Any value is acceptable for getRandom\n      } else {\n        passed = result === operation.expected;\n      }\n\n      console.log(\n        `  ${i + 1}. ${operation.type}(${operation.value || \"\"}) -\u003e ${result} ${\n          passed ? \"‚úÖ\" : \"‚ùå\"\n        }`\n      );\n\n      if (!passed) {\n        testPassed = false;\n      }\n    }\n\n    console.log(`Test ${testPassed ? \"PASSED\" : \"FAILED\"}`);\n    console.log(`Final set: [${randomizedSet.toArray().join(\", \")}]`);\n    console.log(\"---\");\n  }\n\n  // Test with statistics\n  console.log(\"\\n=== Testing with Statistics ===\");\n  console.log(\"=== Ki·ªÉm th·ª≠ v·ªõi th·ªëng k√™ ===\\n\");\n\n  const statsSet = new RandomizedSetWithStats();\n\n  // Perform some operations\n  statsSet.insert(1);\n  statsSet.insert(2);\n  statsSet.insert(3);\n  statsSet.remove(2);\n  statsSet.insert(4);\n  statsSet.getRandom();\n  statsSet.getRandom();\n  statsSet.getRandom();\n\n  const stats = statsSet.getStats();\n  console.log(\"Operation Statistics:\");\n  console.log(`  Insert operations: ${stats.insertCount}`);\n  console.log(`  Remove operations: ${stats.removeCount}`);\n  console.log(`  GetRandom operations: ${stats.getRandomCount}`);\n  console.log(`  Current set: [${statsSet.toArray().join(\", \")}]`);\n\n  // Test random distribution\n  console.log(\"\\n=== Testing Random Distribution ===\");\n  console.log(\"=== Ki·ªÉm th·ª≠ ph√¢n b·ªë ng·∫´u nhi√™n ===\\n\");\n\n  const testSet = new RandomizedSetWithStats();\n  testSet.insert(1);\n  testSet.insert(2);\n  testSet.insert(3);\n  testSet.insert(4);\n  testSet.insert(5);\n\n  const distributionAnalysis = testSet.analyzeRandomDistribution(1000);\n\n  console.log(\"Random Distribution Analysis (1000 calls):\");\n  console.log(\n    `Expected frequency per element: ${distributionAnalysis.expectedFrequency.toFixed(\n      2\n    )}`\n  );\n  console.log(\"Actual frequencies:\");\n  testSet.toArray().forEach((val, index) =\u003e {\n    const actual = distributionAnalysis.actualFrequencies[index];\n    const expected = distributionAnalysis.expectedFrequency;\n    const deviation = (Math.abs(actual - expected) / expected) * 100;\n    console.log(`  ${val}: ${actual} (${deviation.toFixed(1)}% deviation)`);\n  });\n\n  // Performance comparison\n  console.log(\"\\n=== Performance Comparison ===\");\n  console.log(\"=== So s√°nh hi·ªáu su·∫•t ===\\n\");\n\n  const set1 = new RandomizedSet();\n  const set2 = new RandomizedSetAlternative();\n\n  const operations = 10000;\n  const testValues = Array.from({ length: 1000 }, (_, i) =\u003e i);\n\n  console.log(`Testing with ${operations} operations...`);\n  console.log(`Ki·ªÉm th·ª≠ v·ªõi ${operations} thao t√°c...`);\n\n  // Test RandomizedSet\n  const start1 = performance.now();\n  for (let i = 0; i \u003c operations; i++) {\n    const val = testValues[i % testValues.length];\n    const operation = i % 3;\n\n    switch (operation) {\n      case 0:\n        set1.insert(val);\n        break;\n      case 1:\n        set1.remove(val);\n        break;\n      case 2:\n        set1.getRandom();\n        break;\n    }\n  }\n  const time1 = performance.now() - start1;\n\n  // Test RandomizedSetAlternative\n  const start2 = performance.now();\n  for (let i = 0; i \u003c operations; i++) {\n    const val = testValues[i % testValues.length];\n    const operation = i % 3;\n\n    switch (operation) {\n      case 0:\n        set2.insert(val);\n        break;\n      case 1:\n        set2.remove(val);\n        break;\n      case 2:\n        set2.getRandom();\n        break;\n    }\n  }\n  const time2 = performance.now() - start2;\n\n  console.log(`HashMap + Array: ${time1.toFixed(4)}ms`);\n  console.log(`Set + Array: ${time2.toFixed(4)}ms`);\n  console.log(`Speedup: ${(time2 / time1).toFixed(2)}x`);\n\n  // Verify final states match\n  const finalState1 = set1.toArray().sort((a, b) =\u003e a - b);\n  const finalState2 = set2.toArray().sort((a, b) =\u003e a - b);\n  console.log(\n    `Final states match: ${\n      JSON.stringify(finalState1) === JSON.stringify(finalState2)\n        ? \"‚úÖ Yes\"\n        : \"‚ùå No\"\n    }`\n  );\n}\n\n// Run tests if this file is executed directly\nif (require.main === module) {\n  runTests();\n}\n\nexport { RandomizedSet, RandomizedSetAlternative, RandomizedSetWithStats };\n{% endraw %}\n"])</script><script>self.__next_f.push([1,"8:[\"slug\",\"leetcode/design/problems/05-insert-delete-getrandom-o1\",\"c\"]\nd:[]\n"])</script><script>self.__next_f.push([1,"0:[\"$\",\"$L3\",null,{\"buildId\":\"GkGybauu5extr5oVPcZnD\",\"assetPrefix\":\"/interview\",\"urlParts\":[\"\",\"docs\",\"leetcode\",\"design\",\"problems\",\"05-insert-delete-getrandom-o1\"],\"initialTree\":[\"\",{\"children\":[\"docs\",{\"children\":[[\"slug\",\"leetcode/design/problems/05-insert-delete-getrandom-o1\",\"c\"],{\"children\":[\"__PAGE__?{\\\"slug\\\":[\\\"leetcode\\\",\\\"design\\\",\\\"problems\\\",\\\"05-insert-delete-getrandom-o1\\\"]}\",{}]}]}]},\"$undefined\",\"$undefined\",true],\"initialSeedData\":[\"\",{\"children\":[\"docs\",{\"children\":[[\"slug\",\"leetcode/design/problems/05-insert-delete-getrandom-o1\",\"c\"],{\"children\":[\"__PAGE__\",{},[[\"$L4\",[\"$\",\"div\",null,{\"style\":{\"maxWidth\":\"1200px\",\"margin\":\"0 auto\",\"padding\":\"2rem\",\"paddingTop\":\"6rem\"},\"children\":[[\"$\",\"div\",null,{\"style\":{\"marginBottom\":\"2rem\"},\"children\":[[\"$\",\"nav\",null,{\"style\":{\"color\":\"#64748b\",\"fontSize\":\"0.9rem\",\"marginBottom\":\"1rem\"},\"children\":[[\"$\",\"a\",null,{\"href\":\"/interview\",\"style\":{\"color\":\"#3b82f6\",\"textDecoration\":\"none\"},\"children\":\"Home\"}],\" \u003e \",[\"$\",\"span\",null,{\"children\":\"leetcode \u003e design \u003e problems \u003e 05-insert-delete-getrandom-o1\"}]]}],[\"$\",\"h1\",null,{\"style\":{\"fontSize\":\"2.5rem\",\"fontWeight\":\"800\",\"marginBottom\":\"0.5rem\",\"color\":\"#1e293b\"},\"children\":\"Insert Delete GetRandom O(1)\"}],[\"$\",\"div\",null,{\"style\":{\"color\":\"#64748b\",\"fontSize\":\"0.9rem\",\"marginBottom\":\"2rem\"},\"children\":[[\"$\",\"span\",null,{\"children\":[\"üìÅ \",\"leetcode/design/problems/05-insert-delete-getrandom-o1.md\"]}],\"$undefined\",\"$undefined\"]}]]}],[\"$\",\"$L5\",null,{\"content\":\"$6\"}]]}],null],null],null]},[null,[\"$\",\"$L7\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"docs\",\"children\",\"$8\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L9\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\"}]],null]},[null,[\"$\",\"$L7\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"docs\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L9\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\"}]],null]},[[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/interview/_next/static/css/387024c6a2216908.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\"}]],[\"$\",\"$La\",null,{\"children\":[\"$\",\"$L7\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L9\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":\"404\"}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]],\"notFoundStyles\":[]}],\"params\":{}}]],null],null],\"couldBeIntercepted\":false,\"initialHead\":[null,\"$Lb\"],\"globalErrorComponent\":\"$c\",\"missingSlots\":\"$Wd\"}]\n"])</script><script>self.__next_f.push([1,"b:[[\"$\",\"meta\",\"0\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}],[\"$\",\"meta\",\"1\",{\"charSet\":\"utf-8\"}],[\"$\",\"title\",\"2\",{\"children\":\"Insert Delete GetRandom O(1) - Frontend Interview Docs\"}],[\"$\",\"meta\",\"3\",{\"name\":\"description\",\"content\":\" # Insert Delete GetRandom O(1)    ## Problem Description   *  * Implement the RandomizedSet class:  * - RandomizedSet() Initializes the RandomizedSet object.  \"}],[\"$\",\"meta\",\"4\",{\"property\":\"og:title\",\"content\":\"Insert Delete GetRandom O(1) - Frontend Interview Docs\"}],[\"$\",\"meta\",\"5\",{\"property\":\"og:description\",\"content\":\" # Insert Delete GetRandom O(1)    ## Problem Description   *  * Implement the RandomizedSet class:  * - RandomizedSet() Initializes the RandomizedSet object.  \"}],[\"$\",\"meta\",\"6\",{\"property\":\"og:type\",\"content\":\"article\"}],[\"$\",\"meta\",\"7\",{\"name\":\"twitter:card\",\"content\":\"summary\"}],[\"$\",\"meta\",\"8\",{\"name\":\"twitter:title\",\"content\":\"Insert Delete GetRandom O(1) - Frontend Interview Docs\"}],[\"$\",\"meta\",\"9\",{\"name\":\"twitter:description\",\"content\":\" # Insert Delete GetRandom O(1)    ## Problem Description   *  * Implement the RandomizedSet class:  * - RandomizedSet() Initializes the RandomizedSet object.  \"}],[\"$\",\"meta\",\"10\",{\"name\":\"next-size-adjust\"}]]\n4:null\n"])</script></body></html>