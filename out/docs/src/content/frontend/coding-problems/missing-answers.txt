2:I[5907,["918","static/chunks/918-3273b83890f10546.js","930","static/chunks/930-3262a6c9c5acace4.js","687","static/chunks/app/docs/%5B...slug%5D/page-32962e9542d32755.js"],"default"]
4:I[4707,[],""]
6:I[6423,[],""]
7:I[2,["918","static/chunks/918-3273b83890f10546.js","710","static/chunks/710-dfaa11b4dff08f8e.js","972","static/chunks/972-011bba60ed155615.js","233","static/chunks/233-3e0c1d820a17eca9.js","185","static/chunks/app/layout-333f4adcd11f8f39.js"],"default",1]
3:T71ac,# Missing Answers for Coding & System Design Problems

---

## 1. Editable Table Cells

**Question:** How would you allow users to edit table cells inline and save changes?

### English

- Render each cell as a text input or select when in edit mode.
- Track which cell is being edited (row/column).
- Save changes on blur or Enter, revert on Escape.
- Validate input if needed before saving.
- Update the data model and re-render the table.

### Vietnamese

- Hi·ªÉn th·ªã m·ªói √¥ d∆∞·ªõi d·∫°ng input ho·∫∑c select khi ·ªü ch·∫ø ƒë·ªô ch·ªânh s·ª≠a.
- Theo d√µi √¥ n√†o ƒëang ƒë∆∞·ª£c ch·ªânh s·ª≠a (d√≤ng/c·ªôt).
- L∆∞u thay ƒë·ªïi khi blur ho·∫∑c nh·∫•n Enter, ho√†n t√°c khi nh·∫•n Escape.
- Ki·ªÉm tra h·ª£p l·ªá d·ªØ li·ªáu tr∆∞·ªõc khi l∆∞u (n·∫øu c·∫ßn).
- C·∫≠p nh·∫≠t d·ªØ li·ªáu v√† render l·∫°i b·∫£ng.

#### Diagram: Editable Table Cell State Flow

```mermaid
flowchart TD
  A[User Double Clicks Cell] --> B[Cell Enters Edit Mode]
  B --> C[User Edits Value]
  C --> D{User Action}
  D -- Enter/Blur --> E[Save Value]
  D -- Escape --> F[Revert Value]
  E --> G[Update Table]
  F --> G
```

---

## 2. Row Selection and Bulk Actions

**Question:** How would you implement row selection (single/multi) and bulk actions (delete, export)?

### English

- Add a checkbox to each row and a master checkbox in the header.
- Track selected row IDs in state (e.g., a Set).
- Provide bulk action buttons (Delete Selected, Export Selected).
- For accessibility, ensure checkboxes are keyboard accessible and have proper labels.

### Vietnamese

- Th√™m checkbox cho m·ªói d√≤ng v√† m·ªôt checkbox t·ªïng ·ªü ti√™u ƒë·ªÅ.
- L∆∞u tr·∫°ng th√°i c√°c d√≤ng ƒë∆∞·ª£c ch·ªçn (v√≠ d·ª• d√πng Set).
- Th√™m n√∫t thao t√°c h√†ng lo·∫°t (X√≥a, Xu·∫•t).
- ƒê·∫£m b·∫£o accessibility: checkbox c√≥ th·ªÉ d√πng b√†n ph√≠m v√† c√≥ nh√£n r√µ r√†ng.

---

## 3. Column Reordering

**Question:** How would you allow users to reorder columns via drag-and-drop?

### English

- Use HTML5 Drag and Drop API or a library (e.g., react-beautiful-dnd).
- Update the columns order in state on drop.
- Re-render table with new column order.
- Provide visual feedback during drag.

### Vietnamese

- S·ª≠ d·ª•ng HTML5 Drag and Drop API ho·∫∑c th∆∞ vi·ªán (v√≠ d·ª• react-beautiful-dnd).
- C·∫≠p nh·∫≠t th·ª© t·ª± c·ªôt trong state khi th·∫£.
- Render l·∫°i b·∫£ng v·ªõi th·ª© t·ª± c·ªôt m·ªõi.
- Hi·ªÉn th·ªã hi·ªáu ·ª©ng k√©o th·∫£ cho ng∆∞·ªùi d√πng.

---

## 4. Server-Side Pagination and Filtering

**Question:** How would you handle tables with millions of rows (server-side pagination/filtering)?

### English

- Fetch only the current page of data from the server.
- Send filter/sort params in API requests.
- Show loading indicators and handle errors.
- Consider debouncing filter input to reduce API calls.

### Vietnamese

- Ch·ªâ l·∫•y d·ªØ li·ªáu trang hi·ªán t·∫°i t·ª´ server.
- G·ª≠i tham s·ªë l·ªçc/s·∫Øp x·∫øp trong request API.
- Hi·ªÉn th·ªã tr·∫°ng th√°i loading v√† x·ª≠ l√Ω l·ªói.
- N√™n debounce input l·ªçc ƒë·ªÉ gi·∫£m s·ªë l·∫ßn g·ªçi API.

---

## 5. Accessibility for Dynamic Tables

**Question:** What are the key accessibility considerations for dynamic tables?

### English

- Use semantic HTML (`<table>`, `<thead>`, `<tbody>`, `<th>`, `<td>`).
- Add ARIA roles and properties as needed.
- Ensure keyboard navigation (tab, arrow keys).
- Provide visible focus indicators.
- Announce changes to screen readers (e.g., row added/removed).

### Vietnamese

- S·ª≠ d·ª•ng HTML ng·ªØ nghƒ©a (`<table>`, `<thead>`, `<tbody>`, `<th>`, `<td>`).
- Th√™m ARIA roles v√† thu·ªôc t√≠nh n·∫øu c·∫ßn.
- ƒê·∫£m b·∫£o c√≥ th·ªÉ ƒëi·ªÅu h∆∞·ªõng b·∫±ng b√†n ph√≠m (tab, ph√≠m m≈©i t√™n).
- Hi·ªÉn th·ªã r√µ v√πng focus.
- Th√¥ng b√°o thay ƒë·ªïi cho screen reader (v√≠ d·ª• khi th√™m/x√≥a d√≤ng).

---

## 6. Virtual Scrolling (Performance Optimization)

**Question:** How would you implement virtual scrolling for a large list?

### English

- Only render visible items plus a small buffer (overscan).
- Calculate start/end indices based on scroll position.
- Use a spacer div to maintain scroll height.
- Update visible items on scroll.

### Vietnamese

- Ch·ªâ render c√°c item hi·ªÉn th·ªã tr√™n m√†n h√¨nh v√† m·ªôt buffer nh·ªè.
- T√≠nh to√°n ch·ªâ s·ªë b·∫Øt ƒë·∫ßu/k·∫øt th√∫c d·ª±a tr√™n v·ªã tr√≠ cu·ªôn.
- D√πng m·ªôt div spacer ƒë·ªÉ gi·ªØ chi·ªÅu cao cu·ªôn.
- C·∫≠p nh·∫≠t item hi·ªÉn th·ªã khi cu·ªôn.

#### Diagram: Virtual Scrolling

```mermaid
graph TD
  A[Full List] -->|Calculate Visible Range| B[Render Visible Items]
  B -->|User Scrolls| C[Update Range]
  C --> B
```

---

## 7. Notification System Design (System Design)

**Question:** How would you design a scalable notification system?

### English

- Use a message queue (e.g., RabbitMQ, Kafka) for scalable delivery.
- Store user notification preferences in a database.
- Use WebSockets for real-time delivery, fallback to polling for offline users.
- Support multiple channels (email, SMS, push).
- Ensure idempotency and retry logic for failed deliveries.
- Provide a UI for users to view and manage notifications.

### Vietnamese

- S·ª≠ d·ª•ng message queue (RabbitMQ, Kafka) ƒë·ªÉ m·ªü r·ªông h·ªá th·ªëng g·ª≠i th√¥ng b√°o.
- L∆∞u c√†i ƒë·∫∑t th√¥ng b√°o c·ªßa ng∆∞·ªùi d√πng trong database.
- D√πng WebSocket ƒë·ªÉ g·ª≠i th√¥ng b√°o th·ªùi gian th·ª±c, fallback sang polling n·∫øu offline.
- H·ªó tr·ª£ nhi·ªÅu k√™nh (email, SMS, push).
- ƒê·∫£m b·∫£o idempotency v√† retry khi g·ª≠i th·∫•t b·∫°i.
- Cung c·∫•p giao di·ªán cho ng∆∞·ªùi d√πng xem v√† qu·∫£n l√Ω th√¥ng b√°o.

#### Diagram: Notification System Architecture

```mermaid
graph TD
  A[App Server] --> B[Message Queue]
  B --> C[Notification Worker]
  C --> D[WebSocket Server]
  C --> E[Email/SMS Service]
  D --> F[User Browser]
  E --> G[User Device]
```

---

## 8. React Error Boundary

**Question:** How would you implement an error boundary component to catch and display errors in a React app?

### English

- Create a class component that implements `componentDidCatch` and `getDerivedStateFromError`.
- Wrap components that might throw errors.
- Provide a fallback UI when errors occur.
- Log errors for debugging and monitoring.
- Handle different types of errors appropriately.

### Vietnamese

- T·∫°o class component implement `componentDidCatch` v√† `getDerivedStateFromError`.
- B·ªçc c√°c component c√≥ th·ªÉ g√¢y l·ªói.
- Cung c·∫•p UI thay th·∫ø khi c√≥ l·ªói.
- Ghi log l·ªói ƒë·ªÉ debug v√† monitor.
- X·ª≠ l√Ω c√°c lo·∫°i l·ªói kh√°c nhau m·ªôt c√°ch ph√π h·ª£p.

#### Sample Implementation:

```jsx
class ErrorBoundary extends React.Component {
  constructor(props) {
    super(props);
    this.state = { hasError: false, error: null };
  }

  static getDerivedStateFromError(error) {
    return { hasError: true, error };
  }

  componentDidCatch(error, errorInfo) {
    console.error("Error caught by boundary:", error, errorInfo);
    // Send to error reporting service
    this.logErrorToService(error, errorInfo);
  }

  logErrorToService(error, errorInfo) {
    // Send to Sentry, LogRocket, etc.
  }

  render() {
    if (this.state.hasError) {
      return (
        <div className="error-boundary">
          <h2>Something went wrong.</h2>
          <button onClick={() => this.setState({ hasError: false })}>
            Try again
          </button>
        </div>
      );
    }

    return this.props.children;
  }
}
```

#### Diagram: Error Boundary Flow

```mermaid
flowchart TD
  A[Child Component] --> B{Throws Error?}
  B -->|Yes| C[Error Boundary Catches]
  B -->|No| D[Render Normally]
  C --> E[Show Fallback UI]
  C --> F[Log Error]
  E --> G[User Can Retry]
```

---

## 9. API Integration and Error Handling

**Question:** How would you integrate with a REST API and handle errors gracefully in the UI?

### English

- Use fetch or axios with proper error handling.
- Implement loading states and error states.
- Add retry logic for failed requests.
- Display user-friendly error messages.
- Handle different HTTP status codes appropriately.
- Implement request cancellation for better UX.

### Vietnamese

- S·ª≠ d·ª•ng fetch ho·∫∑c axios v·ªõi x·ª≠ l√Ω l·ªói ph√π h·ª£p.
- Implement tr·∫°ng th√°i loading v√† error.
- Th√™m logic retry cho request th·∫•t b·∫°i.
- Hi·ªÉn th·ªã th√¥ng b√°o l·ªói th√¢n thi·ªán v·ªõi ng∆∞·ªùi d√πng.
- X·ª≠ l√Ω c√°c HTTP status code kh√°c nhau.
- Implement h·ªßy request ƒë·ªÉ c·∫£i thi·ªán UX.

#### Sample Implementation:

{% raw %}

```javascript
class ApiService {
  constructor(baseURL) {
    this.baseURL = baseURL;
    this.controller = null;
  }

  async request(endpoint, options = {}) {
    // Cancel previous request
    if (this.controller) {
      this.controller.abort();
    }

    this.controller = new AbortController();

    try {
      const response = await fetch(`${this.baseURL}${endpoint}`, {
        ...options,
        signal: this.controller.signal,
        headers: {
          "Content-Type": "application/json",
          ...options.headers,
        },
      });

      if (!response.ok) {
        throw new ApiError(response.status, response.statusText);
      }

      return await response.json();
    } catch (error) {
      if (error.name === "AbortError") {
        throw new Error("Request cancelled");
      }
      throw error;
    }
  }

  async get(endpoint) {
    return this.request(endpoint);
  }

  async post(endpoint, data) {
    return this.request(endpoint, {
      method: "POST",
      body: JSON.stringify(data),
    });
  }
}

// Usage with React
function useApi() {
  const [data, setData] = useState(null);
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState(null);

  const fetchData = async (endpoint) => {
    setLoading(true);
    setError(null);

    try {
      const result = await api.get(endpoint);
      setData(result);
    } catch (err) {
      setError(err.message);
    } finally {
      setLoading(false);
    }
  };

  return { data, loading, error, fetchData };
}
```

{% endraw %}

---

## 10. Lazy Loading Images and Components

**Question:** How would you implement lazy loading for images and React components to improve performance?

### English

- Use Intersection Observer API for images.
- Use React.lazy and Suspense for components.
- Show placeholders or spinners while loading.
- Implement error boundaries for lazy components.
- Consider SEO implications and provide fallbacks.

### Vietnamese

- S·ª≠ d·ª•ng Intersection Observer API cho images.
- D√πng React.lazy v√† Suspense cho components.
- Hi·ªÉn th·ªã placeholder ho·∫∑c spinner khi loading.
- Implement error boundary cho lazy components.
- C√¢n nh·∫Øc SEO v√† cung c·∫•p fallback.

#### Sample Implementation:

```javascript
// Lazy loading images
class LazyImage {
  constructor() {
    this.images = document.querySelectorAll("[data-src]");
    this.observer = new IntersectionObserver(
      this.handleIntersection.bind(this)
    );
    this.init();
  }

  init() {
    this.images.forEach((img) => this.observer.observe(img));
  }

  handleIntersection(entries) {
    entries.forEach((entry) => {
      if (entry.isIntersecting) {
        const img = entry.target;
        img.src = img.dataset.src;
        img.classList.remove("lazy");
        this.observer.unobserve(img);
      }
    });
  }
}

// React lazy components
const LazyComponent = React.lazy(() => import("./HeavyComponent"));

function App() {
  return (
    <Suspense fallback={<div>Loading...</div>}>
      <LazyComponent />
    </Suspense>
  );
}
```

#### Diagram: Lazy Loading Flow

```mermaid
flowchart TD
  A[Component/Image] --> B{In Viewport?}
  B -->|No| C[Show Placeholder]
  B -->|Yes| D[Start Loading]
  D --> E{Load Success?}
  E -->|Yes| F[Show Content]
  E -->|No| G[Show Error]
  C --> B
```

---

## 11. XSS and CSRF Prevention

**Question:** How would you prevent XSS and CSRF attacks in a frontend application?

### English

- Sanitize user input and output using libraries like DOMPurify.
- Use Content Security Policy (CSP) headers.
- Implement CSRF tokens for state-changing requests.
- Use secure cookies with SameSite attribute.
- Validate and escape all user-generated content.
- Use HTTPS for all communications.

### Vietnamese

- L√†m s·∫°ch input v√† output c·ªßa user b·∫±ng th∆∞ vi·ªán nh∆∞ DOMPurify.
- S·ª≠ d·ª•ng Content Security Policy (CSP) headers.
- Implement CSRF tokens cho c√°c request thay ƒë·ªïi state.
- D√πng secure cookies v·ªõi thu·ªôc t√≠nh SameSite.
- Validate v√† escape t·∫•t c·∫£ n·ªôi dung do user t·∫°o.
- S·ª≠ d·ª•ng HTTPS cho t·∫•t c·∫£ giao ti·∫øp.

#### Sample Implementation:

```javascript
// XSS Prevention
import DOMPurify from "dompurify";

function sanitizeInput(input) {
  return DOMPurify.sanitize(input);
}

function renderUserContent(content) {
  const sanitized = sanitizeInput(content);
  return <div dangerouslySetInnerHTML={% raw %}{{ __html: sanitized }}{% endraw %} />;
}

// CSRF Prevention
class ApiClient {
  constructor() {
    this.csrfToken = this.getCsrfToken();
  }

  getCsrfToken() {
    return document.querySelector('meta[name="csrf-token"]')?.content;
  }

  async post(url, data) {
    const response = await fetch(url, {
      method: "POST",
      headers: {
        "Content-Type": "application/json",
        "X-CSRF-Token": this.csrfToken,
      },
      body: JSON.stringify(data),
      credentials: "same-origin",
    });
    return response.json();
  }
}

// CSP Implementation
const cspHeaders = {
  "Content-Security-Policy":
    "default-src 'self'; " +
    "script-src 'self' 'unsafe-inline'; " +
    "style-src 'self' 'unsafe-inline'; " +
    "img-src 'self' data: https:; " +
    "font-src 'self' https://fonts.gstatic.com;",
};
```

#### Diagram: Security Layers

```mermaid
graph TD
  A[User Input] --> B[Input Sanitization]
  B --> C[Content Security Policy]
  C --> D[CSRF Token Validation]
  D --> E[Secure Output]
  F[HTTPS] --> G[All Communications]
```

---

## 12. Component Unit Testing

**Question:** How would you write comprehensive unit tests for React components?

### English

- Use Jest and React Testing Library for testing.
- Test component rendering, props, and user interactions.
- Mock external dependencies and API calls.
- Test accessibility features (focus, ARIA attributes).
- Test error states and edge cases.
- Measure test coverage and maintain high coverage.

### Vietnamese

- S·ª≠ d·ª•ng Jest v√† React Testing Library ƒë·ªÉ test.
- Test vi·ªác render component, props v√† t∆∞∆°ng t√°c user.
- Mock external dependencies v√† API calls.
- Test accessibility features (focus, ARIA attributes).
- Test error states v√† edge cases.
- ƒêo l∆∞·ªùng test coverage v√† duy tr√¨ coverage cao.

#### Sample Implementation:

```javascript
import { render, screen, fireEvent, waitFor } from "@testing-library/react";
import userEvent from "@testing-library/user-event";
import Button from "./Button";

describe("Button Component", () => {
  test("renders with correct text", () => {
    render(<Button>Click me</Button>);
    expect(
      screen.getByRole("button", { name: /click me/i })
    ).toBeInTheDocument();
  });

  test("calls onClick when clicked", () => {
    const handleClick = jest.fn();
    render(<Button onClick={handleClick}>Click me</Button>);

    fireEvent.click(screen.getByRole("button"));
    expect(handleClick).toHaveBeenCalledTimes(1);
  });

  test("is disabled when disabled prop is true", () => {
    render(<Button disabled>Click me</Button>);
    expect(screen.getByRole("button")).toBeDisabled();
  });

  test("has proper accessibility attributes", () => {
    render(<Button aria-label="Submit form">Submit</Button>);
    expect(screen.getByLabelText("Submit form")).toBeInTheDocument();
  });
});

// Testing async components
describe("AsyncComponent", () => {
  test("shows loading state initially", () => {
    render(<AsyncComponent />);
    expect(screen.getByText(/loading/i)).toBeInTheDocument();
  });

  test("shows data after successful fetch", async () => {
    render(<AsyncComponent />);

    await waitFor(() => {
      expect(screen.getByText(/data loaded/i)).toBeInTheDocument();
    });
  });

  test("shows error on fetch failure", async () => {
    // Mock fetch to fail
    global.fetch = jest.fn(() => Promise.reject("API Error"));

    render(<AsyncComponent />);

    await waitFor(() => {
      expect(screen.getByText(/error/i)).toBeInTheDocument();
    });
  });
});
```

---

## 13. Responsive Dashboard Layout

**Question:** How would you create a responsive dashboard layout with sidebar, header, and main content?

### English

- Use CSS Grid for the main layout structure.
- Implement a collapsible sidebar using CSS transforms.
- Use Flexbox for header and sidebar content.
- Add media queries for mobile responsiveness.
- Ensure proper ARIA roles for navigation.
- Implement smooth transitions and animations.

### Vietnamese

- S·ª≠ d·ª•ng CSS Grid cho layout ch√≠nh.
- Implement sidebar c√≥ th·ªÉ thu g·ªçn b·∫±ng CSS transforms.
- D√πng Flexbox cho header v√† n·ªôi dung sidebar.
- Th√™m media queries cho responsive mobile.
- ƒê·∫£m b·∫£o ARIA roles ph√π h·ª£p cho navigation.
- Implement transitions v√† animations m∆∞·ª£t m√†.

#### Sample Implementation:

```html
<div class="dashboard">
  <header class="dashboard-header">
    <button class="sidebar-toggle" aria-label="Toggle sidebar">‚ò∞</button>
    <h1>Dashboard</h1>
    <nav class="header-nav">
      <a href="/profile">Profile</a>
      <a href="/settings">Settings</a>
    </nav>
  </header>

  <aside class="dashboard-sidebar" role="navigation">
    <nav>
      <a href="/dashboard" aria-current="page">Dashboard</a>
      <a href="/analytics">Analytics</a>
      <a href="/reports">Reports</a>
    </nav>
  </aside>

  <main class="dashboard-main" role="main">
    <div class="content">
      <!-- Dashboard content -->
    </div>
  </main>
</div>
```

```css
.dashboard {
  display: grid;
  grid-template-areas:
    "header header"
    "sidebar main";
  grid-template-columns: 250px 1fr;
  grid-template-rows: 60px 1fr;
  height: 100vh;
}

.dashboard-header {
  grid-area: header;
  display: flex;
  align-items: center;
  padding: 0 20px;
  background: #fff;
  border-bottom: 1px solid #eee;
}

.dashboard-sidebar {
  grid-area: sidebar;
  background: #f8f9fa;
  padding: 20px;
  transition: transform 0.3s ease;
}

.dashboard-main {
  grid-area: main;
  padding: 20px;
  overflow-y: auto;
}

@media (max-width: 768px) {
  .dashboard {
    grid-template-areas:
      "header"
      "main";
    grid-template-columns: 1fr;
  }

  .dashboard-sidebar {
    position: fixed;
    left: -250px;
    top: 60px;
    height: calc(100vh - 60px);
    z-index: 1000;
  }

  .dashboard-sidebar.open {
    transform: translateX(250px);
  }
}
```

#### Diagram: Dashboard Layout Structure

```mermaid
graph TD
  A[Dashboard Container] --> B[Header]
  A --> C[Sidebar]
  A --> D[Main Content]
  B --> E[Logo/Title]
  B --> F[User Menu]
  C --> G[Navigation Links]
  D --> H[Widgets/Content]
  D --> I[Charts/Data]
```

---

## 14. Undo/Redo Functionality

**Question:** How would you implement undo and redo functionality for a text editor or form?

### English

- Use two stacks: one for undo history and one for redo history.
- Push current state to undo stack before each action.
- Clear redo stack when a new action is performed.
- Implement keyboard shortcuts (Ctrl+Z, Ctrl+Y).
- Provide visual feedback for undo/redo availability.
- Handle complex objects and deep cloning.

### Vietnamese

- S·ª≠ d·ª•ng hai stack: m·ªôt cho undo history v√† m·ªôt cho redo history.
- Push state hi·ªán t·∫°i v√†o undo stack tr∆∞·ªõc m·ªói action.
- Clear redo stack khi c√≥ action m·ªõi.
- Implement keyboard shortcuts (Ctrl+Z, Ctrl+Y).
- Cung c·∫•p feedback tr·ª±c quan cho undo/redo.
- X·ª≠ l√Ω complex objects v√† deep cloning.

#### Sample Implementation:

```javascript
class UndoRedoManager {
  constructor() {
    this.undoStack = [];
    this.redoStack = [];
    this.maxHistory = 50;
  }

  saveState(state) {
    // Clear redo stack when new action is performed
    this.redoStack = [];

    // Add current state to undo stack
    this.undoStack.push(JSON.parse(JSON.stringify(state)));

    // Limit history size
    if (this.undoStack.length > this.maxHistory) {
      this.undoStack.shift();
    }
  }

  undo() {
    if (this.undoStack.length === 0) return null;

    const currentState = this.undoStack.pop();
    this.redoStack.push(currentState);

    return this.undoStack[this.undoStack.length - 1] || null;
  }

  redo() {
    if (this.redoStack.length === 0) return null;

    const state = this.redoStack.pop();
    this.undoStack.push(state);

    return state;
  }

  canUndo() {
    return this.undoStack.length > 0;
  }

  canRedo() {
    return this.redoStack.length > 0;
  }
}

// React Hook for Undo/Redo
function useUndoRedo(initialState) {
  const [state, setState] = useState(initialState);
  const undoRedoRef = useRef(new UndoRedoManager());

  const undoRedo = undoRedoRef.current;

  const updateState = useCallback(
    (newState) => {
      undoRedo.saveState(state);
      setState(newState);
    },
    [state]
  );

  const undo = useCallback(() => {
    const previousState = undoRedo.undo();
    if (previousState !== null) {
      setState(previousState);
    }
  }, []);

  const redo = useCallback(() => {
    const nextState = undoRedo.redo();
    if (nextState !== null) {
      setState(nextState);
    }
  }, []);

  return {
    state,
    updateState,
    undo,
    redo,
    canUndo: undoRedo.canUndo(),
    canRedo: undoRedo.canRedo(),
  };
}
```

#### Diagram: Undo/Redo Flow

```mermaid
flowchart LR
  A[State A] --> B[Action 1]
  B --> C[State B]
  C --> D[Action 2]
  D --> E[State C]
  E --> F[Undo]
  F --> C
  C --> G[Redo]
  G --> E
```

---

## 15. Custom React Hook

**Question:** How would you write a custom React hook for debounced value or localStorage sync?

### English

- Use useEffect, useState, and useRef for state management.
- Implement proper cleanup in useEffect.
- Handle SSR and non-browser environments.
- Provide clear API and error handling.
- Consider performance implications and memoization.

### Vietnamese

- S·ª≠ d·ª•ng useEffect, useState, v√† useRef ƒë·ªÉ qu·∫£n l√Ω state.
- Implement cleanup ph√π h·ª£p trong useEffect.
- X·ª≠ l√Ω SSR v√† m√¥i tr∆∞·ªùng kh√¥ng c√≥ browser.
- Cung c·∫•p API r√µ r√†ng v√† x·ª≠ l√Ω l·ªói.
- C√¢n nh·∫Øc performance v√† memoization.

#### Sample Implementation:

```javascript
// useDebounce Hook
function useDebounce(value, delay) {
  const [debouncedValue, setDebouncedValue] = useState(value);

  useEffect(() => {
    const handler = setTimeout(() => {
      setDebouncedValue(value);
    }, delay);

    return () => {
      clearTimeout(handler);
    };
  }, [value, delay]);

  return debouncedValue;
}

// useLocalStorage Hook
function useLocalStorage(key, initialValue) {
  const [storedValue, setStoredValue] = useState(() => {
    try {
      if (typeof window === "undefined") {
        return initialValue;
      }

      const item = window.localStorage.getItem(key);
      return item ? JSON.parse(item) : initialValue;
    } catch (error) {
      console.error(`Error reading localStorage key "${key}":`, error);
      return initialValue;
    }
  });

  const setValue = useCallback(
    (value) => {
      try {
        const valueToStore =
          value instanceof Function ? value(storedValue) : value;
        setStoredValue(valueToStore);

        if (typeof window !== "undefined") {
          window.localStorage.setItem(key, JSON.stringify(valueToStore));
        }
      } catch (error) {
        console.error(`Error setting localStorage key "${key}":`, error);
      }
    },
    [key, storedValue]
  );

  return [storedValue, setValue];
}

// useAsync Hook
function useAsync(asyncFunction, immediate = true) {
  const [status, setStatus] = useState("idle");
  const [data, setData] = useState(null);
  const [error, setError] = useState(null);

  const execute = useCallback(
    async (...args) => {
      setStatus("pending");
      setData(null);
      setError(null);

      try {
        const response = await asyncFunction(...args);
        setData(response);
        setStatus("success");
      } catch (err) {
        setError(err);
        setStatus("error");
      }
    },
    [asyncFunction]
  );

  useEffect(() => {
    if (immediate) {
      execute();
    }
  }, [execute, immediate]);

  return { execute, status, data, error };
}

// Usage Examples
function SearchComponent() {
  const [searchTerm, setSearchTerm] = useState("");
  const debouncedSearchTerm = useDebounce(searchTerm, 500);

  const { data: searchResults, status } = useAsync(
    () => searchAPI(debouncedSearchTerm),
    false
  );

  useEffect(() => {
    if (debouncedSearchTerm) {
      searchAPI(debouncedSearchTerm);
    }
  }, [debouncedSearchTerm]);

  return (
    <div>
      <input
        value={searchTerm}
        onChange={(e) => setSearchTerm(e.target.value)}
        placeholder="Search..."
      />
      {status === "pending" && <div>Searching...</div>}
      {status === "success" && (
        <ul>
          {searchResults.map((item) => (
            <li key={item.id}>{item.name}</li>
          ))}
        </ul>
      )}
    </div>
  );
}
```

#### Diagram: Custom Hook Lifecycle

```mermaid
flowchart TD
  A[Hook Initialization] --> B[Setup State]
  B --> C[Setup Effects]
  C --> D[Return Values/Functions]
  D --> E[Component Uses Hook]
  E --> F[State Changes]
  F --> G[Effects Re-run]
  G --> H[Cleanup]
  H --> I[New State]
  I --> E
```

---

## 16. TypeScript Advanced Patterns

**Question:** How would you create advanced TypeScript utility types and type-safe patterns?

### English

- Create utility types for common transformations.
- Implement type-safe event systems.
- Use conditional types and mapped types.
- Build generic components with proper constraints.
- Ensure type safety across API boundaries.
- Use branded types for domain modeling.

### Vietnamese

- T·∫°o utility types cho c√°c bi·∫øn ƒë·ªïi ph·ªï bi·∫øn.
- Implement h·ªá th·ªëng event type-safe.
- S·ª≠ d·ª•ng conditional types v√† mapped types.
- X√¢y d·ª±ng generic components v·ªõi constraints ph√π h·ª£p.
- ƒê·∫£m b·∫£o type safety qua API boundaries.
- S·ª≠ d·ª•ng branded types cho domain modeling.

#### Advanced TypeScript Examples:

```typescript
// Utility Types
type DeepReadonly<T> = {
  readonly [P in keyof T]: T[P] extends object
    ? T[P] extends Function
      ? T[P]
      : DeepReadonly<T[P]>
    : T[P];
};

type DeepPartial<T> = {
  [P in keyof T]?: T[P] extends object
    ? T[P] extends Function
      ? T[P]
      : DeepPartial<T[P]>
    : T[P];
};

// Type-safe Event System
type EventMap = {
  "user:login": { userId: string; timestamp: Date };
  "user:logout": { userId: string };
  "data:update": { data: any; version: number };
};

class EventEmitter<T extends Record<string, any>> {
  private listeners: Map<keyof T, Set<(data: any) => void>> = new Map();

  on<K extends keyof T>(event: K, listener: (data: T[K]) => void): void {
    if (!this.listeners.has(event)) {
      this.listeners.set(event, new Set());
    }
    this.listeners.get(event)!.add(listener);
  }

  emit<K extends keyof T>(event: K, data: T[K]): void {
    const listeners = this.listeners.get(event);
    if (listeners) {
      listeners.forEach((listener) => listener(data));
    }
  }
}

// Branded Types
type UserId = string & { readonly brand: unique symbol };
type Email = string & { readonly brand: unique symbol };

function createUserId(id: string): UserId {
  return id as UserId;
}

function createEmail(email: string): Email {
  if (!email.includes("@")) {
    throw new Error("Invalid email");
  }
  return email as Email;
}

// Generic Components
interface TableProps<T> {
  data: T[];
  columns: Column<T>[];
  onRowClick?: (item: T) => void;
}

interface Column<T> {
  key: keyof T;
  title: string;
  render?: (value: T[keyof T], item: T) => React.ReactNode;
}

function Table<T extends Record<string, any>>({
  data,
  columns,
  onRowClick,
}: TableProps<T>) {
  return (
    <table>
      <thead>
        <tr>
          {columns.map((column) => (
            <th key={String(column.key)}>{column.title}</th>
          ))}
        </tr>
      </thead>
      <tbody>
        {data.map((item, index) => (
          <tr key={index} onClick={() => onRowClick?.(item)}>
            {columns.map((column) => (
              <td key={String(column.key)}>
                {column.render
                  ? column.render(item[column.key], item)
                  : String(item[column.key])}
              </td>
            ))}
          </tr>
        ))}
      </tbody>
    </table>
  );
}
```

#### Diagram: TypeScript Type System

```mermaid
graph TD
  A[Base Types] --> B[Union Types]
  A --> C[Intersection Types]
  B --> D[Conditional Types]
  C --> D
  D --> E[Utility Types]
  E --> F[Generic Types]
  F --> G[Type Constraints]
  G --> H[Branded Types]
```

---

# (Add more Q&A here as you discover more missing answers)
5:["slug","src/content/frontend/coding-problems/missing-answers","c"]
0:["7uJ7BVaXJTiEOD9iYDv3n",[[["",{"children":["docs",{"children":[["slug","src/content/frontend/coding-problems/missing-answers","c"],{"children":["__PAGE__?{\"slug\":[\"src\",\"content\",\"frontend\",\"coding-problems\",\"missing-answers\"]}",{}]}]}]},"$undefined","$undefined",true],["",{"children":["docs",{"children":[["slug","src/content/frontend/coding-problems/missing-answers","c"],{"children":["__PAGE__",{},[["$L1",["$","div",null,{"style":{"maxWidth":"1200px","margin":"0 auto","padding":"2rem","paddingTop":"6rem"},"children":[["$","div",null,{"style":{"marginBottom":"2rem"},"children":[["$","nav",null,{"style":{"color":"#64748b","fontSize":"0.9rem","marginBottom":"1rem"},"children":[["$","a",null,{"href":"/","style":{"color":"#3b82f6","textDecoration":"none"},"children":"Home"}]," > ",["$","span",null,{"children":"src > content > frontend > coding-problems > missing-answers"}]]}],["$","h1",null,{"style":{"fontSize":"2.5rem","fontWeight":"800","marginBottom":"0.5rem","color":"#1e293b"},"children":"Missing Answers"}],["$","div",null,{"style":{"color":"#64748b","fontSize":"0.9rem","marginBottom":"2rem"},"children":[["$","span",null,{"children":["üìÅ ","src/content/frontend/coding-problems/missing-answers.md"]}],"$undefined","$undefined"]}]]}],["$","$L2",null,{"content":"$3"}]]}],null],null],null]},[null,["$","$L4",null,{"parallelRouterKey":"children","segmentPath":["children","docs","children","$5","children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L6",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined"}]],null]},[null,["$","$L4",null,{"parallelRouterKey":"children","segmentPath":["children","docs","children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L6",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined"}]],null]},[[[["$","link","0",{"rel":"stylesheet","href":"/interview/_next/static/css/387024c6a2216908.css","precedence":"next","crossOrigin":"$undefined"}]],["$","$L7",null,{"children":["$","$L4",null,{"parallelRouterKey":"children","segmentPath":["children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L6",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":[["$","title",null,{"children":"404: This page could not be found."}],["$","div",null,{"style":{"fontFamily":"system-ui,\"Segoe UI\",Roboto,Helvetica,Arial,sans-serif,\"Apple Color Emoji\",\"Segoe UI Emoji\"","height":"100vh","textAlign":"center","display":"flex","flexDirection":"column","alignItems":"center","justifyContent":"center"},"children":["$","div",null,{"children":[["$","style",null,{"dangerouslySetInnerHTML":{"__html":"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}"}}],["$","h1",null,{"className":"next-error-h1","style":{"display":"inline-block","margin":"0 20px 0 0","padding":"0 23px 0 0","fontSize":24,"fontWeight":500,"verticalAlign":"top","lineHeight":"49px"},"children":"404"}],["$","div",null,{"style":{"display":"inline-block"},"children":["$","h2",null,{"style":{"fontSize":14,"fontWeight":400,"lineHeight":"49px","margin":0},"children":"This page could not be found."}]}]]}]}]],"notFoundStyles":[]}],"params":{}}]],null],null],["$L8",null]]]]
8:[["$","meta","0",{"name":"viewport","content":"width=device-width, initial-scale=1"}],["$","meta","1",{"charSet":"utf-8"}],["$","title","2",{"children":"Missing Answers - Frontend Interview Docs"}],["$","meta","3",{"name":"description","content":"# Missing Answers for Coding & System Design Problems  ---  ## 1. Editable Table Cells  **Question:** How would you allow users to edit table cells inline and s"}],["$","meta","4",{"property":"og:title","content":"Missing Answers - Frontend Interview Docs"}],["$","meta","5",{"property":"og:description","content":"# Missing Answers for Coding & System Design Problems  ---  ## 1. Editable Table Cells  **Question:** How would you allow users to edit table cells inline and s"}],["$","meta","6",{"property":"og:type","content":"article"}],["$","meta","7",{"name":"twitter:card","content":"summary"}],["$","meta","8",{"name":"twitter:title","content":"Missing Answers - Frontend Interview Docs"}],["$","meta","9",{"name":"twitter:description","content":"# Missing Answers for Coding & System Design Problems  ---  ## 1. Editable Table Cells  **Question:** How would you allow users to edit table cells inline and s"}],["$","meta","10",{"name":"next-size-adjust"}]]
1:null
