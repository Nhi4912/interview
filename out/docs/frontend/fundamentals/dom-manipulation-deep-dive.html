<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" href="/interview/_next/static/media/e4af272ccee01ff0-s.p.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="stylesheet" href="/interview/_next/static/css/387024c6a2216908.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/interview/_next/static/chunks/webpack-be7d7df45533bffc.js"/><script src="/interview/_next/static/chunks/fd9d1056-6922f449a204c2cc.js" async=""></script><script src="/interview/_next/static/chunks/117-e7ecc085ce9cfab3.js" async=""></script><script src="/interview/_next/static/chunks/main-app-b06be5f3411c20c3.js" async=""></script><script src="/interview/_next/static/chunks/918-3273b83890f10546.js" async=""></script><script src="/interview/_next/static/chunks/930-3262a6c9c5acace4.js" async=""></script><script src="/interview/_next/static/chunks/app/docs/%5B...slug%5D/page-32962e9542d32755.js" async=""></script><script src="/interview/_next/static/chunks/710-dfaa11b4dff08f8e.js" async=""></script><script src="/interview/_next/static/chunks/972-011bba60ed155615.js" async=""></script><script src="/interview/_next/static/chunks/233-3e0c1d820a17eca9.js" async=""></script><script src="/interview/_next/static/chunks/app/layout-333f4adcd11f8f39.js" async=""></script><title>Frontend Interview Prep 2025 - Big Tech Interview Guide</title><meta name="description" content="Comprehensive frontend interview preparation for Big Tech companies including React, TypeScript, algorithms, and system design."/><link rel="icon" href="/favicon.ico"/><meta name="theme-color" content="#1a1a1a"/><meta property="og:title" content="Frontend Interview Prep 2025"/><meta property="og:description" content="Complete guide for frontend engineers targeting Big Tech companies"/><meta property="og:type" content="website"/><link rel="preconnect" href="https://fonts.googleapis.com"/><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"/><title>Dom Manipulation Deep Dive - Frontend Interview Docs</title><meta name="description" content="# DOM Manipulation: Complete Deep Dive  ## Table of Contents  - [Understanding the DOM](#understanding-the-dom) - [DOM Tree Structure](#dom-tree-structure) - [E"/><meta property="og:title" content="Dom Manipulation Deep Dive - Frontend Interview Docs"/><meta property="og:description" content="# DOM Manipulation: Complete Deep Dive  ## Table of Contents  - [Understanding the DOM](#understanding-the-dom) - [DOM Tree Structure](#dom-tree-structure) - [E"/><meta property="og:type" content="article"/><meta name="twitter:card" content="summary"/><meta name="twitter:title" content="Dom Manipulation Deep Dive - Frontend Interview Docs"/><meta name="twitter:description" content="# DOM Manipulation: Complete Deep Dive  ## Table of Contents  - [Understanding the DOM](#understanding-the-dom) - [DOM Tree Structure](#dom-tree-structure) - [E"/><meta name="next-size-adjust"/><script src="/interview/_next/static/chunks/polyfills-42372ed130431b0a.js" noModule=""></script><style data-styled="" data-styled-version="6.1.19">*{margin:0;padding:0;box-sizing:border-box;}/*!sc*/
html{font-size:16px;line-height:1.5;scroll-behavior:smooth;}/*!sc*/
body{font-family:Inter,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,sans-serif;font-size:1rem;line-height:1.5;color:#1e293b;background-color:#ffffff;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;}/*!sc*/
h1,h2,h3,h4,h5,h6{font-weight:700;line-height:1.25;margin-bottom:0.5em;}/*!sc*/
h1{font-size:3rem;}/*!sc*/
@media (max-width: 768px){h1{font-size:2.25rem;}}/*!sc*/
h2{font-size:2.25rem;}/*!sc*/
@media (max-width: 768px){h2{font-size:1.875rem;}}/*!sc*/
h3{font-size:1.875rem;}/*!sc*/
@media (max-width: 768px){h3{font-size:1.5rem;}}/*!sc*/
h4{font-size:1.5rem;}/*!sc*/
@media (max-width: 768px){h4{font-size:1.25rem;}}/*!sc*/
h5{font-size:1.25rem;}/*!sc*/
h6{font-size:1.125rem;}/*!sc*/
p{margin-bottom:1rem;line-height:1.75;}/*!sc*/
a{color:#3b82f6;text-decoration:none;transition:color 0.15s ease;}/*!sc*/
a:hover{color:#2563eb;}/*!sc*/
a:focus{outline:2px solid #3b82f6;outline-offset:2px;}/*!sc*/
button{cursor:pointer;border:none;background:none;font-family:inherit;font-size:inherit;}/*!sc*/
button:disabled{cursor:not-allowed;opacity:0.6;}/*!sc*/
button:focus{outline:2px solid #3b82f6;outline-offset:2px;}/*!sc*/
input,textarea,select{font-family:inherit;font-size:inherit;}/*!sc*/
input:focus,textarea:focus,select:focus{outline:2px solid #3b82f6;outline-offset:2px;}/*!sc*/
img{max-width:100%;height:auto;}/*!sc*/
ul,ol{margin-bottom:1rem;padding-left:1.5rem;}/*!sc*/
li{margin-bottom:0.25rem;}/*!sc*/
blockquote{margin:1rem 0;padding:1rem;border-left:4px solid #3b82f6;background-color:#f1f5f9;font-style:italic;}/*!sc*/
code{font-family:SFMono-Regular,Consolas,"Liberation Mono",Menlo,monospace;font-size:0.9em;background-color:#f1f5f9;padding:0.2em 0.4em;border-radius:0.25rem;}/*!sc*/
pre{background-color:#f1f5f9;padding:1rem;border-radius:0.5rem;overflow-x:auto;margin-bottom:1rem;}/*!sc*/
pre code{background:none;padding:0;}/*!sc*/
table{width:100%;border-collapse:collapse;margin-bottom:1rem;}/*!sc*/
th,td{padding:0.75rem;text-align:left;border-bottom:1px solid #e2e8f0;}/*!sc*/
th{font-weight:600;background-color:#f1f5f9;}/*!sc*/
.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0;}/*!sc*/
.skip-link{position:absolute;top:-40px;left:6px;background:#3b82f6;color:white;padding:8px;text-decoration:none;border-radius:4px;z-index:100;}/*!sc*/
.skip-link:focus{top:6px;}/*!sc*/
::-webkit-scrollbar{width:8px;height:8px;}/*!sc*/
::-webkit-scrollbar-track{background:#f1f5f9;}/*!sc*/
::-webkit-scrollbar-thumb{background:#94a3b8;border-radius:4px;}/*!sc*/
::-webkit-scrollbar-thumb:hover{background:#64748b;}/*!sc*/
::selection{background:#3b82f6;color:white;}/*!sc*/
.focus-visible{outline:2px solid #3b82f6;outline-offset:2px;}/*!sc*/
.fade-in{opacity:0;animation:fadeIn 0.3s ease forwards;}/*!sc*/
.slide-up{transform:translateY(20px);opacity:0;animation:slideUp 0.3s ease forwards;}/*!sc*/
@keyframes fadeIn{to{opacity:1;}}/*!sc*/
@keyframes slideUp{to{transform:translateY(0);opacity:1;}}/*!sc*/
@media print{*{background:white!important;color:black!important;box-shadow:none!important;text-shadow:none!important;}a,a:visited{text-decoration:underline;}h1,h2,h3,h4,h5,h6{break-after:avoid;}pre,blockquote{border:1px solid #999;break-inside:avoid;}img{max-width:100%!important;}@page{margin:0.5in;}}/*!sc*/
data-styled.g19[id="sc-global-kxA-Ddz1"]{content:"sc-global-kxA-Ddz1,"}/*!sc*/
.hNPaTO{position:fixed;top:0;width:100%;z-index:1020;background:transparent;backdrop-filter:blur(10px);border-bottom:1px solid transparent;transition:all 0.3s ease;}/*!sc*/
data-styled.g20[id="sc-dNdcvo"]{content:"hNPaTO,"}/*!sc*/
.jJxjWc{max-width:1200px;margin:0 auto;padding:0 2rem;display:flex;align-items:center;justify-content:space-between;height:70px;}/*!sc*/
data-styled.g21[id="sc-fbQrwq"]{content:"jJxjWc,"}/*!sc*/
.jwmRwa{display:flex;align-items:center;gap:0.5rem;font-size:1.5rem;font-weight:700;color:#3b82f6;text-decoration:none;cursor:pointer;}/*!sc*/
.jwmRwa:hover{color:#2563eb;}/*!sc*/
data-styled.g22[id="sc-gGKoUb"]{content:"jwmRwa,"}/*!sc*/
.KQdZw{display:flex;align-items:center;gap:2rem;}/*!sc*/
@media (max-width: 768px){.KQdZw{display:none;}}/*!sc*/
data-styled.g23[id="sc-hwddKA"]{content:"KQdZw,"}/*!sc*/
.ETszJ{color:#1e293b;font-weight:500;text-decoration:none;transition:color 0.15s ease;position:relative;}/*!sc*/
.ETszJ:hover{color:#3b82f6;}/*!sc*/
.ETszJ:after{content:'';position:absolute;bottom:-5px;left:0;width:0;height:2px;background:#3b82f6;transition:width 0.15s ease;}/*!sc*/
.ETszJ:hover:after{width:100%;}/*!sc*/
data-styled.g24[id="sc-jaXbil"]{content:"ETszJ,"}/*!sc*/
.foClcg{display:none;background:none;border:none;color:#1e293b;cursor:pointer;padding:0.5rem;}/*!sc*/
@media (max-width: 768px){.foClcg{display:block;}}/*!sc*/
data-styled.g25[id="sc-eqNDNG"]{content:"foClcg,"}/*!sc*/
.kBjfBo{display:flex;align-items:center;gap:0.5rem;background:#f1f5f9;border:1px solid #e2e8f0;border-radius:0.5rem;padding:0.5rem 1rem;color:#64748b;font-size:0.9rem;transition:all 0.15s ease;}/*!sc*/
.kBjfBo:hover{background:#ffffff;border-color:#3b82f6;}/*!sc*/
data-styled.g29[id="sc-eQwNpu"]{content:"kBjfBo,"}/*!sc*/
.booJNS{background:#1e293b;color:white;padding:3rem 0 1rem;margin-top:auto;}/*!sc*/
data-styled.g30[id="sc-gvqKNf"]{content:"booJNS,"}/*!sc*/
.fVoYcP{max-width:1200px;margin:0 auto;padding:0 2rem;}/*!sc*/
data-styled.g31[id="sc-cOpnSz"]{content:"fVoYcP,"}/*!sc*/
.kKfrkv{display:grid;grid-template-columns:1fr 1fr 1fr 1fr;gap:2rem;margin-bottom:2rem;}/*!sc*/
@media (max-width: 768px){.kKfrkv{grid-template-columns:1fr 1fr;gap:1.5rem;}}/*!sc*/
@media (max-width: 480px){.kKfrkv{grid-template-columns:1fr;}}/*!sc*/
data-styled.g32[id="sc-kjwdDK"]{content:"kKfrkv,"}/*!sc*/
.inEXDm h3{font-size:1.1rem;font-weight:600;margin-bottom:1rem;color:white;}/*!sc*/
.inEXDm ul{list-style:none;padding:0;margin:0;}/*!sc*/
.inEXDm li{margin-bottom:0.5rem;}/*!sc*/
.inEXDm a{color:rgba(255, 255, 255, 0.7);text-decoration:none;transition:color 0.15s ease;}/*!sc*/
.inEXDm a:hover{color:white;}/*!sc*/
data-styled.g33[id="sc-eVqvcJ"]{content:"inEXDm,"}/*!sc*/
.hWhopJ{display:flex;align-items:center;gap:0.5rem;font-size:1.2rem;font-weight:700;margin-bottom:1rem;color:white;}/*!sc*/
data-styled.g34[id="sc-bbbBoY"]{content:"hWhopJ,"}/*!sc*/
.exeTne{color:rgba(255, 255, 255, 0.7);line-height:1.6;margin-bottom:1rem;}/*!sc*/
data-styled.g35[id="sc-cdmAjP"]{content:"exeTne,"}/*!sc*/
.cgXMuV{display:flex;gap:1rem;}/*!sc*/
.cgXMuV a{display:flex;align-items:center;justify-content:center;width:40px;height:40px;background:rgba(255, 255, 255, 0.1);border-radius:0.5rem;color:rgba(255, 255, 255, 0.7);transition:all 0.15s ease;}/*!sc*/
.cgXMuV a:hover{background:rgba(255, 255, 255, 0.2);color:white;}/*!sc*/
data-styled.g36[id="sc-jytpVa"]{content:"cgXMuV,"}/*!sc*/
.iQqwrD{border-top:1px solid rgba(255, 255, 255, 0.1);padding-top:2rem;display:flex;justify-content:space-between;align-items:center;}/*!sc*/
@media (max-width: 768px){.iQqwrD{flex-direction:column;gap:1rem;text-align:center;}}/*!sc*/
data-styled.g37[id="sc-eknHtZ"]{content:"iQqwrD,"}/*!sc*/
.gObJRG{color:rgba(255, 255, 255, 0.7);margin:0;font-size:0.9rem;}/*!sc*/
data-styled.g38[id="sc-pYNGo"]{content:"gObJRG,"}/*!sc*/
.eBqBtc{display:flex;gap:2rem;}/*!sc*/
@media (max-width: 480px){.eBqBtc{flex-direction:column;gap:1rem;}}/*!sc*/
.eBqBtc a{color:rgba(255, 255, 255, 0.7);text-decoration:none;font-size:0.9rem;transition:color 0.15s ease;}/*!sc*/
.eBqBtc a:hover{color:white;}/*!sc*/
data-styled.g39[id="sc-cCVJLD"]{content:"eBqBtc,"}/*!sc*/
.kmsQDA{color:#1e293b;line-height:1.6;}/*!sc*/
.kmsQDA h1,.kmsQDA h2,.kmsQDA h3,.kmsQDA h4,.kmsQDA h5,.kmsQDA h6{color:#1e293b;margin-top:2rem;margin-bottom:1rem;font-weight:600;}/*!sc*/
.kmsQDA h1{font-size:2rem;border-bottom:2px solid #e2e8f0;padding-bottom:0.5rem;}/*!sc*/
.kmsQDA h2{font-size:1.5rem;border-bottom:1px solid #e2e8f0;padding-bottom:0.3rem;}/*!sc*/
.kmsQDA h3{font-size:1.25rem;}/*!sc*/
.kmsQDA h4{font-size:1.1rem;}/*!sc*/
.kmsQDA p{margin-bottom:1rem;color:#64748b;}/*!sc*/
.kmsQDA a{color:#3b82f6;text-decoration:none;}/*!sc*/
.kmsQDA a:hover{text-decoration:underline;}/*!sc*/
.kmsQDA ul,.kmsQDA ol{margin-bottom:1rem;padding-left:1.5rem;}/*!sc*/
.kmsQDA ul li,.kmsQDA ol li{margin-bottom:0.5rem;color:#64748b;}/*!sc*/
.kmsQDA blockquote{border-left:4px solid #3b82f6;padding-left:1rem;margin:1rem 0;font-style:italic;color:#64748b;background:#f1f5f9;padding:1rem;border-radius:0.5rem;}/*!sc*/
.kmsQDA code{background:#f1f5f9;padding:0.2rem 0.4rem;border-radius:0.25rem;font-family:SFMono-Regular,Consolas,"Liberation Mono",Menlo,monospace;font-size:0.9em;color:#f59e0b;}/*!sc*/
.kmsQDA pre{background:#ffffff;border:1px solid #e2e8f0;border-radius:0.5rem;padding:1rem;margin:1rem 0;overflow-x:auto;}/*!sc*/
.kmsQDA pre code{background:none;padding:0;color:#1e293b;font-size:0.9rem;}/*!sc*/
.kmsQDA table{width:100%;border-collapse:collapse;margin:1rem 0;}/*!sc*/
.kmsQDA table th,.kmsQDA table td{border:1px solid #e2e8f0;padding:0.5rem;text-align:left;}/*!sc*/
.kmsQDA table th{background:#ffffff;font-weight:600;}/*!sc*/
.kmsQDA table tr:nth-child(even){background:#f1f5f9;}/*!sc*/
.kmsQDA hr{border:none;height:1px;background:#e2e8f0;margin:2rem 0;}/*!sc*/
.kmsQDA .highlight{background:#3b82f620;padding:0.2rem 0.4rem;border-radius:0.25rem;font-weight:600;}/*!sc*/
.kmsQDA .hljs{background:#ffffff;color:#1e293b;}/*!sc*/
.kmsQDA .hljs-keyword{color:#3b82f6;font-weight:600;}/*!sc*/
.kmsQDA .hljs-string{color:#10b981;}/*!sc*/
.kmsQDA .hljs-function{color:#f59e0b;}/*!sc*/
.kmsQDA .hljs-comment{color:#94a3b8;font-style:italic;}/*!sc*/
.kmsQDA .hljs-number{color:#f59e0b;}/*!sc*/
.kmsQDA .hljs-variable{color:#1e293b;}/*!sc*/
.kmsQDA .hljs-title{color:#f59e0b;font-weight:600;}/*!sc*/
data-styled.g40[id="sc-jYczwO"]{content:"kmsQDA,"}/*!sc*/
</style></head><body class="__className_6eac61"><div style="min-height:100vh;display:flex;flex-direction:column"><nav class="sc-dNdcvo hNPaTO"><div class="sc-fbQrwq jJxjWc"><a href="/interview"><a class="sc-gGKoUb jwmRwa"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-code "><polyline points="16 18 22 12 16 6"></polyline><polyline points="8 6 2 12 8 18"></polyline></svg>Frontend Interview Prep</a></a><div class="sc-hwddKA KQdZw"><a href="/interview/problems"><a class="sc-jaXbil ETszJ">Problems</a></a><a href="/interview/learn"><a class="sc-jaXbil ETszJ">Learn</a></a><a href="/interview/study-guide"><a class="sc-jaXbil ETszJ">Study Guide</a></a><a href="/interview/system-design"><a class="sc-jaXbil ETszJ">System Design</a></a><a href="/interview/performance"><a class="sc-jaXbil ETszJ">Performance</a></a><a href="/interview/accessibility"><a class="sc-jaXbil ETszJ">Accessibility</a></a><a href="/interview/interview-tips"><a class="sc-jaXbil ETszJ">Interview Tips</a></a><button class="sc-eQwNpu kBjfBo"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-search "><circle cx="11" cy="11" r="8"></circle><path d="m21 21-4.3-4.3"></path></svg>Search</button></div><button class="sc-eqNDNG foClcg"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-menu "><line x1="4" x2="20" y1="12" y2="12"></line><line x1="4" x2="20" y1="6" y2="6"></line><line x1="4" x2="20" y1="18" y2="18"></line></svg></button></div></nav><main style="flex:1"><div style="max-width:1200px;margin:0 auto;padding:2rem;padding-top:6rem"><div style="margin-bottom:2rem"><nav style="color:#64748b;font-size:0.9rem;margin-bottom:1rem"><a href="/" style="color:#3b82f6;text-decoration:none">Home</a> &gt; <span>frontend &gt; fundamentals &gt; dom-manipulation-deep-dive</span></nav><h1 style="font-size:2.5rem;font-weight:800;margin-bottom:0.5rem;color:#1e293b">Dom Manipulation Deep Dive</h1><div style="color:#64748b;font-size:0.9rem;margin-bottom:2rem"><span>📁 <!-- -->frontend/fundamentals/dom-manipulation-deep-dive.md</span></div></div><div class="sc-jYczwO kmsQDA"><h1 id="dom-manipulation:-complete-deep-dive" node="[object Object]">DOM Manipulation: Complete Deep Dive</h1>
<h2 id="table-of-contents" node="[object Object]">Table of Contents</h2>
<ul>
<li><a href="#understanding-the-dom" node="[object Object]">Understanding the DOM</a></li>
<li><a href="#dom-tree-structure" node="[object Object]">DOM Tree Structure</a></li>
<li><a href="#element-selection-methods" node="[object Object]">Element Selection Methods</a></li>
<li><a href="#creating-and-modifying-elements" node="[object Object]">Creating and Modifying Elements</a></li>
<li><a href="#event-system-deep-dive" node="[object Object]">Event System Deep Dive</a></li>
<li><a href="#performance-optimization" node="[object Object]">Performance Optimization</a></li>
<li><a href="#modern-dom-apis" node="[object Object]">Modern DOM APIs</a></li>
<li><a href="#visual-diagrams" node="[object Object]">Visual Diagrams</a></li>
<li><a href="#best-practices" node="[object Object]">Best Practices</a></li>
<li><a href="#interview-questions--answers" node="[object Object]">Interview Questions &amp; Answers</a></li>
<li><a href="#advanced-techniques" node="[object Object]">Advanced Techniques</a></li>
</ul>
<h2 id="understanding-the-dom" node="[object Object]">Understanding the DOM</h2>
<h3 id="what-is-the-dom?" node="[object Object]">What is the DOM?</h3>
<p>The <strong>Document Object Model (DOM)</strong> is a programming interface for HTML and XML documents. It represents the document as a tree of objects that can be modified with JavaScript.</p>
<h4>Key Concepts:</h4>
<p><strong>1. Live Representation</strong></p>
<ul>
<li>The DOM is a <strong>live</strong>, in-memory representation of the document</li>
<li>Changes to the DOM immediately affect the rendered page</li>
<li>JavaScript can read and modify the DOM in real-time</li>
</ul>
<p><strong>2. Object-Oriented Interface</strong></p>
<ul>
<li>Every element, attribute, and piece of text is an <strong>object</strong></li>
<li>Objects have properties and methods for manipulation</li>
<li>Follows a hierarchical tree structure</li>
</ul>
<p><strong>3. Language-Agnostic API</strong></p>
<ul>
<li>While commonly used with JavaScript, DOM APIs work with any language</li>
<li>Standardized by W3C and WHATWG</li>
<li>Consistent across different browsers (mostly)</li>
</ul>
<h3 id="dom-vs-html" node="[object Object]">DOM vs HTML</h3>
<pre><pre><code class="hljs hljs language-html"><span class="hljs-comment">&lt;!-- HTML Source Code --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>My Page<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Hello World<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Welcome to my page<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre></pre>
<p><strong>HTML</strong>: Static markup language
<strong>DOM</strong>: Dynamic object representation</p>
<pre><pre><code class="hljs hljs language-javascript"><span class="hljs-comment">// DOM Representation (simplified)</span>
{
    <span class="hljs-attr">nodeType</span>: <span class="hljs-number">9</span>, <span class="hljs-comment">// DOCUMENT_NODE</span>
    <span class="hljs-attr">nodeName</span>: <span class="hljs-string">&quot;#document&quot;</span>,
    <span class="hljs-attr">children</span>: [
        {
            <span class="hljs-attr">nodeType</span>: <span class="hljs-number">1</span>, <span class="hljs-comment">// ELEMENT_NODE</span>
            <span class="hljs-attr">nodeName</span>: <span class="hljs-string">&quot;HTML&quot;</span>,
            <span class="hljs-attr">children</span>: [
                {
                    <span class="hljs-attr">nodeType</span>: <span class="hljs-number">1</span>,
                    <span class="hljs-attr">nodeName</span>: <span class="hljs-string">&quot;HEAD&quot;</span>,
                    <span class="hljs-attr">children</span>: [<span class="hljs-comment">/* title element */</span>]
                },
                {
                    <span class="hljs-attr">nodeType</span>: <span class="hljs-number">1</span>,
                    <span class="hljs-attr">nodeName</span>: <span class="hljs-string">&quot;BODY&quot;</span>,
                    <span class="hljs-attr">children</span>: [<span class="hljs-comment">/* h1 and p elements */</span>]
                }
            ]
        }
    ]
}
</code></pre></pre>
<h2 id="dom-tree-structure" node="[object Object]">DOM Tree Structure</h2>
<h3 id="node-types-and-hierarchy" node="[object Object]">Node Types and Hierarchy</h3>
<p>The DOM represents documents as a tree of <strong>nodes</strong>:</p>
<pre><pre><code class="hljs undefined">                    document (Document Node)
                         │
                      html (Element Node)
                    ┌─────┴─────┐
                 head          body (Element Nodes)
                   │             │
               title          ┌───┴───┐
                 │          h1        p (Element Nodes)
           &quot;My Page&quot;         │        │
           (Text Node)  &quot;Hello World&quot; &quot;Welcome...&quot; (Text Nodes)
</code></pre></pre>
<h3 id="node-types-(complete-list)" node="[object Object]">Node Types (Complete List)</h3>
<p>{% raw %}</p>
<pre><pre><code class="hljs hljs language-javascript"><span class="hljs-comment">// Node types with their numeric constants</span>
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">NODE_TYPES</span> = {
  <span class="hljs-attr">ELEMENT_NODE</span>: <span class="hljs-number">1</span>, <span class="hljs-comment">// &lt;div&gt;, &lt;span&gt;, etc.</span>
  <span class="hljs-attr">ATTRIBUTE_NODE</span>: <span class="hljs-number">2</span>, <span class="hljs-comment">// class=&quot;example&quot; (deprecated)</span>
  <span class="hljs-attr">TEXT_NODE</span>: <span class="hljs-number">3</span>, <span class="hljs-comment">// Text content</span>
  <span class="hljs-attr">CDATA_SECTION_NODE</span>: <span class="hljs-number">4</span>, <span class="hljs-comment">// &lt;![CDATA[...]]&gt;</span>
  <span class="hljs-attr">ENTITY_REFERENCE_NODE</span>: <span class="hljs-number">5</span>, <span class="hljs-comment">// &amp;amp; (deprecated)</span>
  <span class="hljs-attr">ENTITY_NODE</span>: <span class="hljs-number">6</span>, <span class="hljs-comment">// (deprecated)</span>
  <span class="hljs-attr">PROCESSING_INSTRUCTION_NODE</span>: <span class="hljs-number">7</span>, <span class="hljs-comment">// &lt;?xml-stylesheet ... ?&gt;</span>
  <span class="hljs-attr">COMMENT_NODE</span>: <span class="hljs-number">8</span>, <span class="hljs-comment">// &lt;!-- comment --&gt;</span>
  <span class="hljs-attr">DOCUMENT_NODE</span>: <span class="hljs-number">9</span>, <span class="hljs-comment">// document</span>
  <span class="hljs-attr">DOCUMENT_TYPE_NODE</span>: <span class="hljs-number">10</span>, <span class="hljs-comment">// &lt;!DOCTYPE html&gt;</span>
  <span class="hljs-attr">DOCUMENT_FRAGMENT_NODE</span>: <span class="hljs-number">11</span>, <span class="hljs-comment">// document.createDocumentFragment()</span>
  <span class="hljs-attr">NOTATION_NODE</span>: <span class="hljs-number">12</span>, <span class="hljs-comment">// (deprecated)</span>
};

<span class="hljs-comment">// Example usage</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">analyzeNode</span>(<span class="hljs-params">node</span>) {
  <span class="hljs-keyword">switch</span> (node.<span class="hljs-property">nodeType</span>) {
    <span class="hljs-keyword">case</span> <span class="hljs-title class_">Node</span>.<span class="hljs-property">ELEMENT_NODE</span>:
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Element: <span class="hljs-subst">${node.tagName}</span>`</span>);
      <span class="hljs-keyword">break</span>;
    <span class="hljs-keyword">case</span> <span class="hljs-title class_">Node</span>.<span class="hljs-property">TEXT_NODE</span>:
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Text: &quot;<span class="hljs-subst">${node.textContent}</span>&quot;`</span>);
      <span class="hljs-keyword">break</span>;
    <span class="hljs-keyword">case</span> <span class="hljs-title class_">Node</span>.<span class="hljs-property">COMMENT_NODE</span>:
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Comment: <span class="hljs-subst">${node.textContent}</span>`</span>);
      <span class="hljs-keyword">break</span>;
    <span class="hljs-attr">default</span>:
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Other node type: <span class="hljs-subst">${node.nodeType}</span>`</span>);
  }
}
</code></pre></pre>
<p>{% endraw %}</p>
<h3 id="node-properties-and-relationships" node="[object Object]">Node Properties and Relationships</h3>
<p>Every DOM node has properties that describe its relationships:</p>
<pre><pre><code class="hljs hljs language-javascript"><span class="hljs-comment">// Node relationship properties</span>
<span class="hljs-keyword">const</span> element = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;myElement&quot;</span>);

<span class="hljs-comment">// Parent relationships</span>
element.<span class="hljs-property">parentNode</span>; <span class="hljs-comment">// Immediate parent (any node type)</span>
element.<span class="hljs-property">parentElement</span>; <span class="hljs-comment">// Parent element (null if parent isn&#x27;t element)</span>

<span class="hljs-comment">// Child relationships</span>
element.<span class="hljs-property">childNodes</span>; <span class="hljs-comment">// All child nodes (including text, comments)</span>
element.<span class="hljs-property">children</span>; <span class="hljs-comment">// Only child elements</span>
element.<span class="hljs-property">firstChild</span>; <span class="hljs-comment">// First child node</span>
element.<span class="hljs-property">lastChild</span>; <span class="hljs-comment">// Last child node</span>
element.<span class="hljs-property">firstElementChild</span>; <span class="hljs-comment">// First child element</span>
element.<span class="hljs-property">lastElementChild</span>; <span class="hljs-comment">// Last child element</span>

<span class="hljs-comment">// Sibling relationships</span>
element.<span class="hljs-property">nextSibling</span>; <span class="hljs-comment">// Next sibling node</span>
element.<span class="hljs-property">previousSibling</span>; <span class="hljs-comment">// Previous sibling node</span>
element.<span class="hljs-property">nextElementSibling</span>; <span class="hljs-comment">// Next sibling element</span>
element.<span class="hljs-property">previousElementSibling</span>; <span class="hljs-comment">// Previous sibling element</span>

<span class="hljs-comment">// Document relationships</span>
element.<span class="hljs-property">ownerDocument</span>; <span class="hljs-comment">// Reference to document</span>
element.<span class="hljs-title function_">getRootNode</span>(); <span class="hljs-comment">// Root node (document or shadow root)</span>
</code></pre></pre>
<h3 id="detailed-tree-navigation-example" node="[object Object]">Detailed Tree Navigation Example</h3>
<pre><pre><code class="hljs hljs language-html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;container&quot;</span>&gt;</span>
  <span class="hljs-comment">&lt;!-- This is a comment --&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Title<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
  Some text content
  <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Paragraph<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>Span element<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre></pre>
<pre><pre><code class="hljs hljs language-javascript"><span class="hljs-keyword">const</span> container = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;container&quot;</span>);

<span class="hljs-comment">// Understanding childNodes vs children</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(container.<span class="hljs-property">childNodes</span>.<span class="hljs-property">length</span>); <span class="hljs-comment">// 7 (includes text nodes and comment)</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(container.<span class="hljs-property">children</span>.<span class="hljs-property">length</span>); <span class="hljs-comment">// 3 (only h1, p, span elements)</span>

<span class="hljs-comment">// Iterating through all nodes</span>
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> node <span class="hljs-keyword">of</span> container.<span class="hljs-property">childNodes</span>) {
  <span class="hljs-keyword">if</span> (node.<span class="hljs-property">nodeType</span> === <span class="hljs-title class_">Node</span>.<span class="hljs-property">ELEMENT_NODE</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Element: <span class="hljs-subst">${node.tagName}</span>`</span>);
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (node.<span class="hljs-property">nodeType</span> === <span class="hljs-title class_">Node</span>.<span class="hljs-property">TEXT_NODE</span>) {
    <span class="hljs-keyword">const</span> text = node.<span class="hljs-property">textContent</span>.<span class="hljs-title function_">trim</span>();
    <span class="hljs-keyword">if</span> (text) <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Text: &quot;<span class="hljs-subst">${text}</span>&quot;`</span>);
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (node.<span class="hljs-property">nodeType</span> === <span class="hljs-title class_">Node</span>.<span class="hljs-property">COMMENT_NODE</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Comment: <span class="hljs-subst">${node.textContent}</span>`</span>);
  }
}

<span class="hljs-comment">// Output:</span>
<span class="hljs-comment">// Comment: This is a comment</span>
<span class="hljs-comment">// Element: H1</span>
<span class="hljs-comment">// Text: &quot;Some text content&quot;</span>
<span class="hljs-comment">// Element: P</span>
<span class="hljs-comment">// Element: SPAN</span>
</code></pre></pre>
<h2 id="element-selection-methods" node="[object Object]">Element Selection Methods</h2>
<h3 id="performance-comparison-of-selection-methods" node="[object Object]">Performance Comparison of Selection Methods</h3>
<pre><pre><code class="hljs hljs language-javascript"><span class="hljs-comment">// Performance ranking (fastest to slowest)</span>
<span class="hljs-comment">// 1. getElementById - O(1) hash lookup</span>
<span class="hljs-keyword">const</span> element = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;myId&quot;</span>);

<span class="hljs-comment">// 2. getElementsByTagName - optimized native implementation</span>
<span class="hljs-keyword">const</span> paragraphs = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementsByTagName</span>(<span class="hljs-string">&quot;p&quot;</span>);

<span class="hljs-comment">// 3. getElementsByClassName - optimized for class selection</span>
<span class="hljs-keyword">const</span> highlighted = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementsByClassName</span>(<span class="hljs-string">&quot;highlight&quot;</span>);

<span class="hljs-comment">// 4. querySelector - flexible but slower for simple selections</span>
<span class="hljs-keyword">const</span> firstParagraph = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">&quot;p&quot;</span>);

<span class="hljs-comment">// 5. querySelectorAll - most flexible but slowest</span>
<span class="hljs-keyword">const</span> allParagraphs = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelectorAll</span>(<span class="hljs-string">&quot;p&quot;</span>);
</code></pre></pre>
<h3 id="advanced-selector-strategies" node="[object Object]">Advanced Selector Strategies</h3>
<p><strong>1. Context-Specific Selection</strong></p>
<pre><pre><code class="hljs hljs language-javascript"><span class="hljs-comment">// Instead of searching entire document</span>
<span class="hljs-keyword">const</span> expensiveSearch = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelectorAll</span>(<span class="hljs-string">&quot;.item .title&quot;</span>);

<span class="hljs-comment">// Search within a specific container</span>
<span class="hljs-keyword">const</span> container = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;itemContainer&quot;</span>);
<span class="hljs-keyword">const</span> efficientSearch = container.<span class="hljs-title function_">querySelectorAll</span>(<span class="hljs-string">&quot;.title&quot;</span>);

<span class="hljs-comment">// Even better: use more specific selectors</span>
<span class="hljs-keyword">const</span> verySpecific = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelectorAll</span>(
  <span class="hljs-string">&quot;#itemContainer &gt; .item &gt; .title&quot;</span>
);
</code></pre></pre>
<p><strong>2. Live vs Static Collections</strong></p>
<pre><pre><code class="hljs hljs language-javascript"><span class="hljs-comment">// Live collections (automatically update)</span>
<span class="hljs-keyword">const</span> liveCollection = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementsByClassName</span>(<span class="hljs-string">&quot;dynamic&quot;</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(liveCollection.<span class="hljs-property">length</span>); <span class="hljs-comment">// 3</span>

<span class="hljs-comment">// Add new element with class &#x27;dynamic&#x27;</span>
<span class="hljs-keyword">const</span> newElement = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">&quot;div&quot;</span>);
newElement.<span class="hljs-property">className</span> = <span class="hljs-string">&quot;dynamic&quot;</span>;
<span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">appendChild</span>(newElement);

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(liveCollection.<span class="hljs-property">length</span>); <span class="hljs-comment">// 4 (automatically updated!)</span>

<span class="hljs-comment">// Static collections (snapshot at query time)</span>
<span class="hljs-keyword">const</span> staticCollection = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelectorAll</span>(<span class="hljs-string">&quot;.dynamic&quot;</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(staticCollection.<span class="hljs-property">length</span>); <span class="hljs-comment">// 3 (doesn&#x27;t change)</span>
</code></pre></pre>
<p><strong>3. Custom Selection Utilities</strong></p>
<pre><pre><code class="hljs hljs language-javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">DOMSelector</span> {
  <span class="hljs-comment">// Enhanced getElementById with error handling</span>
  <span class="hljs-keyword">static</span> <span class="hljs-title function_">byId</span>(<span class="hljs-params">id, context = <span class="hljs-variable language_">document</span></span>) {
    <span class="hljs-keyword">const</span> element = context.<span class="hljs-title function_">getElementById</span>(id);
    <span class="hljs-keyword">if</span> (!element) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(<span class="hljs-string">`Element with id &quot;<span class="hljs-subst">${id}</span>&quot; not found`</span>);
    }
    <span class="hljs-keyword">return</span> element;
  }

  <span class="hljs-comment">// Get element with data attribute</span>
  <span class="hljs-keyword">static</span> <span class="hljs-title function_">byData</span>(<span class="hljs-params">attribute, value, context = <span class="hljs-variable language_">document</span></span>) {
    <span class="hljs-keyword">return</span> context.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">`[data-<span class="hljs-subst">${attribute}</span>=&quot;<span class="hljs-subst">${value}</span>&quot;]`</span>);
  }

  <span class="hljs-comment">// Get all elements matching multiple classes</span>
  <span class="hljs-keyword">static</span> <span class="hljs-title function_">byClasses</span>(<span class="hljs-params">classes, context = <span class="hljs-variable language_">document</span></span>) {
    <span class="hljs-keyword">const</span> selector = classes.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">cls</span>) =&gt;</span> <span class="hljs-string">`.<span class="hljs-subst">${cls}</span>`</span>).<span class="hljs-title function_">join</span>(<span class="hljs-string">&quot;&quot;</span>);
    <span class="hljs-keyword">return</span> context.<span class="hljs-title function_">querySelectorAll</span>(selector);
  }

  <span class="hljs-comment">// Get closest ancestor matching selector</span>
  <span class="hljs-keyword">static</span> <span class="hljs-title function_">closest</span>(<span class="hljs-params">element, selector</span>) {
    <span class="hljs-keyword">return</span> element.<span class="hljs-title function_">closest</span>(selector);
  }

  <span class="hljs-comment">// Get all descendants matching selector</span>
  <span class="hljs-keyword">static</span> <span class="hljs-title function_">descendants</span>(<span class="hljs-params">element, selector</span>) {
    <span class="hljs-keyword">return</span> element.<span class="hljs-title function_">querySelectorAll</span>(selector);
  }

  <span class="hljs-comment">// Check if element matches selector</span>
  <span class="hljs-keyword">static</span> <span class="hljs-title function_">matches</span>(<span class="hljs-params">element, selector</span>) {
    <span class="hljs-keyword">return</span> element.<span class="hljs-title function_">matches</span>(selector);
  }
}

<span class="hljs-comment">// Usage examples</span>
<span class="hljs-keyword">const</span> header = <span class="hljs-title class_">DOMSelector</span>.<span class="hljs-title function_">byId</span>(<span class="hljs-string">&quot;header&quot;</span>);
<span class="hljs-keyword">const</span> dataElement = <span class="hljs-title class_">DOMSelector</span>.<span class="hljs-title function_">byData</span>(<span class="hljs-string">&quot;role&quot;</span>, <span class="hljs-string">&quot;button&quot;</span>);
<span class="hljs-keyword">const</span> multiClass = <span class="hljs-title class_">DOMSelector</span>.<span class="hljs-title function_">byClasses</span>([<span class="hljs-string">&quot;btn&quot;</span>, <span class="hljs-string">&quot;primary&quot;</span>]);
<span class="hljs-keyword">const</span> parentSection = <span class="hljs-title class_">DOMSelector</span>.<span class="hljs-title function_">closest</span>(button, <span class="hljs-string">&quot;section&quot;</span>);
</code></pre></pre>
<h2 id="creating-and-modifying-elements" node="[object Object]">Creating and Modifying Elements</h2>
<h3 id="element-creation-patterns" node="[object Object]">Element Creation Patterns</h3>
<p><strong>1. Basic Element Creation</strong></p>
<pre><pre><code class="hljs hljs language-javascript"><span class="hljs-comment">// Create element</span>
<span class="hljs-keyword">const</span> div = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">&quot;div&quot;</span>);

<span class="hljs-comment">// Set attributes</span>
div.<span class="hljs-property">id</span> = <span class="hljs-string">&quot;myDiv&quot;</span>;
div.<span class="hljs-property">className</span> = <span class="hljs-string">&quot;container highlight&quot;</span>;
div.<span class="hljs-title function_">setAttribute</span>(<span class="hljs-string">&quot;data-role&quot;</span>, <span class="hljs-string">&quot;content&quot;</span>);

<span class="hljs-comment">// Set content</span>
div.<span class="hljs-property">textContent</span> = <span class="hljs-string">&quot;Hello World&quot;</span>;
div.<span class="hljs-property">innerHTML</span> = <span class="hljs-string">&quot;&lt;strong&gt;Bold text&lt;/strong&gt;&quot;</span>;

<span class="hljs-comment">// Append to document</span>
<span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">appendChild</span>(div);
</code></pre></pre>
<p><strong>2. Advanced Element Factory</strong></p>
<pre><pre><code class="hljs hljs language-javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">ElementFactory</span> {
  <span class="hljs-keyword">static</span> <span class="hljs-title function_">create</span>(<span class="hljs-params">tagName, options = {}</span>) {
    <span class="hljs-keyword">const</span> element = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(tagName);

    <span class="hljs-comment">// Set attributes</span>
    <span class="hljs-keyword">if</span> (options.<span class="hljs-property">attributes</span>) {
      <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">entries</span>(options.<span class="hljs-property">attributes</span>).<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">[key, value]</span>) =&gt;</span> {
        element.<span class="hljs-title function_">setAttribute</span>(key, value);
      });
    }

    <span class="hljs-comment">// Set properties</span>
    <span class="hljs-keyword">if</span> (options.<span class="hljs-property">properties</span>) {
      <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>(element, options.<span class="hljs-property">properties</span>);
    }

    <span class="hljs-comment">// Set styles</span>
    <span class="hljs-keyword">if</span> (options.<span class="hljs-property">styles</span>) {
      <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>(element.<span class="hljs-property">style</span>, options.<span class="hljs-property">styles</span>);
    }

    <span class="hljs-comment">// Set content</span>
    <span class="hljs-keyword">if</span> (options.<span class="hljs-property">textContent</span>) {
      element.<span class="hljs-property">textContent</span> = options.<span class="hljs-property">textContent</span>;
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (options.<span class="hljs-property">innerHTML</span>) {
      element.<span class="hljs-property">innerHTML</span> = options.<span class="hljs-property">innerHTML</span>;
    }

    <span class="hljs-comment">// Add event listeners</span>
    <span class="hljs-keyword">if</span> (options.<span class="hljs-property">events</span>) {
      <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">entries</span>(options.<span class="hljs-property">events</span>).<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">[event, handler]</span>) =&gt;</span> {
        element.<span class="hljs-title function_">addEventListener</span>(event, handler);
      });
    }

    <span class="hljs-comment">// Add children</span>
    <span class="hljs-keyword">if</span> (options.<span class="hljs-property">children</span>) {
      options.<span class="hljs-property">children</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">child</span>) =&gt;</span> {
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> child === <span class="hljs-string">&quot;string&quot;</span>) {
          element.<span class="hljs-title function_">appendChild</span>(<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createTextNode</span>(child));
        } <span class="hljs-keyword">else</span> {
          element.<span class="hljs-title function_">appendChild</span>(child);
        }
      });
    }

    <span class="hljs-keyword">return</span> element;
  }

  <span class="hljs-comment">// Specialized creation methods</span>
  <span class="hljs-keyword">static</span> <span class="hljs-title function_">button</span>(<span class="hljs-params">text, onClick, className = <span class="hljs-string">&quot;btn&quot;</span></span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">create</span>(<span class="hljs-string">&quot;button&quot;</span>, {
      <span class="hljs-attr">textContent</span>: text,
      <span class="hljs-attr">properties</span>: { className },
      <span class="hljs-attr">events</span>: { <span class="hljs-attr">click</span>: onClick },
    });
  }

  <span class="hljs-keyword">static</span> <span class="hljs-title function_">input</span>(<span class="hljs-params">type, placeholder, name</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">create</span>(<span class="hljs-string">&quot;input&quot;</span>, {
      <span class="hljs-attr">attributes</span>: { type, placeholder, name },
    });
  }

  <span class="hljs-keyword">static</span> <span class="hljs-title function_">div</span>(<span class="hljs-params">className, content</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">create</span>(<span class="hljs-string">&quot;div&quot;</span>, {
      <span class="hljs-attr">properties</span>: { className },
      <span class="hljs-attr">innerHTML</span>: content,
    });
  }
}

<span class="hljs-comment">// Usage</span>
<span class="hljs-keyword">const</span> button = <span class="hljs-title class_">ElementFactory</span>.<span class="hljs-title function_">button</span>(<span class="hljs-string">&quot;Click me&quot;</span>, <span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">alert</span>(<span class="hljs-string">&quot;Clicked!&quot;</span>));
<span class="hljs-keyword">const</span> input = <span class="hljs-title class_">ElementFactory</span>.<span class="hljs-title function_">input</span>(<span class="hljs-string">&quot;text&quot;</span>, <span class="hljs-string">&quot;Enter name...&quot;</span>, <span class="hljs-string">&quot;username&quot;</span>);
<span class="hljs-keyword">const</span> container = <span class="hljs-title class_">ElementFactory</span>.<span class="hljs-title function_">div</span>(<span class="hljs-string">&quot;form-container&quot;</span>, <span class="hljs-string">&quot;&quot;</span>);

container.<span class="hljs-title function_">appendChild</span>(input);
container.<span class="hljs-title function_">appendChild</span>(button);
<span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">appendChild</span>(container);
</code></pre></pre>
<h3 id="document-fragments-for-performance" node="[object Object]">Document Fragments for Performance</h3>
<p><strong>Problem: Multiple DOM Manipulations</strong></p>
<pre><pre><code class="hljs hljs language-javascript"><span class="hljs-comment">// SLOW: Each appendChild causes reflow</span>
<span class="hljs-keyword">const</span> container = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;container&quot;</span>);
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">1000</span>; i++) {
  <span class="hljs-keyword">const</span> div = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">&quot;div&quot;</span>);
  div.<span class="hljs-property">textContent</span> = <span class="hljs-string">`Item <span class="hljs-subst">${i}</span>`</span>;
  container.<span class="hljs-title function_">appendChild</span>(div); <span class="hljs-comment">// Reflow on each iteration!</span>
}
</code></pre></pre>
<p><strong>Solution: Document Fragment</strong></p>
<pre><pre><code class="hljs hljs language-javascript"><span class="hljs-comment">// FAST: Only one reflow at the end</span>
<span class="hljs-keyword">const</span> container = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;container&quot;</span>);
<span class="hljs-keyword">const</span> fragment = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createDocumentFragment</span>();

<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">1000</span>; i++) {
  <span class="hljs-keyword">const</span> div = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">&quot;div&quot;</span>);
  div.<span class="hljs-property">textContent</span> = <span class="hljs-string">`Item <span class="hljs-subst">${i}</span>`</span>;
  fragment.<span class="hljs-title function_">appendChild</span>(div); <span class="hljs-comment">// No reflow</span>
}

container.<span class="hljs-title function_">appendChild</span>(fragment); <span class="hljs-comment">// Single reflow</span>
</code></pre></pre>
<p><strong>Advanced Fragment Usage</strong></p>
<pre><pre><code class="hljs hljs language-javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">DOMBatchProcessor</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">fragment</span> = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createDocumentFragment</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">operations</span> = [];
  }

  <span class="hljs-comment">// Queue element creation</span>
  <span class="hljs-title function_">createElement</span>(<span class="hljs-params">tagName, options = {}</span>) {
    <span class="hljs-keyword">const</span> element = <span class="hljs-title class_">ElementFactory</span>.<span class="hljs-title function_">create</span>(tagName, options);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">fragment</span>.<span class="hljs-title function_">appendChild</span>(element);
    <span class="hljs-keyword">return</span> element;
  }

  <span class="hljs-comment">// Queue existing element</span>
  <span class="hljs-title function_">addElement</span>(<span class="hljs-params">element</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">fragment</span>.<span class="hljs-title function_">appendChild</span>(element);
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;
  }

  <span class="hljs-comment">// Commit all changes at once</span>
  <span class="hljs-title function_">commitTo</span>(<span class="hljs-params">container</span>) {
    container.<span class="hljs-title function_">appendChild</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">fragment</span>);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">fragment</span> = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createDocumentFragment</span>(); <span class="hljs-comment">// Reset</span>
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;
  }

  <span class="hljs-comment">// Create multiple similar elements</span>
  <span class="hljs-title function_">createMultiple</span>(<span class="hljs-params">count, tagName, optionsGenerator</span>) {
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; count; i++) {
      <span class="hljs-keyword">const</span> options =
        <span class="hljs-keyword">typeof</span> optionsGenerator === <span class="hljs-string">&quot;function&quot;</span>
          ? <span class="hljs-title function_">optionsGenerator</span>(i)
          : optionsGenerator;
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">createElement</span>(tagName, options);
    }
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;
  }
}

<span class="hljs-comment">// Usage</span>
<span class="hljs-keyword">const</span> processor = <span class="hljs-keyword">new</span> <span class="hljs-title class_">DOMBatchProcessor</span>();

processor
  .<span class="hljs-title function_">createMultiple</span>(<span class="hljs-number">100</span>, <span class="hljs-string">&quot;div&quot;</span>, <span class="hljs-function">(<span class="hljs-params">index</span>) =&gt;</span> ({
    <span class="hljs-attr">textContent</span>: <span class="hljs-string">`Item <span class="hljs-subst">${index}</span>`</span>,
    <span class="hljs-attr">properties</span>: { <span class="hljs-attr">className</span>: <span class="hljs-string">&quot;list-item&quot;</span> },
    <span class="hljs-attr">attributes</span>: { <span class="hljs-string">&quot;data-index&quot;</span>: index },
  }))
  .<span class="hljs-title function_">commitTo</span>(<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;list&quot;</span>));
</code></pre></pre>
<h2 id="event-system-deep-dive" node="[object Object]">Event System Deep Dive</h2>
<h3 id="event-flow:-capturing,-target,-bubbling" node="[object Object]">Event Flow: Capturing, Target, Bubbling</h3>
<pre><pre><code class="hljs undefined">Event Flow Phases:

Phase 1: CAPTURING (top-down)
┌─────────────────────────────────────┐
│            document                 │
│  ┌─────────────────────────────┐    │
│  │           html              │ ←──┼── Event travels down
│  │  ┌─────────────────────┐    │    │
│  │  │        body         │ ←──┼────┤
│  │  │  ┌─────────────┐    │    │    │
│  │  │  │    div      │ ←──┼────┼────┤
│  │  │  │  ┌─────┐    │    │    │    │
│  │  │  │  │ btn │ ←──┼────┼────┼────┘
│  │  │  │  └─────┘    │    │    │
│  │  │  └─────────────┘    │    │
│  │  └─────────────────────┘    │
│  └─────────────────────────────┘
└─────────────────────────────────────┘

Phase 2: TARGET
Button receives the event

Phase 3: BUBBLING (bottom-up)
┌─────────────────────────────────────┐
│            document                 │
│  ┌─────────────────────────────┐    │
│  │           html              │ ←──┼── Event bubbles up
│  │  ┌─────────────────────┐    │    │
│  │  │        body         │ ←──┼────┤
│  │  │  ┌─────────────┐    │    │    │
│  │  │  │    div      │ ←──┼────┼────┤
│  │  │  │  ┌─────┐    │    │    │    │
│  │  │  │  │ btn │ ←──┼────┼────┼────┘
│  │  │  │  └─────┘    │    │    │
│  │  │  └─────────────┘    │    │
│  │  └─────────────────────┘    │
│  └─────────────────────────────┘
└─────────────────────────────────────┘
</code></pre></pre>
<h3 id="event-handling-patterns" node="[object Object]">Event Handling Patterns</h3>
<p><strong>1. Event Delegation</strong></p>
<pre><pre><code class="hljs hljs language-javascript"><span class="hljs-comment">// Instead of adding listeners to many elements</span>
<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelectorAll</span>(<span class="hljs-string">&quot;.button&quot;</span>).<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">button</span>) =&gt;</span> {
  button.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&quot;click&quot;</span>, handleButtonClick); <span class="hljs-comment">// Many listeners</span>
});

<span class="hljs-comment">// Use event delegation on parent</span>
<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;container&quot;</span>).<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&quot;click&quot;</span>, <span class="hljs-keyword">function</span> (<span class="hljs-params">e</span>) {
  <span class="hljs-keyword">if</span> (e.<span class="hljs-property">target</span>.<span class="hljs-title function_">matches</span>(<span class="hljs-string">&quot;.button&quot;</span>)) {
    <span class="hljs-title function_">handleButtonClick</span>(e);
  }
});

<span class="hljs-comment">// Advanced event delegation</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">EventDelegator</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">container</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">container</span> =
      <span class="hljs-keyword">typeof</span> container === <span class="hljs-string">&quot;string&quot;</span>
        ? <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(container)
        : container;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">handlers</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>();

    <span class="hljs-comment">// Single listener for all events</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">container</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&quot;click&quot;</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">handleClick</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">this</span>));
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">container</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&quot;change&quot;</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">handleChange</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">this</span>));
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">container</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&quot;input&quot;</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">handleInput</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">this</span>));
  }

  <span class="hljs-comment">// Register handler for specific selector</span>
  <span class="hljs-title function_">on</span>(<span class="hljs-params">eventType, selector, handler</span>) {
    <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">handlers</span>.<span class="hljs-title function_">has</span>(eventType)) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">handlers</span>.<span class="hljs-title function_">set</span>(eventType, <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>());
    }
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">handlers</span>.<span class="hljs-title function_">get</span>(eventType).<span class="hljs-title function_">set</span>(selector, handler);
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;
  }

  <span class="hljs-comment">// Handle delegated events</span>
  <span class="hljs-title function_">handleEvent</span>(<span class="hljs-params">e</span>) {
    <span class="hljs-keyword">const</span> eventHandlers = <span class="hljs-variable language_">this</span>.<span class="hljs-property">handlers</span>.<span class="hljs-title function_">get</span>(e.<span class="hljs-property">type</span>);
    <span class="hljs-keyword">if</span> (!eventHandlers) <span class="hljs-keyword">return</span>;

    <span class="hljs-comment">// Check each selector</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> [selector, handler] <span class="hljs-keyword">of</span> eventHandlers) {
      <span class="hljs-keyword">const</span> target = e.<span class="hljs-property">target</span>.<span class="hljs-title function_">closest</span>(selector);
      <span class="hljs-keyword">if</span> (target &amp;&amp; <span class="hljs-variable language_">this</span>.<span class="hljs-property">container</span>.<span class="hljs-title function_">contains</span>(target)) {
        handler.<span class="hljs-title function_">call</span>(target, e);
        <span class="hljs-keyword">break</span>; <span class="hljs-comment">// Stop at first match</span>
      }
    }
  }

  <span class="hljs-title function_">handleClick</span>(<span class="hljs-params">e</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">handleEvent</span>(e);
  }
  <span class="hljs-title function_">handleChange</span>(<span class="hljs-params">e</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">handleEvent</span>(e);
  }
  <span class="hljs-title function_">handleInput</span>(<span class="hljs-params">e</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">handleEvent</span>(e);
  }
}

<span class="hljs-comment">// Usage</span>
<span class="hljs-keyword">const</span> delegator = <span class="hljs-keyword">new</span> <span class="hljs-title class_">EventDelegator</span>(<span class="hljs-string">&quot;#app&quot;</span>);

delegator
  .<span class="hljs-title function_">on</span>(<span class="hljs-string">&quot;click&quot;</span>, <span class="hljs-string">&quot;.btn&quot;</span>, <span class="hljs-keyword">function</span> (<span class="hljs-params">e</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;Button clicked:&quot;</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">textContent</span>);
  })
  .<span class="hljs-title function_">on</span>(<span class="hljs-string">&quot;click&quot;</span>, <span class="hljs-string">&quot;.link&quot;</span>, <span class="hljs-keyword">function</span> (<span class="hljs-params">e</span>) {
    e.<span class="hljs-title function_">preventDefault</span>();
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;Link clicked:&quot;</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">href</span>);
  })
  .<span class="hljs-title function_">on</span>(<span class="hljs-string">&quot;input&quot;</span>, <span class="hljs-string">&quot;.search&quot;</span>, <span class="hljs-keyword">function</span> (<span class="hljs-params">e</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;Search input:&quot;</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">value</span>);
  });
</code></pre></pre>
<p><strong>2. Custom Event System</strong></p>
<pre><pre><code class="hljs hljs language-javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">CustomEventEmitter</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">element</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">element</span> = element;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">listeners</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>();
  }

  <span class="hljs-comment">// Emit custom event</span>
  <span class="hljs-title function_">emit</span>(<span class="hljs-params">eventType, detail = <span class="hljs-literal">null</span></span>) {
    <span class="hljs-keyword">const</span> event = <span class="hljs-keyword">new</span> <span class="hljs-title class_">CustomEvent</span>(eventType, {
      detail,
      <span class="hljs-attr">bubbles</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">cancelable</span>: <span class="hljs-literal">true</span>,
    });

    <span class="hljs-variable language_">this</span>.<span class="hljs-property">element</span>.<span class="hljs-title function_">dispatchEvent</span>(event);
    <span class="hljs-keyword">return</span> event;
  }

  <span class="hljs-comment">// Listen for custom events</span>
  <span class="hljs-title function_">on</span>(<span class="hljs-params">eventType, handler, options = {}</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">element</span>.<span class="hljs-title function_">addEventListener</span>(eventType, handler, options);

    <span class="hljs-comment">// Store for cleanup</span>
    <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">listeners</span>.<span class="hljs-title function_">has</span>(eventType)) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">listeners</span>.<span class="hljs-title function_">set</span>(eventType, <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>());
    }
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">listeners</span>.<span class="hljs-title function_">get</span>(eventType).<span class="hljs-title function_">add</span>(handler);

    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;
  }

  <span class="hljs-comment">// Remove specific listener</span>
  <span class="hljs-title function_">off</span>(<span class="hljs-params">eventType, handler</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">element</span>.<span class="hljs-title function_">removeEventListener</span>(eventType, handler);

    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">listeners</span>.<span class="hljs-title function_">has</span>(eventType)) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">listeners</span>.<span class="hljs-title function_">get</span>(eventType).<span class="hljs-title function_">delete</span>(handler);
    }

    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;
  }

  <span class="hljs-comment">// Remove all listeners for event type</span>
  <span class="hljs-title function_">offAll</span>(<span class="hljs-params">eventType</span>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">listeners</span>.<span class="hljs-title function_">has</span>(eventType)) {
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> handler <span class="hljs-keyword">of</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">listeners</span>.<span class="hljs-title function_">get</span>(eventType)) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">element</span>.<span class="hljs-title function_">removeEventListener</span>(eventType, handler);
      }
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">listeners</span>.<span class="hljs-title function_">delete</span>(eventType);
    }

    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;
  }

  <span class="hljs-comment">// Cleanup all listeners</span>
  <span class="hljs-title function_">destroy</span>(<span class="hljs-params"></span>) {
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> [eventType, handlers] <span class="hljs-keyword">of</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">listeners</span>) {
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> handler <span class="hljs-keyword">of</span> handlers) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">element</span>.<span class="hljs-title function_">removeEventListener</span>(eventType, handler);
      }
    }
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">listeners</span>.<span class="hljs-title function_">clear</span>();
  }
}

<span class="hljs-comment">// Usage</span>
<span class="hljs-keyword">const</span> emitter = <span class="hljs-keyword">new</span> <span class="hljs-title class_">CustomEventEmitter</span>(<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;myComponent&quot;</span>));

<span class="hljs-comment">// Listen for custom events</span>
emitter.<span class="hljs-title function_">on</span>(<span class="hljs-string">&quot;dataLoaded&quot;</span>, <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;Data loaded:&quot;</span>, e.<span class="hljs-property">detail</span>);
});

emitter.<span class="hljs-title function_">on</span>(<span class="hljs-string">&quot;statusChanged&quot;</span>, <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;Status changed:&quot;</span>, e.<span class="hljs-property">detail</span>.<span class="hljs-property">status</span>);
});

<span class="hljs-comment">// Emit custom events</span>
emitter.<span class="hljs-title function_">emit</span>(<span class="hljs-string">&quot;dataLoaded&quot;</span>, { <span class="hljs-attr">data</span>: [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>] });
emitter.<span class="hljs-title function_">emit</span>(<span class="hljs-string">&quot;statusChanged&quot;</span>, { <span class="hljs-attr">status</span>: <span class="hljs-string">&quot;ready&quot;</span> });
</code></pre></pre>
<h3 id="event-performance-optimization" node="[object Object]">Event Performance Optimization</h3>
<p><strong>1. Throttling and Debouncing Events</strong></p>
<pre><pre><code class="hljs hljs language-javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">EventOptimizer</span> {
  <span class="hljs-keyword">static</span> <span class="hljs-title function_">throttle</span>(<span class="hljs-params">func, limit</span>) {
    <span class="hljs-keyword">let</span> inThrottle;
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) {
      <span class="hljs-keyword">const</span> args = <span class="hljs-variable language_">arguments</span>;
      <span class="hljs-keyword">const</span> context = <span class="hljs-variable language_">this</span>;
      <span class="hljs-keyword">if</span> (!inThrottle) {
        func.<span class="hljs-title function_">apply</span>(context, args);
        inThrottle = <span class="hljs-literal">true</span>;
        <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> (inThrottle = <span class="hljs-literal">false</span>), limit);
      }
    };
  }

  <span class="hljs-keyword">static</span> <span class="hljs-title function_">debounce</span>(<span class="hljs-params">func, delay</span>) {
    <span class="hljs-keyword">let</span> timeoutId;
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) {
      <span class="hljs-keyword">const</span> args = <span class="hljs-variable language_">arguments</span>;
      <span class="hljs-keyword">const</span> context = <span class="hljs-variable language_">this</span>;
      <span class="hljs-built_in">clearTimeout</span>(timeoutId);
      timeoutId = <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> func.<span class="hljs-title function_">apply</span>(context, args), delay);
    };
  }

  <span class="hljs-comment">// Smart event optimization</span>
  <span class="hljs-keyword">static</span> <span class="hljs-title function_">optimize</span>(<span class="hljs-params">element, eventType, handler, options = {}</span>) {
    <span class="hljs-keyword">const</span> { throttle, debounce, passive = <span class="hljs-literal">true</span> } = options;

    <span class="hljs-keyword">let</span> optimizedHandler = handler;

    <span class="hljs-keyword">if</span> (throttle) {
      optimizedHandler = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">throttle</span>(handler, throttle);
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (debounce) {
      optimizedHandler = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">debounce</span>(handler, debounce);
    }

    element.<span class="hljs-title function_">addEventListener</span>(eventType, optimizedHandler, { passive });

    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> element.<span class="hljs-title function_">removeEventListener</span>(eventType, optimizedHandler);
  }
}

<span class="hljs-comment">// Usage</span>
<span class="hljs-keyword">const</span> scrollHandler = <span class="hljs-title class_">EventOptimizer</span>.<span class="hljs-title function_">optimize</span>(
  <span class="hljs-variable language_">window</span>,
  <span class="hljs-string">&quot;scroll&quot;</span>,
  <span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;Scrolled!&quot;</span>),
  { <span class="hljs-attr">throttle</span>: <span class="hljs-number">100</span>, <span class="hljs-attr">passive</span>: <span class="hljs-literal">true</span> }
);

<span class="hljs-keyword">const</span> searchHandler = <span class="hljs-title class_">EventOptimizer</span>.<span class="hljs-title function_">optimize</span>(
  <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;search&quot;</span>),
  <span class="hljs-string">&quot;input&quot;</span>,
  <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> <span class="hljs-title function_">performSearch</span>(e.<span class="hljs-property">target</span>.<span class="hljs-property">value</span>),
  { <span class="hljs-attr">debounce</span>: <span class="hljs-number">300</span> }
);
</code></pre></pre>
<h2 id="performance-optimization" node="[object Object]">Performance Optimization</h2>
<h3 id="reflow-and-repaint-optimization" node="[object Object]">Reflow and Repaint Optimization</h3>
<p><strong>Understanding Browser Rendering Pipeline:</strong></p>
<pre><pre><code class="hljs undefined">1. Layout (Reflow) - Calculate positions and dimensions
2. Paint - Fill in pixels for each element
3. Composite - Combine layers for final image
</code></pre></pre>
<p><strong>Properties that trigger reflows:</strong></p>
<ul>
<li><pre><code class="hljs undefined">width</code></pre>, <pre><code class="hljs undefined">height</code></pre>, <pre><code class="hljs undefined">margin</code></pre>, <pre><code class="hljs undefined">padding</code></pre></li>
<li><pre><code class="hljs undefined">border</code></pre>, <pre><code class="hljs undefined">position</code></pre>, <pre><code class="hljs undefined">top</code></pre>, <pre><code class="hljs undefined">left</code></pre></li>
<li><pre><code class="hljs undefined">font-size</code></pre>, <pre><code class="hljs undefined">line-height</code></pre></li>
<li><pre><code class="hljs undefined">display</code></pre>, <pre><code class="hljs undefined">float</code></pre></li>
</ul>
<p><strong>Properties that only trigger repaints:</strong></p>
<ul>
<li><pre><code class="hljs undefined">color</code></pre>, <pre><code class="hljs undefined">background-color</code></pre></li>
<li><pre><code class="hljs undefined">visibility</code></pre></li>
<li><pre><code class="hljs undefined">outline</code></pre></li>
</ul>
<p><strong>Properties that only trigger composite:</strong></p>
<ul>
<li><pre><code class="hljs undefined">transform</code></pre>, <pre><code class="hljs undefined">opacity</code></pre></li>
<li><pre><code class="hljs undefined">filter</code></pre></li>
</ul>
<p><strong>Optimization Strategies:</strong></p>
<p><strong>1. Batch DOM Reads and Writes</strong></p>
<pre><pre><code class="hljs hljs language-javascript"><span class="hljs-comment">// BAD: Causes multiple reflows</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">badExample</span>(<span class="hljs-params"></span>) {
  <span class="hljs-keyword">const</span> element = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;myDiv&quot;</span>);

  element.<span class="hljs-property">style</span>.<span class="hljs-property">height</span> = <span class="hljs-string">&quot;100px&quot;</span>; <span class="hljs-comment">// Write - triggers reflow</span>
  <span class="hljs-keyword">const</span> height = element.<span class="hljs-property">offsetHeight</span>; <span class="hljs-comment">// Read - forces reflow</span>

  element.<span class="hljs-property">style</span>.<span class="hljs-property">width</span> = <span class="hljs-string">&quot;200px&quot;</span>; <span class="hljs-comment">// Write - triggers reflow</span>
  <span class="hljs-keyword">const</span> width = element.<span class="hljs-property">offsetWidth</span>; <span class="hljs-comment">// Read - forces reflow</span>
}

<span class="hljs-comment">// GOOD: Batch reads and writes</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">goodExample</span>(<span class="hljs-params"></span>) {
  <span class="hljs-keyword">const</span> element = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;myDiv&quot;</span>);

  <span class="hljs-comment">// Batch all reads first</span>
  <span class="hljs-keyword">const</span> currentHeight = element.<span class="hljs-property">offsetHeight</span>;
  <span class="hljs-keyword">const</span> currentWidth = element.<span class="hljs-property">offsetWidth</span>;

  <span class="hljs-comment">// Then batch all writes</span>
  element.<span class="hljs-property">style</span>.<span class="hljs-property">height</span> = <span class="hljs-string">&quot;100px&quot;</span>;
  element.<span class="hljs-property">style</span>.<span class="hljs-property">width</span> = <span class="hljs-string">&quot;200px&quot;</span>;
}
</code></pre></pre>
<p><strong>2. Use CSS Classes Instead of Inline Styles</strong></p>
<pre><pre><code class="hljs hljs language-javascript"><span class="hljs-comment">// BAD: Multiple style changes</span>
element.<span class="hljs-property">style</span>.<span class="hljs-property">width</span> = <span class="hljs-string">&quot;200px&quot;</span>;
element.<span class="hljs-property">style</span>.<span class="hljs-property">height</span> = <span class="hljs-string">&quot;100px&quot;</span>;
element.<span class="hljs-property">style</span>.<span class="hljs-property">backgroundColor</span> = <span class="hljs-string">&quot;red&quot;</span>;
element.<span class="hljs-property">style</span>.<span class="hljs-property">border</span> = <span class="hljs-string">&quot;1px solid black&quot;</span>;

<span class="hljs-comment">// GOOD: Single class change</span>
element.<span class="hljs-property">className</span> = <span class="hljs-string">&quot;optimized-style&quot;</span>;
</code></pre></pre>
<p><strong>3. Virtualization for Large Lists</strong></p>
<pre><pre><code class="hljs hljs language-javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">VirtualList</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">container, items, itemHeight, visibleCount</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">container</span> = container;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span> = items;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">itemHeight</span> = itemHeight;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">visibleCount</span> = visibleCount;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">scrollTop</span> = <span class="hljs-number">0</span>;

    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">init</span>();
  }

  <span class="hljs-title function_">init</span>(<span class="hljs-params"></span>) {
    <span class="hljs-comment">// Create container for all items (sets scroll height)</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">totalHeight</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>.<span class="hljs-property">length</span> * <span class="hljs-variable language_">this</span>.<span class="hljs-property">itemHeight</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">container</span>.<span class="hljs-property">style</span>.<span class="hljs-property">height</span> = <span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.visibleCount * <span class="hljs-variable language_">this</span>.itemHeight}</span>px`</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">container</span>.<span class="hljs-property">style</span>.<span class="hljs-property">overflow</span> = <span class="hljs-string">&quot;auto&quot;</span>;

    <span class="hljs-comment">// Create viewport</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">viewport</span> = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">&quot;div&quot;</span>);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">viewport</span>.<span class="hljs-property">style</span>.<span class="hljs-property">height</span> = <span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.totalHeight}</span>px`</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">viewport</span>.<span class="hljs-property">style</span>.<span class="hljs-property">position</span> = <span class="hljs-string">&quot;relative&quot;</span>;

    <span class="hljs-comment">// Create visible items container</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">visibleContainer</span> = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">&quot;div&quot;</span>);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">visibleContainer</span>.<span class="hljs-property">style</span>.<span class="hljs-property">position</span> = <span class="hljs-string">&quot;absolute&quot;</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">visibleContainer</span>.<span class="hljs-property">style</span>.<span class="hljs-property">top</span> = <span class="hljs-string">&quot;0&quot;</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">visibleContainer</span>.<span class="hljs-property">style</span>.<span class="hljs-property">width</span> = <span class="hljs-string">&quot;100%&quot;</span>;

    <span class="hljs-variable language_">this</span>.<span class="hljs-property">viewport</span>.<span class="hljs-title function_">appendChild</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">visibleContainer</span>);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">container</span>.<span class="hljs-title function_">appendChild</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">viewport</span>);

    <span class="hljs-comment">// Handle scrolling</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">container</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&quot;scroll&quot;</span>, <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">scrollTop</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">container</span>.<span class="hljs-property">scrollTop</span>;
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">render</span>();
    });

    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">render</span>();
  }

  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) {
    <span class="hljs-keyword">const</span> startIndex = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">scrollTop</span> / <span class="hljs-variable language_">this</span>.<span class="hljs-property">itemHeight</span>);
    <span class="hljs-keyword">const</span> endIndex = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(
      startIndex + <span class="hljs-variable language_">this</span>.<span class="hljs-property">visibleCount</span> + <span class="hljs-number">1</span>,
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>.<span class="hljs-property">length</span>
    );

    <span class="hljs-comment">// Clear current items</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">visibleContainer</span>.<span class="hljs-property">innerHTML</span> = <span class="hljs-string">&quot;&quot;</span>;

    <span class="hljs-comment">// Render visible items</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = startIndex; i &lt; endIndex; i++) {
      <span class="hljs-keyword">const</span> item = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">createItem</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>[i], i);
      item.<span class="hljs-property">style</span>.<span class="hljs-property">position</span> = <span class="hljs-string">&quot;absolute&quot;</span>;
      item.<span class="hljs-property">style</span>.<span class="hljs-property">top</span> = <span class="hljs-string">`<span class="hljs-subst">${i * <span class="hljs-variable language_">this</span>.itemHeight}</span>px`</span>;
      item.<span class="hljs-property">style</span>.<span class="hljs-property">height</span> = <span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.itemHeight}</span>px`</span>;
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">visibleContainer</span>.<span class="hljs-title function_">appendChild</span>(item);
    }
  }

  <span class="hljs-title function_">createItem</span>(<span class="hljs-params">data, index</span>) {
    <span class="hljs-keyword">const</span> item = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">&quot;div&quot;</span>);
    item.<span class="hljs-property">textContent</span> = <span class="hljs-string">`Item <span class="hljs-subst">${index}</span>: <span class="hljs-subst">${data}</span>`</span>;
    item.<span class="hljs-property">style</span>.<span class="hljs-property">border</span> = <span class="hljs-string">&quot;1px solid #ccc&quot;</span>;
    item.<span class="hljs-property">style</span>.<span class="hljs-property">padding</span> = <span class="hljs-string">&quot;10px&quot;</span>;
    <span class="hljs-keyword">return</span> item;
  }
}

<span class="hljs-comment">// Usage for 10,000 items (only renders visible ones)</span>
<span class="hljs-keyword">const</span> items = <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">from</span>({ <span class="hljs-attr">length</span>: <span class="hljs-number">10000</span> }, <span class="hljs-function">(<span class="hljs-params">_, i</span>) =&gt;</span> <span class="hljs-string">`Data <span class="hljs-subst">${i}</span>`</span>);
<span class="hljs-keyword">const</span> virtualList = <span class="hljs-keyword">new</span> <span class="hljs-title class_">VirtualList</span>(
  <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;list-container&quot;</span>),
  items,
  <span class="hljs-number">50</span>, <span class="hljs-comment">// item height</span>
  <span class="hljs-number">20</span> <span class="hljs-comment">// visible count</span>
);
</code></pre></pre>
<h2 id="modern-dom-apis" node="[object Object]">Modern DOM APIs</h2>
<h3 id="intersection-observer" node="[object Object]">Intersection Observer</h3>
<p><strong>Observing element visibility:</strong></p>
<pre><pre><code class="hljs hljs language-javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">VisibilityManager</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">observers</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>();
  }

  <span class="hljs-title function_">observe</span>(<span class="hljs-params">element, callback, options = {}</span>) {
    <span class="hljs-keyword">const</span> defaultOptions = {
      <span class="hljs-attr">root</span>: <span class="hljs-literal">null</span>,
      <span class="hljs-attr">rootMargin</span>: <span class="hljs-string">&quot;0px&quot;</span>,
      <span class="hljs-attr">threshold</span>: <span class="hljs-number">0.1</span>,
    };

    <span class="hljs-keyword">const</span> finalOptions = { ...defaultOptions, ...options };

    <span class="hljs-keyword">const</span> observer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">IntersectionObserver</span>(<span class="hljs-function">(<span class="hljs-params">entries</span>) =&gt;</span> {
      entries.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">entry</span>) =&gt;</span> {
        <span class="hljs-title function_">callback</span>(entry.<span class="hljs-property">target</span>, entry.<span class="hljs-property">isIntersecting</span>, entry);
      });
    }, finalOptions);

    observer.<span class="hljs-title function_">observe</span>(element);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">observers</span>.<span class="hljs-title function_">set</span>(element, observer);

    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">unobserve</span>(element);
  }

  <span class="hljs-title function_">unobserve</span>(<span class="hljs-params">element</span>) {
    <span class="hljs-keyword">const</span> observer = <span class="hljs-variable language_">this</span>.<span class="hljs-property">observers</span>.<span class="hljs-title function_">get</span>(element);
    <span class="hljs-keyword">if</span> (observer) {
      observer.<span class="hljs-title function_">unobserve</span>(element);
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">observers</span>.<span class="hljs-title function_">delete</span>(element);
    }
  }

  <span class="hljs-title function_">disconnect</span>(<span class="hljs-params"></span>) {
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> observer <span class="hljs-keyword">of</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">observers</span>.<span class="hljs-title function_">values</span>()) {
      observer.<span class="hljs-title function_">disconnect</span>();
    }
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">observers</span>.<span class="hljs-title function_">clear</span>();
  }
}

<span class="hljs-comment">// Usage: Lazy loading images</span>
<span class="hljs-keyword">const</span> visibilityManager = <span class="hljs-keyword">new</span> <span class="hljs-title class_">VisibilityManager</span>();

<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelectorAll</span>(<span class="hljs-string">&quot;img[data-src]&quot;</span>).<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">img</span>) =&gt;</span> {
  visibilityManager.<span class="hljs-title function_">observe</span>(img, <span class="hljs-function">(<span class="hljs-params">element, isVisible</span>) =&gt;</span> {
    <span class="hljs-keyword">if</span> (isVisible) {
      element.<span class="hljs-property">src</span> = element.<span class="hljs-property">dataset</span>.<span class="hljs-property">src</span>;
      element.<span class="hljs-title function_">removeAttribute</span>(<span class="hljs-string">&quot;data-src&quot;</span>);
      visibilityManager.<span class="hljs-title function_">unobserve</span>(element);
    }
  });
});
</code></pre></pre>
<h3 id="resizeobserver" node="[object Object]">ResizeObserver</h3>
<p><strong>Responding to element size changes:</strong></p>
<pre><pre><code class="hljs hljs language-javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">ResponsiveComponent</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">element</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">element</span> = element;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">breakpoints</span> = {
      <span class="hljs-attr">small</span>: <span class="hljs-number">300</span>,
      <span class="hljs-attr">medium</span>: <span class="hljs-number">600</span>,
      <span class="hljs-attr">large</span>: <span class="hljs-number">900</span>,
    };

    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">init</span>();
  }

  <span class="hljs-title function_">init</span>(<span class="hljs-params"></span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">resizeObserver</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ResizeObserver</span>(<span class="hljs-function">(<span class="hljs-params">entries</span>) =&gt;</span> {
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> entry <span class="hljs-keyword">of</span> entries) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">handleResize</span>(entry);
      }
    });

    <span class="hljs-variable language_">this</span>.<span class="hljs-property">resizeObserver</span>.<span class="hljs-title function_">observe</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">element</span>);
  }

  <span class="hljs-title function_">handleResize</span>(<span class="hljs-params">entry</span>) {
    <span class="hljs-keyword">const</span> { width } = entry.<span class="hljs-property">contentRect</span>;

    <span class="hljs-comment">// Remove all size classes</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">element</span>.<span class="hljs-property">classList</span>.<span class="hljs-title function_">remove</span>(<span class="hljs-string">&quot;small&quot;</span>, <span class="hljs-string">&quot;medium&quot;</span>, <span class="hljs-string">&quot;large&quot;</span>);

    <span class="hljs-comment">// Add appropriate class based on width</span>
    <span class="hljs-keyword">if</span> (width &lt; <span class="hljs-variable language_">this</span>.<span class="hljs-property">breakpoints</span>.<span class="hljs-property">small</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">element</span>.<span class="hljs-property">classList</span>.<span class="hljs-title function_">add</span>(<span class="hljs-string">&quot;small&quot;</span>);
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (width &lt; <span class="hljs-variable language_">this</span>.<span class="hljs-property">breakpoints</span>.<span class="hljs-property">medium</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">element</span>.<span class="hljs-property">classList</span>.<span class="hljs-title function_">add</span>(<span class="hljs-string">&quot;medium&quot;</span>);
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">element</span>.<span class="hljs-property">classList</span>.<span class="hljs-title function_">add</span>(<span class="hljs-string">&quot;large&quot;</span>);
    }

    <span class="hljs-comment">// Emit custom event</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">element</span>.<span class="hljs-title function_">dispatchEvent</span>(
      <span class="hljs-keyword">new</span> <span class="hljs-title class_">CustomEvent</span>(<span class="hljs-string">&quot;sizeChanged&quot;</span>, {
        <span class="hljs-attr">detail</span>: { width, <span class="hljs-attr">height</span>: entry.<span class="hljs-property">contentRect</span>.<span class="hljs-property">height</span> },
      })
    );
  }

  <span class="hljs-title function_">destroy</span>(<span class="hljs-params"></span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">resizeObserver</span>.<span class="hljs-title function_">disconnect</span>();
  }
}

<span class="hljs-comment">// Usage</span>
<span class="hljs-keyword">const</span> responsiveComponent = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ResponsiveComponent</span>(
  <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;responsive-element&quot;</span>)
);
</code></pre></pre>
<h3 id="mutationobserver" node="[object Object]">MutationObserver</h3>
<p><strong>Watching DOM changes:</strong></p>
<pre><pre><code class="hljs hljs language-javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">DOMWatcher</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">observers</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>();
  }

  <span class="hljs-title function_">watch</span>(<span class="hljs-params">target, callback, options = {}</span>) {
    <span class="hljs-keyword">const</span> defaultOptions = {
      <span class="hljs-attr">childList</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">subtree</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">attributes</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">attributeOldValue</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">characterData</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">characterDataOldValue</span>: <span class="hljs-literal">false</span>,
    };

    <span class="hljs-keyword">const</span> finalOptions = { ...defaultOptions, ...options };

    <span class="hljs-keyword">const</span> observer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MutationObserver</span>(<span class="hljs-function">(<span class="hljs-params">mutations</span>) =&gt;</span> {
      <span class="hljs-title function_">callback</span>(mutations, observer);
    });

    observer.<span class="hljs-title function_">observe</span>(target, finalOptions);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">observers</span>.<span class="hljs-title function_">set</span>(target, observer);

    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">unwatch</span>(target);
  }

  <span class="hljs-title function_">unwatch</span>(<span class="hljs-params">target</span>) {
    <span class="hljs-keyword">const</span> observer = <span class="hljs-variable language_">this</span>.<span class="hljs-property">observers</span>.<span class="hljs-title function_">get</span>(target);
    <span class="hljs-keyword">if</span> (observer) {
      observer.<span class="hljs-title function_">disconnect</span>();
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">observers</span>.<span class="hljs-title function_">delete</span>(target);
    }
  }

  <span class="hljs-title function_">disconnect</span>(<span class="hljs-params"></span>) {
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> observer <span class="hljs-keyword">of</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">observers</span>.<span class="hljs-title function_">values</span>()) {
      observer.<span class="hljs-title function_">disconnect</span>();
    }
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">observers</span>.<span class="hljs-title function_">clear</span>();
  }
}

<span class="hljs-comment">// Usage: Auto-save when content changes</span>
<span class="hljs-keyword">const</span> watcher = <span class="hljs-keyword">new</span> <span class="hljs-title class_">DOMWatcher</span>();

watcher.<span class="hljs-title function_">watch</span>(
  <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;editor&quot;</span>),
  <span class="hljs-function">(<span class="hljs-params">mutations</span>) =&gt;</span> {
    mutations.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">mutation</span>) =&gt;</span> {
      <span class="hljs-keyword">if</span> (mutation.<span class="hljs-property">type</span> === <span class="hljs-string">&quot;childList&quot;</span> || mutation.<span class="hljs-property">type</span> === <span class="hljs-string">&quot;characterData&quot;</span>) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;Content changed, auto-saving...&quot;</span>);
        <span class="hljs-title function_">autoSave</span>();
      }
    });
  },
  {
    <span class="hljs-attr">childList</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">subtree</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">characterData</span>: <span class="hljs-literal">true</span>,
  }
);
</code></pre></pre>
<h2 id="interview-questions-&amp;-answers" node="[object Object]">Interview Questions &amp; Answers</h2>
<h3 id="q1:-what&#x27;s-the-difference-between-,[object-object],,-,[object-object],,-and-,[object-object],?" node="[object Object]">Q1: What&#x27;s the difference between <pre><code class="hljs undefined">innerHTML</code></pre>, <pre><code class="hljs undefined">textContent</code></pre>, and <pre><code class="hljs undefined">innerText</code></pre>?</h3>
<p><strong>Answer:</strong></p>
<p><strong>innerHTML</strong>:</p>
<ul>
<li>Gets/sets HTML content including tags</li>
<li>Parses HTML and creates DOM nodes</li>
<li>Can execute scripts (security risk)</li>
<li>Triggers reflow and repaint</li>
</ul>
<p><strong>textContent</strong>:</p>
<ul>
<li>Gets/sets only text content</li>
<li>Ignores HTML tags</li>
<li>Includes hidden elements</li>
<li>Faster than innerText</li>
</ul>
<p><strong>innerText</strong>:</p>
<ul>
<li>Gets/sets visible text content</li>
<li>Respects styling (hidden elements ignored)</li>
<li>Triggers reflow to calculate visibility</li>
<li>Slower than textContent</li>
</ul>
<pre><pre><code class="hljs hljs language-javascript"><span class="hljs-keyword">const</span> div = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">&quot;div&quot;</span>);
div.<span class="hljs-property">innerHTML</span> =
  <span class="hljs-string">&#x27;&lt;span style=&quot;display:none&quot;&gt;Hidden&lt;/span&gt;&lt;strong&gt;Visible&lt;/strong&gt;&#x27;</span>;

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(div.<span class="hljs-property">innerHTML</span>); <span class="hljs-comment">// &#x27;&lt;span style=&quot;display:none&quot;&gt;Hidden&lt;/span&gt;&lt;strong&gt;Visible&lt;/strong&gt;&#x27;</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(div.<span class="hljs-property">textContent</span>); <span class="hljs-comment">// &#x27;HiddenVisible&#x27;</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(div.<span class="hljs-property">innerText</span>); <span class="hljs-comment">// &#x27;Visible&#x27; (hidden span ignored)</span>
</code></pre></pre>
<h3 id="q2:-explain-event-bubbling-and-capturing-with-an-example." node="[object Object]">Q2: Explain event bubbling and capturing with an example.</h3>
<p><strong>Answer:</strong></p>
<p>Event propagation occurs in three phases:</p>
<ol>
<li><strong>Capturing phase</strong>: Event travels from document to target</li>
<li><strong>Target phase</strong>: Event reaches the target element</li>
<li><strong>Bubbling phase</strong>: Event travels from target back to document</li>
</ol>
<pre><pre><code class="hljs hljs language-html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;outer&quot;</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;inner&quot;</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;button&quot;</span>&gt;</span>Click me<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre></pre>
<pre><pre><code class="hljs hljs language-javascript"><span class="hljs-comment">// Capturing listeners (third parameter = true)</span>
<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;outer&quot;</span>).<span class="hljs-title function_">addEventListener</span>(
  <span class="hljs-string">&quot;click&quot;</span>,
  <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;Outer captured&quot;</span>);
  },
  <span class="hljs-literal">true</span>
);

<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;inner&quot;</span>).<span class="hljs-title function_">addEventListener</span>(
  <span class="hljs-string">&quot;click&quot;</span>,
  <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;Inner captured&quot;</span>);
  },
  <span class="hljs-literal">true</span>
);

<span class="hljs-comment">// Bubbling listeners (default)</span>
<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;button&quot;</span>).<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&quot;click&quot;</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;Button clicked&quot;</span>);
});

<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;inner&quot;</span>).<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&quot;click&quot;</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;Inner bubbled&quot;</span>);
});

<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;outer&quot;</span>).<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&quot;click&quot;</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;Outer bubbled&quot;</span>);
});

<span class="hljs-comment">// When button is clicked, output:</span>
<span class="hljs-comment">// Outer captured</span>
<span class="hljs-comment">// Inner captured</span>
<span class="hljs-comment">// Button clicked</span>
<span class="hljs-comment">// Inner bubbled</span>
<span class="hljs-comment">// Outer bubbled</span>
</code></pre></pre>
<h3 id="q3:-how-would-you-implement-efficient-dom-manipulation-for-adding-1000-elements?" node="[object Object]">Q3: How would you implement efficient DOM manipulation for adding 1000 elements?</h3>
<p><strong>Answer:</strong></p>
<p><strong>Bad approach (causes 1000 reflows):</strong></p>
<pre><pre><code class="hljs hljs language-javascript"><span class="hljs-keyword">const</span> container = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;container&quot;</span>);
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">1000</span>; i++) {
  <span class="hljs-keyword">const</span> div = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">&quot;div&quot;</span>);
  div.<span class="hljs-property">textContent</span> = <span class="hljs-string">`Item <span class="hljs-subst">${i}</span>`</span>;
  container.<span class="hljs-title function_">appendChild</span>(div); <span class="hljs-comment">// Reflow on each append</span>
}
</code></pre></pre>
<p><strong>Good approaches:</strong></p>
<p><strong>1. Document Fragment:</strong></p>
<pre><pre><code class="hljs hljs language-javascript"><span class="hljs-keyword">const</span> container = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;container&quot;</span>);
<span class="hljs-keyword">const</span> fragment = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createDocumentFragment</span>();

<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">1000</span>; i++) {
  <span class="hljs-keyword">const</span> div = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">&quot;div&quot;</span>);
  div.<span class="hljs-property">textContent</span> = <span class="hljs-string">`Item <span class="hljs-subst">${i}</span>`</span>;
  fragment.<span class="hljs-title function_">appendChild</span>(div);
}

container.<span class="hljs-title function_">appendChild</span>(fragment); <span class="hljs-comment">// Single reflow</span>
</code></pre></pre>
<p><strong>2. innerHTML with array join:</strong></p>
<pre><pre><code class="hljs hljs language-javascript"><span class="hljs-keyword">const</span> container = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;container&quot;</span>);
<span class="hljs-keyword">const</span> html = [];

<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">1000</span>; i++) {
  html.<span class="hljs-title function_">push</span>(<span class="hljs-string">`&lt;div&gt;Item <span class="hljs-subst">${i}</span>&lt;/div&gt;`</span>);
}

container.<span class="hljs-property">innerHTML</span> = html.<span class="hljs-title function_">join</span>(<span class="hljs-string">&quot;&quot;</span>); <span class="hljs-comment">// Single reflow</span>
</code></pre></pre>
<p><strong>3. Template strings:</strong></p>
<pre><pre><code class="hljs hljs language-javascript"><span class="hljs-keyword">const</span> container = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;container&quot;</span>);
<span class="hljs-keyword">const</span> items = <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">from</span>({ <span class="hljs-attr">length</span>: <span class="hljs-number">1000</span> }, <span class="hljs-function">(<span class="hljs-params">_, i</span>) =&gt;</span> <span class="hljs-string">`&lt;div&gt;Item <span class="hljs-subst">${i}</span>&lt;/div&gt;`</span>);
container.<span class="hljs-property">innerHTML</span> = items.<span class="hljs-title function_">join</span>(<span class="hljs-string">&quot;&quot;</span>);
</code></pre></pre>
<h3 id="q4:-what-are-the-performance-implications-of-different-dom-querying-methods?" node="[object Object]">Q4: What are the performance implications of different DOM querying methods?</h3>
<p><strong>Answer:</strong></p>
<p><strong>Performance ranking (fastest to slowest):</strong></p>
<ol>
<li><strong>getElementById()</strong> - O(1) hash lookup</li>
</ol>
<pre><pre><code class="hljs hljs language-javascript"><span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;myId&quot;</span>); <span class="hljs-comment">// Fastest</span>
</code></pre></pre>
<ol start="2">
<li><strong>getElementsByTagName()</strong> - Optimized native implementation</li>
</ol>
<pre><pre><code class="hljs hljs language-javascript"><span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementsByTagName</span>(<span class="hljs-string">&quot;div&quot;</span>); <span class="hljs-comment">// Fast, returns live collection</span>
</code></pre></pre>
<ol start="3">
<li><strong>getElementsByClassName()</strong> - Optimized for classes</li>
</ol>
<pre><pre><code class="hljs hljs language-javascript"><span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementsByClassName</span>(<span class="hljs-string">&quot;myClass&quot;</span>); <span class="hljs-comment">// Fast, returns live collection</span>
</code></pre></pre>
<ol start="4">
<li><strong>querySelector()</strong> - CSS selector engine (returns first match)</li>
</ol>
<pre><pre><code class="hljs hljs language-javascript"><span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">&quot;.myClass&quot;</span>); <span class="hljs-comment">// Slower, more flexible</span>
</code></pre></pre>
<ol start="5">
<li><strong>querySelectorAll()</strong> - CSS selector engine (returns all matches)</li>
</ol>
<pre><pre><code class="hljs hljs language-javascript"><span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelectorAll</span>(<span class="hljs-string">&quot;.myClass&quot;</span>); <span class="hljs-comment">// Slowest, most flexible</span>
</code></pre></pre>
<p><strong>Optimization strategies:</strong></p>
<ul>
<li>Cache DOM references</li>
<li>Use specific selectors</li>
<li>Limit scope with context</li>
<li>Prefer native methods for simple selections</li>
</ul>
<h3 id="q5:-how-do-you-prevent-memory-leaks-in-dom-manipulation?" node="[object Object]">Q5: How do you prevent memory leaks in DOM manipulation?</h3>
<p><strong>Answer:</strong></p>
<p><strong>Common causes and solutions:</strong></p>
<p><strong>1. Event listeners not removed:</strong></p>
<pre><pre><code class="hljs hljs language-javascript"><span class="hljs-comment">// PROBLEM: Memory leak</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">attachHandler</span>(<span class="hljs-params"></span>) {
  <span class="hljs-keyword">const</span> button = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;button&quot;</span>);
  <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Array</span>(<span class="hljs-number">1000000</span>); <span class="hljs-comment">// Large data</span>

  button.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&quot;click&quot;</span>, <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(data.<span class="hljs-property">length</span>); <span class="hljs-comment">// Keeps data in memory</span>
  });
}

<span class="hljs-comment">// SOLUTION: Proper cleanup</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">attachHandler</span>(<span class="hljs-params"></span>) {
  <span class="hljs-keyword">const</span> button = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;button&quot;</span>);

  <span class="hljs-keyword">function</span> <span class="hljs-title function_">clickHandler</span>(<span class="hljs-params"></span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;Clicked&quot;</span>);
  }

  button.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&quot;click&quot;</span>, clickHandler);

  <span class="hljs-comment">// Return cleanup function</span>
  <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> {
    button.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">&quot;click&quot;</span>, clickHandler);
  };
}

<span class="hljs-keyword">const</span> cleanup = <span class="hljs-title function_">attachHandler</span>();
<span class="hljs-comment">// Later: cleanup();</span>
</code></pre></pre>
<p><strong>2. Circular references:</strong></p>
<pre><pre><code class="hljs hljs language-javascript"><span class="hljs-comment">// PROBLEM: Circular reference</span>
<span class="hljs-keyword">const</span> element = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;myElement&quot;</span>);
element.<span class="hljs-property">myProperty</span> = {
  <span class="hljs-attr">element</span>: element, <span class="hljs-comment">// Circular reference</span>
  <span class="hljs-attr">data</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Array</span>(<span class="hljs-number">1000000</span>),
};

<span class="hljs-comment">// SOLUTION: Use WeakMap</span>
<span class="hljs-keyword">const</span> elementData = <span class="hljs-keyword">new</span> <span class="hljs-title class_">WeakMap</span>();
elementData.<span class="hljs-title function_">set</span>(element, {
  <span class="hljs-attr">data</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Array</span>(<span class="hljs-number">1000000</span>),
});
<span class="hljs-comment">// When element is removed, data is automatically garbage collected</span>
</code></pre></pre>
<p><strong>3. Detached DOM nodes:</strong></p>
<pre><pre><code class="hljs hljs language-javascript"><span class="hljs-comment">// PROBLEM: References to removed DOM nodes</span>
<span class="hljs-keyword">const</span> cache = [];
<span class="hljs-keyword">function</span> <span class="hljs-title function_">cacheElement</span>(<span class="hljs-params"></span>) {
  <span class="hljs-keyword">const</span> element = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">&quot;.temp&quot;</span>);
  cache.<span class="hljs-title function_">push</span>(element); <span class="hljs-comment">// Keeps element in memory even after removal</span>
}

<span class="hljs-comment">// SOLUTION: Clear references</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">clearCache</span>(<span class="hljs-params"></span>) {
  cache.<span class="hljs-property">length</span> = <span class="hljs-number">0</span>;
}
</code></pre></pre>
<h1 id="additional-advanced-interview-q&amp;a-and-visuals" node="[object Object]">Additional Advanced Interview Q&amp;A and Visuals</h1>
<h2 id="q:-how-do-you-prevent-xss-when-updating-the-dom-with-user-input?" node="[object Object]">Q: How do you prevent XSS when updating the DOM with user input?</h2>
<p><strong>Answer (English):</strong></p>
<ul>
<li>Never use <pre><code class="hljs undefined">innerHTML</code></pre> with untrusted data</li>
<li>Use <pre><code class="hljs undefined">textContent</code></pre> or DOM methods</li>
<li>Sanitize input with libraries (e.g., DOMPurify)</li>
</ul>
<p><strong>Answer (Vietnamese):</strong></p>
<ul>
<li>Không dùng <pre><code class="hljs undefined">innerHTML</code></pre> với dữ liệu không tin cậy</li>
<li>Dùng <pre><code class="hljs undefined">textContent</code></pre> hoặc các phương thức DOM</li>
<li>Làm sạch dữ liệu với thư viện (ví dụ DOMPurify)</li>
</ul>
<hr/>
<h2 id="diagram:-dom-event-propagation-(capture-&amp;-bubble)" node="[object Object]">Diagram: DOM Event Propagation (Capture &amp; Bubble)</h2>
<pre><pre><code class="hljs hljs language-mermaid">sequenceDiagram
  participant Document
  participant OuterDiv
  participant InnerDiv
  participant Button

  Document-&gt;&gt;OuterDiv: Capturing
  OuterDiv-&gt;&gt;InnerDiv: Capturing
  InnerDiv-&gt;&gt;Button: Capturing
  Button--&gt;&gt;InnerDiv: Bubbling
  InnerDiv--&gt;&gt;OuterDiv: Bubbling
  OuterDiv--&gt;&gt;Document: Bubbling
</code></pre></pre>
<hr/>
<h2 id="q:-how-would-you-optimize-rendering-performance-in-a-large-dom-tree?" node="[object Object]">Q: How would you optimize rendering performance in a large DOM tree?</h2>
<p><strong>Answer (English):</strong></p>
<ul>
<li>Minimize reflows by batching DOM changes (use DocumentFragment, innerHTML with join, or requestAnimationFrame)</li>
<li>Use virtual DOM or offscreen rendering for complex UIs</li>
<li>Avoid layout thrashing (read/write DOM in separate phases)</li>
<li>Use efficient selectors and cache references</li>
</ul>
<p><strong>Answer (Vietnamese):</strong></p>
<ul>
<li>Giảm reflow bằng cách gộp thay đổi DOM (dùng DocumentFragment, innerHTML với join, hoặc requestAnimationFrame)</li>
<li>Dùng virtual DOM hoặc render offscreen cho UI phức tạp</li>
<li>Tránh layout thrashing (đọc/ghi DOM ở các phase riêng)</li>
<li>Dùng selector hiệu quả và cache tham chiếu</li>
</ul>
<hr/>
<p>This comprehensive guide covers DOM manipulation from fundamental concepts to advanced optimization techniques, providing the deep understanding needed for senior frontend engineering interviews.</p></div></div></main><footer class="sc-gvqKNf booJNS"><div class="sc-cOpnSz fVoYcP"><div class="sc-kjwdDK kKfrkv"><div class="sc-eVqvcJ inEXDm"><div class="sc-bbbBoY hWhopJ"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-code "><polyline points="16 18 22 12 16 6"></polyline><polyline points="8 6 2 12 8 18"></polyline></svg>Frontend Interview Prep</div><p class="sc-cdmAjP exeTne">Comprehensive interview preparation for frontend engineers targeting Big Tech companies.</p><div class="sc-jytpVa cgXMuV"><a href="https://github.com" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-github "><path d="M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4"></path><path d="M9 18c-4.51 2-5-2-7-2"></path></svg></a><a href="https://twitter.com" aria-label="Twitter"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-twitter "><path d="M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z"></path></svg></a><a href="https://linkedin.com" aria-label="LinkedIn"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-linkedin "><path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"></path><rect width="4" height="12" x="2" y="9"></rect><circle cx="4" cy="4" r="2"></circle></svg></a><a href="mailto:contact@example.com" aria-label="Email"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-mail "><rect width="20" height="16" x="2" y="4" rx="2"></rect><path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"></path></svg></a></div></div><div class="sc-eVqvcJ inEXDm"><h3>Study Materials</h3><ul><li><a href="/algorithms">Algorithms</a></li><li><a href="/react">React &amp; Frontend</a></li><li><a href="/system-design">System Design</a></li><li><a href="/typescript">TypeScript</a></li><li><a href="/performance">Performance</a></li></ul></div><div class="sc-eVqvcJ inEXDm"><h3>Companies</h3><ul><li><a href="/google">Google</a></li><li><a href="/meta">Meta</a></li><li><a href="/amazon">Amazon</a></li><li><a href="/microsoft">Microsoft</a></li><li><a href="/apple">Apple</a></li></ul></div><div class="sc-eVqvcJ inEXDm"><h3>Resources</h3><ul><li><a href="/interview-tips">Interview Tips</a></li><li><a href="/coding-challenges">Coding Challenges</a></li><li><a href="/mock-interviews">Mock Interviews</a></li><li><a href="/blog">Blog</a></li><li><a href="/faq">FAQ</a></li></ul></div></div><div class="sc-eknHtZ iQqwrD"><p class="sc-pYNGo gObJRG">© 2025 Frontend Interview Prep. All rights reserved.</p><div class="sc-cCVJLD eBqBtc"><a href="/privacy">Privacy Policy</a><a href="/terms">Terms of Service</a><a href="/contact">Contact</a></div></div></div></footer></div><script src="/interview/_next/static/chunks/webpack-be7d7df45533bffc.js" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0]);self.__next_f.push([2,null])</script><script>self.__next_f.push([1,"1:HL[\"/interview/_next/static/media/e4af272ccee01ff0-s.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n2:HL[\"/interview/_next/static/css/387024c6a2216908.css\",\"style\"]\n"])</script><script>self.__next_f.push([1,"3:I[2846,[],\"\"]\n5:I[5907,[\"918\",\"static/chunks/918-3273b83890f10546.js\",\"930\",\"static/chunks/930-3262a6c9c5acace4.js\",\"687\",\"static/chunks/app/docs/%5B...slug%5D/page-32962e9542d32755.js\"],\"default\"]\n7:I[4707,[],\"\"]\n9:I[6423,[],\"\"]\na:I[2,[\"918\",\"static/chunks/918-3273b83890f10546.js\",\"710\",\"static/chunks/710-dfaa11b4dff08f8e.js\",\"972\",\"static/chunks/972-011bba60ed155615.js\",\"233\",\"static/chunks/233-3e0c1d820a17eca9.js\",\"185\",\"static/chunks/app/layout-333f4adcd11f8f39.js\"],\"default\",1]\nc:I[1060,[],\"\"]\n6:T93cb,"])</script><script>self.__next_f.push([1,"# DOM Manipulation: Complete Deep Dive\n\n## Table of Contents\n\n- [Understanding the DOM](#understanding-the-dom)\n- [DOM Tree Structure](#dom-tree-structure)\n- [Element Selection Methods](#element-selection-methods)\n- [Creating and Modifying Elements](#creating-and-modifying-elements)\n- [Event System Deep Dive](#event-system-deep-dive)\n- [Performance Optimization](#performance-optimization)\n- [Modern DOM APIs](#modern-dom-apis)\n- [Visual Diagrams](#visual-diagrams)\n- [Best Practices](#best-practices)\n- [Interview Questions \u0026 Answers](#interview-questions--answers)\n- [Advanced Techniques](#advanced-techniques)\n\n## Understanding the DOM\n\n### What is the DOM?\n\nThe **Document Object Model (DOM)** is a programming interface for HTML and XML documents. It represents the document as a tree of objects that can be modified with JavaScript.\n\n#### Key Concepts:\n\n**1. Live Representation**\n\n- The DOM is a **live**, in-memory representation of the document\n- Changes to the DOM immediately affect the rendered page\n- JavaScript can read and modify the DOM in real-time\n\n**2. Object-Oriented Interface**\n\n- Every element, attribute, and piece of text is an **object**\n- Objects have properties and methods for manipulation\n- Follows a hierarchical tree structure\n\n**3. Language-Agnostic API**\n\n- While commonly used with JavaScript, DOM APIs work with any language\n- Standardized by W3C and WHATWG\n- Consistent across different browsers (mostly)\n\n### DOM vs HTML\n\n```html\n\u003c!-- HTML Source Code --\u003e\n\u003chtml\u003e\n  \u003chead\u003e\n    \u003ctitle\u003eMy Page\u003c/title\u003e\n  \u003c/head\u003e\n  \u003cbody\u003e\n    \u003ch1\u003eHello World\u003c/h1\u003e\n    \u003cp\u003eWelcome to my page\u003c/p\u003e\n  \u003c/body\u003e\n\u003c/html\u003e\n```\n\n**HTML**: Static markup language\n**DOM**: Dynamic object representation\n\n```javascript\n// DOM Representation (simplified)\n{\n    nodeType: 9, // DOCUMENT_NODE\n    nodeName: \"#document\",\n    children: [\n        {\n            nodeType: 1, // ELEMENT_NODE\n            nodeName: \"HTML\",\n            children: [\n                {\n                    nodeType: 1,\n                    nodeName: \"HEAD\",\n                    children: [/* title element */]\n                },\n                {\n                    nodeType: 1,\n                    nodeName: \"BODY\",\n                    children: [/* h1 and p elements */]\n                }\n            ]\n        }\n    ]\n}\n```\n\n## DOM Tree Structure\n\n### Node Types and Hierarchy\n\nThe DOM represents documents as a tree of **nodes**:\n\n```\n                    document (Document Node)\n                         │\n                      html (Element Node)\n                    ┌─────┴─────┐\n                 head          body (Element Nodes)\n                   │             │\n               title          ┌───┴───┐\n                 │          h1        p (Element Nodes)\n           \"My Page\"         │        │\n           (Text Node)  \"Hello World\" \"Welcome...\" (Text Nodes)\n```\n\n### Node Types (Complete List)\n\n{% raw %}\n```javascript\n// Node types with their numeric constants\nconst NODE_TYPES = {\n  ELEMENT_NODE: 1, // \u003cdiv\u003e, \u003cspan\u003e, etc.\n  ATTRIBUTE_NODE: 2, // class=\"example\" (deprecated)\n  TEXT_NODE: 3, // Text content\n  CDATA_SECTION_NODE: 4, // \u003c![CDATA[...]]\u003e\n  ENTITY_REFERENCE_NODE: 5, // \u0026amp; (deprecated)\n  ENTITY_NODE: 6, // (deprecated)\n  PROCESSING_INSTRUCTION_NODE: 7, // \u003c?xml-stylesheet ... ?\u003e\n  COMMENT_NODE: 8, // \u003c!-- comment --\u003e\n  DOCUMENT_NODE: 9, // document\n  DOCUMENT_TYPE_NODE: 10, // \u003c!DOCTYPE html\u003e\n  DOCUMENT_FRAGMENT_NODE: 11, // document.createDocumentFragment()\n  NOTATION_NODE: 12, // (deprecated)\n};\n\n// Example usage\nfunction analyzeNode(node) {\n  switch (node.nodeType) {\n    case Node.ELEMENT_NODE:\n      console.log(`Element: ${node.tagName}`);\n      break;\n    case Node.TEXT_NODE:\n      console.log(`Text: \"${node.textContent}\"`);\n      break;\n    case Node.COMMENT_NODE:\n      console.log(`Comment: ${node.textContent}`);\n      break;\n    default:\n      console.log(`Other node type: ${node.nodeType}`);\n  }\n}\n```\n{% endraw %}\n\n### Node Properties and Relationships\n\nEvery DOM node has properties that describe its relationships:\n\n```javascript\n// Node relationship properties\nconst element = document.getElementById(\"myElement\");\n\n// Parent relationships\nelement.parentNode; // Immediate parent (any node type)\nelement.parentElement; // Parent element (null if parent isn't element)\n\n// Child relationships\nelement.childNodes; // All child nodes (including text, comments)\nelement.children; // Only child elements\nelement.firstChild; // First child node\nelement.lastChild; // Last child node\nelement.firstElementChild; // First child element\nelement.lastElementChild; // Last child element\n\n// Sibling relationships\nelement.nextSibling; // Next sibling node\nelement.previousSibling; // Previous sibling node\nelement.nextElementSibling; // Next sibling element\nelement.previousElementSibling; // Previous sibling element\n\n// Document relationships\nelement.ownerDocument; // Reference to document\nelement.getRootNode(); // Root node (document or shadow root)\n```\n\n### Detailed Tree Navigation Example\n\n```html\n\u003cdiv id=\"container\"\u003e\n  \u003c!-- This is a comment --\u003e\n  \u003ch1\u003eTitle\u003c/h1\u003e\n  Some text content\n  \u003cp\u003eParagraph\u003c/p\u003e\n  \u003cspan\u003eSpan element\u003c/span\u003e\n\u003c/div\u003e\n```\n\n```javascript\nconst container = document.getElementById(\"container\");\n\n// Understanding childNodes vs children\nconsole.log(container.childNodes.length); // 7 (includes text nodes and comment)\nconsole.log(container.children.length); // 3 (only h1, p, span elements)\n\n// Iterating through all nodes\nfor (let node of container.childNodes) {\n  if (node.nodeType === Node.ELEMENT_NODE) {\n    console.log(`Element: ${node.tagName}`);\n  } else if (node.nodeType === Node.TEXT_NODE) {\n    const text = node.textContent.trim();\n    if (text) console.log(`Text: \"${text}\"`);\n  } else if (node.nodeType === Node.COMMENT_NODE) {\n    console.log(`Comment: ${node.textContent}`);\n  }\n}\n\n// Output:\n// Comment: This is a comment\n// Element: H1\n// Text: \"Some text content\"\n// Element: P\n// Element: SPAN\n```\n\n## Element Selection Methods\n\n### Performance Comparison of Selection Methods\n\n```javascript\n// Performance ranking (fastest to slowest)\n// 1. getElementById - O(1) hash lookup\nconst element = document.getElementById(\"myId\");\n\n// 2. getElementsByTagName - optimized native implementation\nconst paragraphs = document.getElementsByTagName(\"p\");\n\n// 3. getElementsByClassName - optimized for class selection\nconst highlighted = document.getElementsByClassName(\"highlight\");\n\n// 4. querySelector - flexible but slower for simple selections\nconst firstParagraph = document.querySelector(\"p\");\n\n// 5. querySelectorAll - most flexible but slowest\nconst allParagraphs = document.querySelectorAll(\"p\");\n```\n\n### Advanced Selector Strategies\n\n**1. Context-Specific Selection**\n\n```javascript\n// Instead of searching entire document\nconst expensiveSearch = document.querySelectorAll(\".item .title\");\n\n// Search within a specific container\nconst container = document.getElementById(\"itemContainer\");\nconst efficientSearch = container.querySelectorAll(\".title\");\n\n// Even better: use more specific selectors\nconst verySpecific = document.querySelectorAll(\n  \"#itemContainer \u003e .item \u003e .title\"\n);\n```\n\n**2. Live vs Static Collections**\n\n```javascript\n// Live collections (automatically update)\nconst liveCollection = document.getElementsByClassName(\"dynamic\");\nconsole.log(liveCollection.length); // 3\n\n// Add new element with class 'dynamic'\nconst newElement = document.createElement(\"div\");\nnewElement.className = \"dynamic\";\ndocument.body.appendChild(newElement);\n\nconsole.log(liveCollection.length); // 4 (automatically updated!)\n\n// Static collections (snapshot at query time)\nconst staticCollection = document.querySelectorAll(\".dynamic\");\nconsole.log(staticCollection.length); // 3 (doesn't change)\n```\n\n**3. Custom Selection Utilities**\n\n```javascript\nclass DOMSelector {\n  // Enhanced getElementById with error handling\n  static byId(id, context = document) {\n    const element = context.getElementById(id);\n    if (!element) {\n      console.warn(`Element with id \"${id}\" not found`);\n    }\n    return element;\n  }\n\n  // Get element with data attribute\n  static byData(attribute, value, context = document) {\n    return context.querySelector(`[data-${attribute}=\"${value}\"]`);\n  }\n\n  // Get all elements matching multiple classes\n  static byClasses(classes, context = document) {\n    const selector = classes.map((cls) =\u003e `.${cls}`).join(\"\");\n    return context.querySelectorAll(selector);\n  }\n\n  // Get closest ancestor matching selector\n  static closest(element, selector) {\n    return element.closest(selector);\n  }\n\n  // Get all descendants matching selector\n  static descendants(element, selector) {\n    return element.querySelectorAll(selector);\n  }\n\n  // Check if element matches selector\n  static matches(element, selector) {\n    return element.matches(selector);\n  }\n}\n\n// Usage examples\nconst header = DOMSelector.byId(\"header\");\nconst dataElement = DOMSelector.byData(\"role\", \"button\");\nconst multiClass = DOMSelector.byClasses([\"btn\", \"primary\"]);\nconst parentSection = DOMSelector.closest(button, \"section\");\n```\n\n## Creating and Modifying Elements\n\n### Element Creation Patterns\n\n**1. Basic Element Creation**\n\n```javascript\n// Create element\nconst div = document.createElement(\"div\");\n\n// Set attributes\ndiv.id = \"myDiv\";\ndiv.className = \"container highlight\";\ndiv.setAttribute(\"data-role\", \"content\");\n\n// Set content\ndiv.textContent = \"Hello World\";\ndiv.innerHTML = \"\u003cstrong\u003eBold text\u003c/strong\u003e\";\n\n// Append to document\ndocument.body.appendChild(div);\n```\n\n**2. Advanced Element Factory**\n\n```javascript\nclass ElementFactory {\n  static create(tagName, options = {}) {\n    const element = document.createElement(tagName);\n\n    // Set attributes\n    if (options.attributes) {\n      Object.entries(options.attributes).forEach(([key, value]) =\u003e {\n        element.setAttribute(key, value);\n      });\n    }\n\n    // Set properties\n    if (options.properties) {\n      Object.assign(element, options.properties);\n    }\n\n    // Set styles\n    if (options.styles) {\n      Object.assign(element.style, options.styles);\n    }\n\n    // Set content\n    if (options.textContent) {\n      element.textContent = options.textContent;\n    } else if (options.innerHTML) {\n      element.innerHTML = options.innerHTML;\n    }\n\n    // Add event listeners\n    if (options.events) {\n      Object.entries(options.events).forEach(([event, handler]) =\u003e {\n        element.addEventListener(event, handler);\n      });\n    }\n\n    // Add children\n    if (options.children) {\n      options.children.forEach((child) =\u003e {\n        if (typeof child === \"string\") {\n          element.appendChild(document.createTextNode(child));\n        } else {\n          element.appendChild(child);\n        }\n      });\n    }\n\n    return element;\n  }\n\n  // Specialized creation methods\n  static button(text, onClick, className = \"btn\") {\n    return this.create(\"button\", {\n      textContent: text,\n      properties: { className },\n      events: { click: onClick },\n    });\n  }\n\n  static input(type, placeholder, name) {\n    return this.create(\"input\", {\n      attributes: { type, placeholder, name },\n    });\n  }\n\n  static div(className, content) {\n    return this.create(\"div\", {\n      properties: { className },\n      innerHTML: content,\n    });\n  }\n}\n\n// Usage\nconst button = ElementFactory.button(\"Click me\", () =\u003e alert(\"Clicked!\"));\nconst input = ElementFactory.input(\"text\", \"Enter name...\", \"username\");\nconst container = ElementFactory.div(\"form-container\", \"\");\n\ncontainer.appendChild(input);\ncontainer.appendChild(button);\ndocument.body.appendChild(container);\n```\n\n### Document Fragments for Performance\n\n**Problem: Multiple DOM Manipulations**\n\n```javascript\n// SLOW: Each appendChild causes reflow\nconst container = document.getElementById(\"container\");\nfor (let i = 0; i \u003c 1000; i++) {\n  const div = document.createElement(\"div\");\n  div.textContent = `Item ${i}`;\n  container.appendChild(div); // Reflow on each iteration!\n}\n```\n\n**Solution: Document Fragment**\n\n```javascript\n// FAST: Only one reflow at the end\nconst container = document.getElementById(\"container\");\nconst fragment = document.createDocumentFragment();\n\nfor (let i = 0; i \u003c 1000; i++) {\n  const div = document.createElement(\"div\");\n  div.textContent = `Item ${i}`;\n  fragment.appendChild(div); // No reflow\n}\n\ncontainer.appendChild(fragment); // Single reflow\n```\n\n**Advanced Fragment Usage**\n\n```javascript\nclass DOMBatchProcessor {\n  constructor() {\n    this.fragment = document.createDocumentFragment();\n    this.operations = [];\n  }\n\n  // Queue element creation\n  createElement(tagName, options = {}) {\n    const element = ElementFactory.create(tagName, options);\n    this.fragment.appendChild(element);\n    return element;\n  }\n\n  // Queue existing element\n  addElement(element) {\n    this.fragment.appendChild(element);\n    return this;\n  }\n\n  // Commit all changes at once\n  commitTo(container) {\n    container.appendChild(this.fragment);\n    this.fragment = document.createDocumentFragment(); // Reset\n    return this;\n  }\n\n  // Create multiple similar elements\n  createMultiple(count, tagName, optionsGenerator) {\n    for (let i = 0; i \u003c count; i++) {\n      const options =\n        typeof optionsGenerator === \"function\"\n          ? optionsGenerator(i)\n          : optionsGenerator;\n      this.createElement(tagName, options);\n    }\n    return this;\n  }\n}\n\n// Usage\nconst processor = new DOMBatchProcessor();\n\nprocessor\n  .createMultiple(100, \"div\", (index) =\u003e ({\n    textContent: `Item ${index}`,\n    properties: { className: \"list-item\" },\n    attributes: { \"data-index\": index },\n  }))\n  .commitTo(document.getElementById(\"list\"));\n```\n\n## Event System Deep Dive\n\n### Event Flow: Capturing, Target, Bubbling\n\n```\nEvent Flow Phases:\n\nPhase 1: CAPTURING (top-down)\n┌─────────────────────────────────────┐\n│            document                 │\n│  ┌─────────────────────────────┐    │\n│  │           html              │ ←──┼── Event travels down\n│  │  ┌─────────────────────┐    │    │\n│  │  │        body         │ ←──┼────┤\n│  │  │  ┌─────────────┐    │    │    │\n│  │  │  │    div      │ ←──┼────┼────┤\n│  │  │  │  ┌─────┐    │    │    │    │\n│  │  │  │  │ btn │ ←──┼────┼────┼────┘\n│  │  │  │  └─────┘    │    │    │\n│  │  │  └─────────────┘    │    │\n│  │  └─────────────────────┘    │\n│  └─────────────────────────────┘\n└─────────────────────────────────────┘\n\nPhase 2: TARGET\nButton receives the event\n\nPhase 3: BUBBLING (bottom-up)\n┌─────────────────────────────────────┐\n│            document                 │\n│  ┌─────────────────────────────┐    │\n│  │           html              │ ←──┼── Event bubbles up\n│  │  ┌─────────────────────┐    │    │\n│  │  │        body         │ ←──┼────┤\n│  │  │  ┌─────────────┐    │    │    │\n│  │  │  │    div      │ ←──┼────┼────┤\n│  │  │  │  ┌─────┐    │    │    │    │\n│  │  │  │  │ btn │ ←──┼────┼────┼────┘\n│  │  │  │  └─────┘    │    │    │\n│  │  │  └─────────────┘    │    │\n│  │  └─────────────────────┘    │\n│  └─────────────────────────────┘\n└─────────────────────────────────────┘\n```\n\n### Event Handling Patterns\n\n**1. Event Delegation**\n\n```javascript\n// Instead of adding listeners to many elements\ndocument.querySelectorAll(\".button\").forEach((button) =\u003e {\n  button.addEventListener(\"click\", handleButtonClick); // Many listeners\n});\n\n// Use event delegation on parent\ndocument.getElementById(\"container\").addEventListener(\"click\", function (e) {\n  if (e.target.matches(\".button\")) {\n    handleButtonClick(e);\n  }\n});\n\n// Advanced event delegation\nclass EventDelegator {\n  constructor(container) {\n    this.container =\n      typeof container === \"string\"\n        ? document.querySelector(container)\n        : container;\n    this.handlers = new Map();\n\n    // Single listener for all events\n    this.container.addEventListener(\"click\", this.handleClick.bind(this));\n    this.container.addEventListener(\"change\", this.handleChange.bind(this));\n    this.container.addEventListener(\"input\", this.handleInput.bind(this));\n  }\n\n  // Register handler for specific selector\n  on(eventType, selector, handler) {\n    if (!this.handlers.has(eventType)) {\n      this.handlers.set(eventType, new Map());\n    }\n    this.handlers.get(eventType).set(selector, handler);\n    return this;\n  }\n\n  // Handle delegated events\n  handleEvent(e) {\n    const eventHandlers = this.handlers.get(e.type);\n    if (!eventHandlers) return;\n\n    // Check each selector\n    for (const [selector, handler] of eventHandlers) {\n      const target = e.target.closest(selector);\n      if (target \u0026\u0026 this.container.contains(target)) {\n        handler.call(target, e);\n        break; // Stop at first match\n      }\n    }\n  }\n\n  handleClick(e) {\n    this.handleEvent(e);\n  }\n  handleChange(e) {\n    this.handleEvent(e);\n  }\n  handleInput(e) {\n    this.handleEvent(e);\n  }\n}\n\n// Usage\nconst delegator = new EventDelegator(\"#app\");\n\ndelegator\n  .on(\"click\", \".btn\", function (e) {\n    console.log(\"Button clicked:\", this.textContent);\n  })\n  .on(\"click\", \".link\", function (e) {\n    e.preventDefault();\n    console.log(\"Link clicked:\", this.href);\n  })\n  .on(\"input\", \".search\", function (e) {\n    console.log(\"Search input:\", this.value);\n  });\n```\n\n**2. Custom Event System**\n\n```javascript\nclass CustomEventEmitter {\n  constructor(element) {\n    this.element = element;\n    this.listeners = new Map();\n  }\n\n  // Emit custom event\n  emit(eventType, detail = null) {\n    const event = new CustomEvent(eventType, {\n      detail,\n      bubbles: true,\n      cancelable: true,\n    });\n\n    this.element.dispatchEvent(event);\n    return event;\n  }\n\n  // Listen for custom events\n  on(eventType, handler, options = {}) {\n    this.element.addEventListener(eventType, handler, options);\n\n    // Store for cleanup\n    if (!this.listeners.has(eventType)) {\n      this.listeners.set(eventType, new Set());\n    }\n    this.listeners.get(eventType).add(handler);\n\n    return this;\n  }\n\n  // Remove specific listener\n  off(eventType, handler) {\n    this.element.removeEventListener(eventType, handler);\n\n    if (this.listeners.has(eventType)) {\n      this.listeners.get(eventType).delete(handler);\n    }\n\n    return this;\n  }\n\n  // Remove all listeners for event type\n  offAll(eventType) {\n    if (this.listeners.has(eventType)) {\n      for (const handler of this.listeners.get(eventType)) {\n        this.element.removeEventListener(eventType, handler);\n      }\n      this.listeners.delete(eventType);\n    }\n\n    return this;\n  }\n\n  // Cleanup all listeners\n  destroy() {\n    for (const [eventType, handlers] of this.listeners) {\n      for (const handler of handlers) {\n        this.element.removeEventListener(eventType, handler);\n      }\n    }\n    this.listeners.clear();\n  }\n}\n\n// Usage\nconst emitter = new CustomEventEmitter(document.getElementById(\"myComponent\"));\n\n// Listen for custom events\nemitter.on(\"dataLoaded\", (e) =\u003e {\n  console.log(\"Data loaded:\", e.detail);\n});\n\nemitter.on(\"statusChanged\", (e) =\u003e {\n  console.log(\"Status changed:\", e.detail.status);\n});\n\n// Emit custom events\nemitter.emit(\"dataLoaded\", { data: [1, 2, 3] });\nemitter.emit(\"statusChanged\", { status: \"ready\" });\n```\n\n### Event Performance Optimization\n\n**1. Throttling and Debouncing Events**\n\n```javascript\nclass EventOptimizer {\n  static throttle(func, limit) {\n    let inThrottle;\n    return function () {\n      const args = arguments;\n      const context = this;\n      if (!inThrottle) {\n        func.apply(context, args);\n        inThrottle = true;\n        setTimeout(() =\u003e (inThrottle = false), limit);\n      }\n    };\n  }\n\n  static debounce(func, delay) {\n    let timeoutId;\n    return function () {\n      const args = arguments;\n      const context = this;\n      clearTimeout(timeoutId);\n      timeoutId = setTimeout(() =\u003e func.apply(context, args), delay);\n    };\n  }\n\n  // Smart event optimization\n  static optimize(element, eventType, handler, options = {}) {\n    const { throttle, debounce, passive = true } = options;\n\n    let optimizedHandler = handler;\n\n    if (throttle) {\n      optimizedHandler = this.throttle(handler, throttle);\n    } else if (debounce) {\n      optimizedHandler = this.debounce(handler, debounce);\n    }\n\n    element.addEventListener(eventType, optimizedHandler, { passive });\n\n    return () =\u003e element.removeEventListener(eventType, optimizedHandler);\n  }\n}\n\n// Usage\nconst scrollHandler = EventOptimizer.optimize(\n  window,\n  \"scroll\",\n  () =\u003e console.log(\"Scrolled!\"),\n  { throttle: 100, passive: true }\n);\n\nconst searchHandler = EventOptimizer.optimize(\n  document.getElementById(\"search\"),\n  \"input\",\n  (e) =\u003e performSearch(e.target.value),\n  { debounce: 300 }\n);\n```\n\n## Performance Optimization\n\n### Reflow and Repaint Optimization\n\n**Understanding Browser Rendering Pipeline:**\n\n```\n1. Layout (Reflow) - Calculate positions and dimensions\n2. Paint - Fill in pixels for each element\n3. Composite - Combine layers for final image\n```\n\n**Properties that trigger reflows:**\n\n- `width`, `height`, `margin`, `padding`\n- `border`, `position`, `top`, `left`\n- `font-size`, `line-height`\n- `display`, `float`\n\n**Properties that only trigger repaints:**\n\n- `color`, `background-color`\n- `visibility`\n- `outline`\n\n**Properties that only trigger composite:**\n\n- `transform`, `opacity`\n- `filter`\n\n**Optimization Strategies:**\n\n**1. Batch DOM Reads and Writes**\n\n```javascript\n// BAD: Causes multiple reflows\nfunction badExample() {\n  const element = document.getElementById(\"myDiv\");\n\n  element.style.height = \"100px\"; // Write - triggers reflow\n  const height = element.offsetHeight; // Read - forces reflow\n\n  element.style.width = \"200px\"; // Write - triggers reflow\n  const width = element.offsetWidth; // Read - forces reflow\n}\n\n// GOOD: Batch reads and writes\nfunction goodExample() {\n  const element = document.getElementById(\"myDiv\");\n\n  // Batch all reads first\n  const currentHeight = element.offsetHeight;\n  const currentWidth = element.offsetWidth;\n\n  // Then batch all writes\n  element.style.height = \"100px\";\n  element.style.width = \"200px\";\n}\n```\n\n**2. Use CSS Classes Instead of Inline Styles**\n\n```javascript\n// BAD: Multiple style changes\nelement.style.width = \"200px\";\nelement.style.height = \"100px\";\nelement.style.backgroundColor = \"red\";\nelement.style.border = \"1px solid black\";\n\n// GOOD: Single class change\nelement.className = \"optimized-style\";\n```\n\n**3. Virtualization for Large Lists**\n\n```javascript\nclass VirtualList {\n  constructor(container, items, itemHeight, visibleCount) {\n    this.container = container;\n    this.items = items;\n    this.itemHeight = itemHeight;\n    this.visibleCount = visibleCount;\n    this.scrollTop = 0;\n\n    this.init();\n  }\n\n  init() {\n    // Create container for all items (sets scroll height)\n    this.totalHeight = this.items.length * this.itemHeight;\n    this.container.style.height = `${this.visibleCount * this.itemHeight}px`;\n    this.container.style.overflow = \"auto\";\n\n    // Create viewport\n    this.viewport = document.createElement(\"div\");\n    this.viewport.style.height = `${this.totalHeight}px`;\n    this.viewport.style.position = \"relative\";\n\n    // Create visible items container\n    this.visibleContainer = document.createElement(\"div\");\n    this.visibleContainer.style.position = \"absolute\";\n    this.visibleContainer.style.top = \"0\";\n    this.visibleContainer.style.width = \"100%\";\n\n    this.viewport.appendChild(this.visibleContainer);\n    this.container.appendChild(this.viewport);\n\n    // Handle scrolling\n    this.container.addEventListener(\"scroll\", () =\u003e {\n      this.scrollTop = this.container.scrollTop;\n      this.render();\n    });\n\n    this.render();\n  }\n\n  render() {\n    const startIndex = Math.floor(this.scrollTop / this.itemHeight);\n    const endIndex = Math.min(\n      startIndex + this.visibleCount + 1,\n      this.items.length\n    );\n\n    // Clear current items\n    this.visibleContainer.innerHTML = \"\";\n\n    // Render visible items\n    for (let i = startIndex; i \u003c endIndex; i++) {\n      const item = this.createItem(this.items[i], i);\n      item.style.position = \"absolute\";\n      item.style.top = `${i * this.itemHeight}px`;\n      item.style.height = `${this.itemHeight}px`;\n      this.visibleContainer.appendChild(item);\n    }\n  }\n\n  createItem(data, index) {\n    const item = document.createElement(\"div\");\n    item.textContent = `Item ${index}: ${data}`;\n    item.style.border = \"1px solid #ccc\";\n    item.style.padding = \"10px\";\n    return item;\n  }\n}\n\n// Usage for 10,000 items (only renders visible ones)\nconst items = Array.from({ length: 10000 }, (_, i) =\u003e `Data ${i}`);\nconst virtualList = new VirtualList(\n  document.getElementById(\"list-container\"),\n  items,\n  50, // item height\n  20 // visible count\n);\n```\n\n## Modern DOM APIs\n\n### Intersection Observer\n\n**Observing element visibility:**\n\n```javascript\nclass VisibilityManager {\n  constructor() {\n    this.observers = new Map();\n  }\n\n  observe(element, callback, options = {}) {\n    const defaultOptions = {\n      root: null,\n      rootMargin: \"0px\",\n      threshold: 0.1,\n    };\n\n    const finalOptions = { ...defaultOptions, ...options };\n\n    const observer = new IntersectionObserver((entries) =\u003e {\n      entries.forEach((entry) =\u003e {\n        callback(entry.target, entry.isIntersecting, entry);\n      });\n    }, finalOptions);\n\n    observer.observe(element);\n    this.observers.set(element, observer);\n\n    return () =\u003e this.unobserve(element);\n  }\n\n  unobserve(element) {\n    const observer = this.observers.get(element);\n    if (observer) {\n      observer.unobserve(element);\n      this.observers.delete(element);\n    }\n  }\n\n  disconnect() {\n    for (const observer of this.observers.values()) {\n      observer.disconnect();\n    }\n    this.observers.clear();\n  }\n}\n\n// Usage: Lazy loading images\nconst visibilityManager = new VisibilityManager();\n\ndocument.querySelectorAll(\"img[data-src]\").forEach((img) =\u003e {\n  visibilityManager.observe(img, (element, isVisible) =\u003e {\n    if (isVisible) {\n      element.src = element.dataset.src;\n      element.removeAttribute(\"data-src\");\n      visibilityManager.unobserve(element);\n    }\n  });\n});\n```\n\n### ResizeObserver\n\n**Responding to element size changes:**\n\n```javascript\nclass ResponsiveComponent {\n  constructor(element) {\n    this.element = element;\n    this.breakpoints = {\n      small: 300,\n      medium: 600,\n      large: 900,\n    };\n\n    this.init();\n  }\n\n  init() {\n    this.resizeObserver = new ResizeObserver((entries) =\u003e {\n      for (const entry of entries) {\n        this.handleResize(entry);\n      }\n    });\n\n    this.resizeObserver.observe(this.element);\n  }\n\n  handleResize(entry) {\n    const { width } = entry.contentRect;\n\n    // Remove all size classes\n    this.element.classList.remove(\"small\", \"medium\", \"large\");\n\n    // Add appropriate class based on width\n    if (width \u003c this.breakpoints.small) {\n      this.element.classList.add(\"small\");\n    } else if (width \u003c this.breakpoints.medium) {\n      this.element.classList.add(\"medium\");\n    } else {\n      this.element.classList.add(\"large\");\n    }\n\n    // Emit custom event\n    this.element.dispatchEvent(\n      new CustomEvent(\"sizeChanged\", {\n        detail: { width, height: entry.contentRect.height },\n      })\n    );\n  }\n\n  destroy() {\n    this.resizeObserver.disconnect();\n  }\n}\n\n// Usage\nconst responsiveComponent = new ResponsiveComponent(\n  document.getElementById(\"responsive-element\")\n);\n```\n\n### MutationObserver\n\n**Watching DOM changes:**\n\n```javascript\nclass DOMWatcher {\n  constructor() {\n    this.observers = new Map();\n  }\n\n  watch(target, callback, options = {}) {\n    const defaultOptions = {\n      childList: true,\n      subtree: false,\n      attributes: false,\n      attributeOldValue: false,\n      characterData: false,\n      characterDataOldValue: false,\n    };\n\n    const finalOptions = { ...defaultOptions, ...options };\n\n    const observer = new MutationObserver((mutations) =\u003e {\n      callback(mutations, observer);\n    });\n\n    observer.observe(target, finalOptions);\n    this.observers.set(target, observer);\n\n    return () =\u003e this.unwatch(target);\n  }\n\n  unwatch(target) {\n    const observer = this.observers.get(target);\n    if (observer) {\n      observer.disconnect();\n      this.observers.delete(target);\n    }\n  }\n\n  disconnect() {\n    for (const observer of this.observers.values()) {\n      observer.disconnect();\n    }\n    this.observers.clear();\n  }\n}\n\n// Usage: Auto-save when content changes\nconst watcher = new DOMWatcher();\n\nwatcher.watch(\n  document.getElementById(\"editor\"),\n  (mutations) =\u003e {\n    mutations.forEach((mutation) =\u003e {\n      if (mutation.type === \"childList\" || mutation.type === \"characterData\") {\n        console.log(\"Content changed, auto-saving...\");\n        autoSave();\n      }\n    });\n  },\n  {\n    childList: true,\n    subtree: true,\n    characterData: true,\n  }\n);\n```\n\n## Interview Questions \u0026 Answers\n\n### Q1: What's the difference between `innerHTML`, `textContent`, and `innerText`?\n\n**Answer:**\n\n**innerHTML**:\n\n- Gets/sets HTML content including tags\n- Parses HTML and creates DOM nodes\n- Can execute scripts (security risk)\n- Triggers reflow and repaint\n\n**textContent**:\n\n- Gets/sets only text content\n- Ignores HTML tags\n- Includes hidden elements\n- Faster than innerText\n\n**innerText**:\n\n- Gets/sets visible text content\n- Respects styling (hidden elements ignored)\n- Triggers reflow to calculate visibility\n- Slower than textContent\n\n```javascript\nconst div = document.createElement(\"div\");\ndiv.innerHTML =\n  '\u003cspan style=\"display:none\"\u003eHidden\u003c/span\u003e\u003cstrong\u003eVisible\u003c/strong\u003e';\n\nconsole.log(div.innerHTML); // '\u003cspan style=\"display:none\"\u003eHidden\u003c/span\u003e\u003cstrong\u003eVisible\u003c/strong\u003e'\nconsole.log(div.textContent); // 'HiddenVisible'\nconsole.log(div.innerText); // 'Visible' (hidden span ignored)\n```\n\n### Q2: Explain event bubbling and capturing with an example.\n\n**Answer:**\n\nEvent propagation occurs in three phases:\n\n1. **Capturing phase**: Event travels from document to target\n2. **Target phase**: Event reaches the target element\n3. **Bubbling phase**: Event travels from target back to document\n\n```html\n\u003cdiv id=\"outer\"\u003e\n  \u003cdiv id=\"inner\"\u003e\n    \u003cbutton id=\"button\"\u003eClick me\u003c/button\u003e\n  \u003c/div\u003e\n\u003c/div\u003e\n```\n\n```javascript\n// Capturing listeners (third parameter = true)\ndocument.getElementById(\"outer\").addEventListener(\n  \"click\",\n  () =\u003e {\n    console.log(\"Outer captured\");\n  },\n  true\n);\n\ndocument.getElementById(\"inner\").addEventListener(\n  \"click\",\n  () =\u003e {\n    console.log(\"Inner captured\");\n  },\n  true\n);\n\n// Bubbling listeners (default)\ndocument.getElementById(\"button\").addEventListener(\"click\", () =\u003e {\n  console.log(\"Button clicked\");\n});\n\ndocument.getElementById(\"inner\").addEventListener(\"click\", () =\u003e {\n  console.log(\"Inner bubbled\");\n});\n\ndocument.getElementById(\"outer\").addEventListener(\"click\", () =\u003e {\n  console.log(\"Outer bubbled\");\n});\n\n// When button is clicked, output:\n// Outer captured\n// Inner captured\n// Button clicked\n// Inner bubbled\n// Outer bubbled\n```\n\n### Q3: How would you implement efficient DOM manipulation for adding 1000 elements?\n\n**Answer:**\n\n**Bad approach (causes 1000 reflows):**\n\n```javascript\nconst container = document.getElementById(\"container\");\nfor (let i = 0; i \u003c 1000; i++) {\n  const div = document.createElement(\"div\");\n  div.textContent = `Item ${i}`;\n  container.appendChild(div); // Reflow on each append\n}\n```\n\n**Good approaches:**\n\n**1. Document Fragment:**\n\n```javascript\nconst container = document.getElementById(\"container\");\nconst fragment = document.createDocumentFragment();\n\nfor (let i = 0; i \u003c 1000; i++) {\n  const div = document.createElement(\"div\");\n  div.textContent = `Item ${i}`;\n  fragment.appendChild(div);\n}\n\ncontainer.appendChild(fragment); // Single reflow\n```\n\n**2. innerHTML with array join:**\n\n```javascript\nconst container = document.getElementById(\"container\");\nconst html = [];\n\nfor (let i = 0; i \u003c 1000; i++) {\n  html.push(`\u003cdiv\u003eItem ${i}\u003c/div\u003e`);\n}\n\ncontainer.innerHTML = html.join(\"\"); // Single reflow\n```\n\n**3. Template strings:**\n\n```javascript\nconst container = document.getElementById(\"container\");\nconst items = Array.from({ length: 1000 }, (_, i) =\u003e `\u003cdiv\u003eItem ${i}\u003c/div\u003e`);\ncontainer.innerHTML = items.join(\"\");\n```\n\n### Q4: What are the performance implications of different DOM querying methods?\n\n**Answer:**\n\n**Performance ranking (fastest to slowest):**\n\n1. **getElementById()** - O(1) hash lookup\n\n```javascript\ndocument.getElementById(\"myId\"); // Fastest\n```\n\n2. **getElementsByTagName()** - Optimized native implementation\n\n```javascript\ndocument.getElementsByTagName(\"div\"); // Fast, returns live collection\n```\n\n3. **getElementsByClassName()** - Optimized for classes\n\n```javascript\ndocument.getElementsByClassName(\"myClass\"); // Fast, returns live collection\n```\n\n4. **querySelector()** - CSS selector engine (returns first match)\n\n```javascript\ndocument.querySelector(\".myClass\"); // Slower, more flexible\n```\n\n5. **querySelectorAll()** - CSS selector engine (returns all matches)\n\n```javascript\ndocument.querySelectorAll(\".myClass\"); // Slowest, most flexible\n```\n\n**Optimization strategies:**\n\n- Cache DOM references\n- Use specific selectors\n- Limit scope with context\n- Prefer native methods for simple selections\n\n### Q5: How do you prevent memory leaks in DOM manipulation?\n\n**Answer:**\n\n**Common causes and solutions:**\n\n**1. Event listeners not removed:**\n\n```javascript\n// PROBLEM: Memory leak\nfunction attachHandler() {\n  const button = document.getElementById(\"button\");\n  const data = new Array(1000000); // Large data\n\n  button.addEventListener(\"click\", function () {\n    console.log(data.length); // Keeps data in memory\n  });\n}\n\n// SOLUTION: Proper cleanup\nfunction attachHandler() {\n  const button = document.getElementById(\"button\");\n\n  function clickHandler() {\n    console.log(\"Clicked\");\n  }\n\n  button.addEventListener(\"click\", clickHandler);\n\n  // Return cleanup function\n  return () =\u003e {\n    button.removeEventListener(\"click\", clickHandler);\n  };\n}\n\nconst cleanup = attachHandler();\n// Later: cleanup();\n```\n\n**2. Circular references:**\n\n```javascript\n// PROBLEM: Circular reference\nconst element = document.getElementById(\"myElement\");\nelement.myProperty = {\n  element: element, // Circular reference\n  data: new Array(1000000),\n};\n\n// SOLUTION: Use WeakMap\nconst elementData = new WeakMap();\nelementData.set(element, {\n  data: new Array(1000000),\n});\n// When element is removed, data is automatically garbage collected\n```\n\n**3. Detached DOM nodes:**\n\n```javascript\n// PROBLEM: References to removed DOM nodes\nconst cache = [];\nfunction cacheElement() {\n  const element = document.querySelector(\".temp\");\n  cache.push(element); // Keeps element in memory even after removal\n}\n\n// SOLUTION: Clear references\nfunction clearCache() {\n  cache.length = 0;\n}\n```\n\n# Additional Advanced Interview Q\u0026A and Visuals\n\n## Q: How do you prevent XSS when updating the DOM with user input?\n\n**Answer (English):**\n\n- Never use `innerHTML` with untrusted data\n- Use `textContent` or DOM methods\n- Sanitize input with libraries (e.g., DOMPurify)\n\n**Answer (Vietnamese):**\n\n- Không dùng `innerHTML` với dữ liệu không tin cậy\n- Dùng `textContent` hoặc các phương thức DOM\n- Làm sạch dữ liệu với thư viện (ví dụ DOMPurify)\n\n---\n\n## Diagram: DOM Event Propagation (Capture \u0026 Bubble)\n\n```mermaid\nsequenceDiagram\n  participant Document\n  participant OuterDiv\n  participant InnerDiv\n  participant Button\n\n  Document-\u003e\u003eOuterDiv: Capturing\n  OuterDiv-\u003e\u003eInnerDiv: Capturing\n  InnerDiv-\u003e\u003eButton: Capturing\n  Button--\u003e\u003eInnerDiv: Bubbling\n  InnerDiv--\u003e\u003eOuterDiv: Bubbling\n  OuterDiv--\u003e\u003eDocument: Bubbling\n```\n\n---\n\n## Q: How would you optimize rendering performance in a large DOM tree?\n\n**Answer (English):**\n\n- Minimize reflows by batching DOM changes (use DocumentFragment, innerHTML with join, or requestAnimationFrame)\n- Use virtual DOM or offscreen rendering for complex UIs\n- Avoid layout thrashing (read/write DOM in separate phases)\n- Use efficient selectors and cache references\n\n**Answer (Vietnamese):**\n\n- Giảm reflow bằng cách gộp thay đổi DOM (dùng DocumentFragment, innerHTML với join, hoặc requestAnimationFrame)\n- Dùng virtual DOM hoặc render offscreen cho UI phức tạp\n- Tránh layout thrashing (đọc/ghi DOM ở các phase riêng)\n- Dùng selector hiệu quả và cache tham chiếu\n\n---\n\nThis comprehensive guide covers DOM manipulation from fundamental concepts to advanced optimization techniques, providing the deep understanding needed for senior frontend engineering interviews.\n"])</script><script>self.__next_f.push([1,"8:[\"slug\",\"frontend/fundamentals/dom-manipulation-deep-dive\",\"c\"]\nd:[]\n"])</script><script>self.__next_f.push([1,"0:[\"$\",\"$L3\",null,{\"buildId\":\"7uJ7BVaXJTiEOD9iYDv3n\",\"assetPrefix\":\"/interview\",\"urlParts\":[\"\",\"docs\",\"frontend\",\"fundamentals\",\"dom-manipulation-deep-dive\"],\"initialTree\":[\"\",{\"children\":[\"docs\",{\"children\":[[\"slug\",\"frontend/fundamentals/dom-manipulation-deep-dive\",\"c\"],{\"children\":[\"__PAGE__?{\\\"slug\\\":[\\\"frontend\\\",\\\"fundamentals\\\",\\\"dom-manipulation-deep-dive\\\"]}\",{}]}]}]},\"$undefined\",\"$undefined\",true],\"initialSeedData\":[\"\",{\"children\":[\"docs\",{\"children\":[[\"slug\",\"frontend/fundamentals/dom-manipulation-deep-dive\",\"c\"],{\"children\":[\"__PAGE__\",{},[[\"$L4\",[\"$\",\"div\",null,{\"style\":{\"maxWidth\":\"1200px\",\"margin\":\"0 auto\",\"padding\":\"2rem\",\"paddingTop\":\"6rem\"},\"children\":[[\"$\",\"div\",null,{\"style\":{\"marginBottom\":\"2rem\"},\"children\":[[\"$\",\"nav\",null,{\"style\":{\"color\":\"#64748b\",\"fontSize\":\"0.9rem\",\"marginBottom\":\"1rem\"},\"children\":[[\"$\",\"a\",null,{\"href\":\"/\",\"style\":{\"color\":\"#3b82f6\",\"textDecoration\":\"none\"},\"children\":\"Home\"}],\" \u003e \",[\"$\",\"span\",null,{\"children\":\"frontend \u003e fundamentals \u003e dom-manipulation-deep-dive\"}]]}],[\"$\",\"h1\",null,{\"style\":{\"fontSize\":\"2.5rem\",\"fontWeight\":\"800\",\"marginBottom\":\"0.5rem\",\"color\":\"#1e293b\"},\"children\":\"Dom Manipulation Deep Dive\"}],[\"$\",\"div\",null,{\"style\":{\"color\":\"#64748b\",\"fontSize\":\"0.9rem\",\"marginBottom\":\"2rem\"},\"children\":[[\"$\",\"span\",null,{\"children\":[\"📁 \",\"frontend/fundamentals/dom-manipulation-deep-dive.md\"]}],\"$undefined\",\"$undefined\"]}]]}],[\"$\",\"$L5\",null,{\"content\":\"$6\"}]]}],null],null],null]},[null,[\"$\",\"$L7\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"docs\",\"children\",\"$8\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L9\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\"}]],null]},[null,[\"$\",\"$L7\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"docs\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L9\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\"}]],null]},[[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/interview/_next/static/css/387024c6a2216908.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\"}]],[\"$\",\"$La\",null,{\"children\":[\"$\",\"$L7\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L9\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":\"404\"}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]],\"notFoundStyles\":[]}],\"params\":{}}]],null],null],\"couldBeIntercepted\":false,\"initialHead\":[null,\"$Lb\"],\"globalErrorComponent\":\"$c\",\"missingSlots\":\"$Wd\"}]\n"])</script><script>self.__next_f.push([1,"b:[[\"$\",\"meta\",\"0\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}],[\"$\",\"meta\",\"1\",{\"charSet\":\"utf-8\"}],[\"$\",\"title\",\"2\",{\"children\":\"Dom Manipulation Deep Dive - Frontend Interview Docs\"}],[\"$\",\"meta\",\"3\",{\"name\":\"description\",\"content\":\"# DOM Manipulation: Complete Deep Dive  ## Table of Contents  - [Understanding the DOM](#understanding-the-dom) - [DOM Tree Structure](#dom-tree-structure) - [E\"}],[\"$\",\"meta\",\"4\",{\"property\":\"og:title\",\"content\":\"Dom Manipulation Deep Dive - Frontend Interview Docs\"}],[\"$\",\"meta\",\"5\",{\"property\":\"og:description\",\"content\":\"# DOM Manipulation: Complete Deep Dive  ## Table of Contents  - [Understanding the DOM](#understanding-the-dom) - [DOM Tree Structure](#dom-tree-structure) - [E\"}],[\"$\",\"meta\",\"6\",{\"property\":\"og:type\",\"content\":\"article\"}],[\"$\",\"meta\",\"7\",{\"name\":\"twitter:card\",\"content\":\"summary\"}],[\"$\",\"meta\",\"8\",{\"name\":\"twitter:title\",\"content\":\"Dom Manipulation Deep Dive - Frontend Interview Docs\"}],[\"$\",\"meta\",\"9\",{\"name\":\"twitter:description\",\"content\":\"# DOM Manipulation: Complete Deep Dive  ## Table of Contents  - [Understanding the DOM](#understanding-the-dom) - [DOM Tree Structure](#dom-tree-structure) - [E\"}],[\"$\",\"meta\",\"10\",{\"name\":\"next-size-adjust\"}]]\n4:null\n"])</script></body></html>