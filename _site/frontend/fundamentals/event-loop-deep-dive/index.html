<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JavaScript Event Loop: Complete Deep Dive | Frontend Interview Preparation Guide</title>
    <meta name="description" content="Comprehensive frontend interview materials for Big Tech companies">
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
    
    <!-- Styles -->
    <link rel="stylesheet" href="/assets/css/main.css">
</head>
<body>
    <!-- Navigation -->
    <header>
        <nav class="container">
            <div class="logo">Frontend Interview Hub</div>
            <button class="mobile-menu-toggle" aria-label="Toggle navigation menu" aria-expanded="false">
                <span aria-hidden="true">☰</span>
            </button>
            <ul class="nav-links" role="navigation" aria-label="Main navigation">
                <li><a href="/">Home</a></li>
                <li><a href="#progress">Progress</a></li>
                <li><a href="#knowledge">Knowledge</a></li>
                <li><a href="https://github.com/nee/interview" target="_blank" rel="noopener">GitHub</a></li>
            </ul>
        </nav>
    </header>

    <!-- Main Content -->
    <main>
        <div class="content-container">
    
        <nav class="breadcrumb">
            <ol>
                <li><a href="/">Home</a></li>
                
                
                
                    
                
                    
                        
                        
                            <li><a href="/frontend/">Frontend</a></li>
                        
                    
                
                    
                        
                        
                            <li><a href="/frontend/fundamentals/">Fundamentals</a></li>
                        
                    
                
                    
                        
                        
                            <li class="active">Javascript event loop: complete deep dive</li>
                        
                    
                
            </ol>
        </nav>
    
    
    <article class="content">
        
            <header class="content-header">
                <h1 class="content-title">JavaScript Event Loop: Complete Deep Dive</h1>
                
                
            </header>
        
        
        <div class="content-body">
            <h1 id="javascript-event-loop-complete-deep-dive">JavaScript Event Loop: Complete Deep Dive</h1>

<h2 id="table-of-contents">Table of Contents</h2>

<ul>
  <li><a href="#understanding-the-event-loop">Understanding the Event Loop</a></li>
  <li><a href="#call-stack-fundamentals">Call Stack Fundamentals</a></li>
  <li><a href="#web-apis-and-browser-environment">Web APIs and Browser Environment</a></li>
  <li><a href="#task-queue-vs-microtask-queue">Task Queue vs Microtask Queue</a></li>
  <li><a href="#event-loop-phases">Event Loop Phases</a></li>
  <li><a href="#visual-diagrams">Visual Diagrams</a></li>
  <li><a href="#common-misconceptions">Common Misconceptions</a></li>
  <li><a href="#performance-implications">Performance Implications</a></li>
  <li><a href="#interview-questions--answers">Interview Questions &amp; Answers</a></li>
  <li><a href="#practical-examples">Practical Examples</a></li>
</ul>

<h2 id="understanding-the-event-loop">Understanding the Event Loop</h2>

<h3 id="what-is-the-event-loop">What is the Event Loop?</h3>

<p>The <strong>Event Loop</strong> is the fundamental mechanism that allows JavaScript to perform asynchronous operations despite being a single-threaded language. It’s the coordination system between the JavaScript engine and the browser’s Web APIs.</p>

<h4 id="key-concepts">Key Concepts:</h4>

<p><strong>1. Single-Threaded Nature</strong></p>

<ul>
  <li>JavaScript has only <strong>one call stack</strong></li>
  <li>Only <strong>one thing can happen at a time</strong></li>
  <li>But it can handle <strong>asynchronous operations</strong> through the event loop</li>
</ul>

<p><strong>2. Non-Blocking I/O</strong></p>

<ul>
  <li>Long-running operations don’t freeze the UI</li>
  <li>Callbacks are scheduled for later execution</li>
  <li>Maintains responsive user interfaces</li>
</ul>

<p><strong>3. Concurrency Model</strong></p>

<ul>
  <li>JavaScript achieves concurrency through the event loop</li>
  <li>Multiple operations can be <strong>initiated</strong> simultaneously</li>
  <li>But they’re <strong>executed</strong> one at a time</li>
</ul>

<h3 id="the-big-picture-architecture">The Big Picture Architecture</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
</pre></td><td class="rouge-code"><pre>┌─────────────────────────────────────────────────────┐
│                 BROWSER ENVIRONMENT                 │
├─────────────────────────────────────────────────────┤
│  JavaScript Engine (V8, SpiderMonkey, etc.)        │
│  ┌─────────────┐  ┌─────────────┐                  │
│  │    Heap     │  │ Call Stack  │                  │
│  │   Memory    │  │             │                  │
│  │ Allocation  │  │ Execution   │                  │
│  └─────────────┘  │ Context     │                  │
│                   └─────────────┘                  │
├─────────────────────────────────────────────────────┤
│                  WEB APIs                           │
│  DOM APIs │ HTTP │ Timers │ Geolocation │ etc.     │
├─────────────────────────────────────────────────────┤
│              TASK QUEUES                            │
│  ┌─────────────┐  ┌─────────────┐                  │
│  │  Callback   │  │ Microtask   │                  │
│  │   Queue     │  │   Queue     │                  │
│  │(Macrotasks) │  │(Promises)   │                  │
│  └─────────────┘  └─────────────┘                  │
└─────────────────────────────────────────────────────┘
              ↑
        EVENT LOOP
</pre></td></tr></tbody></table></code></pre></div></div>

<h2 id="call-stack-fundamentals">Call Stack Fundamentals</h2>

<h3 id="how-the-call-stack-works">How the Call Stack Works</h3>

<p>The <strong>Call Stack</strong> is a LIFO (Last In, First Out) data structure that keeps track of function calls.</p>

<h4 id="stack-operations">Stack Operations:</h4>

<p><strong>1. Function Call (Push)</strong></p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
</pre></td><td class="rouge-code"><pre><span class="kd">function</span> <span class="nx">first</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">First function</span><span class="dl">"</span><span class="p">);</span>
  <span class="nx">second</span><span class="p">();</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">second</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Second function</span><span class="dl">"</span><span class="p">);</span>
  <span class="nx">third</span><span class="p">();</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">third</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Third function</span><span class="dl">"</span><span class="p">);</span>
<span class="p">}</span>

<span class="nx">first</span><span class="p">();</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><strong>Call Stack Visualization:</strong></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
</pre></td><td class="rouge-code"><pre>Step 1: first() called
┌─────────────┐
│   first()   │
└─────────────┘

Step 2: second() called from first()
┌─────────────┐
│  second()   │
├─────────────┤
│   first()   │
└─────────────┘

Step 3: third() called from second()
┌─────────────┐
│   third()   │
├─────────────┤
│  second()   │
├─────────────┤
│   first()   │
└─────────────┘

Step 4: third() completes (Pop)
┌─────────────┐
│  second()   │
├─────────────┤
│   first()   │
└─────────────┘

Step 5: second() completes (Pop)
┌─────────────┐
│   first()   │
└─────────────┘

Step 6: first() completes (Pop)
┌─────────────┐
│    Empty    │
└─────────────┘
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="stack-overflow">Stack Overflow</h3>

<p>When the call stack exceeds its limit:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="rouge-code"><pre><span class="kd">function</span> <span class="nx">recursiveFunction</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">recursiveFunction</span><span class="p">();</span> <span class="c1">// Infinite recursion</span>
<span class="p">}</span>

<span class="nx">recursiveFunction</span><span class="p">();</span> <span class="c1">// RangeError: Maximum call stack size exceeded</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><strong>Prevention Strategies:</strong></p>

<ul>
  <li>Use iterative solutions when possible</li>
  <li>Implement proper base cases in recursion</li>
  <li>Use setTimeout for deep recursion to break stack</li>
</ul>

<h2 id="web-apis-and-browser-environment">Web APIs and Browser Environment</h2>

<h3 id="what-are-web-apis">What are Web APIs?</h3>

<p>Web APIs are browser-provided interfaces that allow JavaScript to interact with browser features asynchronously.</p>

<h4 id="common-web-apis">Common Web APIs:</h4>

<p><strong>1. Timer APIs</strong></p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="rouge-code"><pre><span class="c1">// setTimeout - executes after delay</span>
<span class="nx">setTimeout</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Timer callback</span><span class="dl">"</span><span class="p">),</span> <span class="mi">1000</span><span class="p">);</span>

<span class="c1">// setInterval - executes repeatedly</span>
<span class="nx">setInterval</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Interval callback</span><span class="dl">"</span><span class="p">),</span> <span class="mi">1000</span><span class="p">);</span>

<span class="c1">// setImmediate (Node.js)</span>
<span class="nx">setImmediate</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Immediate callback</span><span class="dl">"</span><span class="p">));</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><strong>2. DOM APIs</strong></p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="rouge-code"><pre><span class="c1">// Event listeners</span>
<span class="nb">document</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="dl">"</span><span class="s2">click</span><span class="dl">"</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Click handled</span><span class="dl">"</span><span class="p">);</span>
<span class="p">});</span>

<span class="c1">// DOM manipulation</span>
<span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="dl">"</span><span class="s2">button</span><span class="dl">"</span><span class="p">).</span><span class="nx">onclick</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Button clicked</span><span class="dl">"</span><span class="p">);</span>
<span class="p">};</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><strong>3. Network APIs</strong></p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre></td><td class="rouge-code"><pre><span class="c1">// Fetch API</span>
<span class="nx">fetch</span><span class="p">(</span><span class="dl">"</span><span class="s2">/api/data</span><span class="dl">"</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">((</span><span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">response</span><span class="p">.</span><span class="nx">json</span><span class="p">())</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">((</span><span class="nx">data</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">));</span>

<span class="c1">// XMLHttpRequest</span>
<span class="kd">const</span> <span class="nx">xhr</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">XMLHttpRequest</span><span class="p">();</span>
<span class="nx">xhr</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span><span class="dl">"</span><span class="s2">GET</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">/api/data</span><span class="dl">"</span><span class="p">);</span>
<span class="nx">xhr</span><span class="p">.</span><span class="nx">onload</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">xhr</span><span class="p">.</span><span class="nx">responseText</span><span class="p">);</span>
<span class="nx">xhr</span><span class="p">.</span><span class="nx">send</span><span class="p">();</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="how-web-apis-work">How Web APIs Work</h3>

<p>When you call a Web API:</p>

<ol>
  <li><strong>Delegation</strong>: JavaScript delegates the operation to the browser</li>
  <li><strong>Continuation</strong>: JavaScript continues executing other code</li>
  <li><strong>Completion</strong>: Browser completes the operation</li>
  <li><strong>Callback</strong>: Browser places callback in appropriate queue</li>
</ol>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre></td><td class="rouge-code"><pre><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Start</span><span class="dl">"</span><span class="p">);</span>

<span class="nx">setTimeout</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Timer callback</span><span class="dl">"</span><span class="p">);</span>
<span class="p">},</span> <span class="mi">0</span><span class="p">);</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">End</span><span class="dl">"</span><span class="p">);</span>

<span class="c1">// Output:</span>
<span class="c1">// Start</span>
<span class="c1">// End</span>
<span class="c1">// Timer callback</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h2 id="task-queue-vs-microtask-queue">Task Queue vs Microtask Queue</h2>

<h3 id="understanding-queues">Understanding Queues</h3>

<p>The Event Loop manages two main types of queues with different priorities:</p>

<h4 id="1-macrotask-queue-task-queue">1. Macrotask Queue (Task Queue)</h4>

<ul>
  <li><strong>Lower priority</strong></li>
  <li>Processed <strong>after</strong> microtasks</li>
  <li><strong>Sources</strong>: setTimeout, setInterval, I/O operations, UI events</li>
</ul>

<h4 id="2-microtask-queue">2. Microtask Queue</h4>

<ul>
  <li><strong>Higher priority</strong></li>
  <li>Processed <strong>before</strong> macrotasks</li>
  <li><strong>Sources</strong>: Promises, queueMicrotask, MutationObserver</li>
</ul>

<h3 id="priority-system">Priority System</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre>Event Loop Priority (High to Low):
1. Call Stack (currently executing)
2. Microtask Queue (Promises, queueMicrotask)
3. Macrotask Queue (setTimeout, DOM events)
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="visual-representation">Visual Representation</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre></td><td class="rouge-code"><pre>┌─────────────────────────────────────────────────────┐
│                EVENT LOOP CYCLE                     │
│                                                     │
│  1. Execute Call Stack to completion                │
│  2. Process ALL Microtasks                          │
│  3. Process ONE Macrotask                           │
│  4. Process ALL Microtasks (again)                  │
│  5. Render (if needed)                              │
│  6. Repeat                                          │
│                                                     │
└─────────────────────────────────────────────────────┘
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="detailed-example">Detailed Example</h3>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
</pre></td><td class="rouge-code"><pre><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">1: Start</span><span class="dl">"</span><span class="p">);</span>

<span class="nx">setTimeout</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">2: setTimeout</span><span class="dl">"</span><span class="p">),</span> <span class="mi">0</span><span class="p">);</span>

<span class="nb">Promise</span><span class="p">.</span><span class="nx">resolve</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">3: Promise 1</span><span class="dl">"</span><span class="p">))</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">4: Promise 2</span><span class="dl">"</span><span class="p">));</span>

<span class="nx">queueMicrotask</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">5: queueMicrotask</span><span class="dl">"</span><span class="p">));</span>

<span class="nx">setTimeout</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">6: setTimeout 2</span><span class="dl">"</span><span class="p">),</span> <span class="mi">0</span><span class="p">);</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">7: End</span><span class="dl">"</span><span class="p">);</span>

<span class="c1">// Execution Order:</span>
<span class="c1">// 1: Start</span>
<span class="c1">// 7: End</span>
<span class="c1">// 3: Promise 1</span>
<span class="c1">// 5: queueMicrotask</span>
<span class="c1">// 4: Promise 2</span>
<span class="c1">// 2: setTimeout</span>
<span class="c1">// 6: setTimeout 2</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><strong>Step-by-Step Breakdown:</strong></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
</pre></td><td class="rouge-code"><pre>Initial State:
Call Stack: [main()]
Microtask Queue: []
Macrotask Queue: []

After console.log('1: Start'):
Call Stack: [main()]
Microtask Queue: []
Macrotask Queue: []
Output: "1: Start"

After setTimeout:
Call Stack: [main()]
Microtask Queue: []
Macrotask Queue: [setTimeout callback]

After Promise.resolve():
Call Stack: [main()]
Microtask Queue: [Promise callback]
Macrotask Queue: [setTimeout callback]

After queueMicrotask:
Call Stack: [main()]
Microtask Queue: [Promise callback, queueMicrotask callback]
Macrotask Queue: [setTimeout callback]

After second setTimeout:
Call Stack: [main()]
Microtask Queue: [Promise callback, queueMicrotask callback]
Macrotask Queue: [setTimeout callback, setTimeout callback 2]

After console.log('7: End'):
Call Stack: [main()]
Microtask Queue: [Promise callback, queueMicrotask callback]
Macrotask Queue: [setTimeout callback, setTimeout callback 2]
Output: "1: Start", "7: End"

Main function completes - Call Stack empty
Process Microtasks:
- Execute Promise callback → "3: Promise 1"
- Execute queueMicrotask callback → "5: queueMicrotask"
- Promise.then adds new microtask
- Execute Promise 2 callback → "4: Promise 2"

All Microtasks processed, process ONE Macrotask:
- Execute first setTimeout → "2: setTimeout"

Check for Microtasks (none), process next Macrotask:
- Execute second setTimeout → "6: setTimeout 2"
</pre></td></tr></tbody></table></code></pre></div></div>

<h2 id="event-loop-phases">Event Loop Phases</h2>

<h3 id="detailed-event-loop-algorithm">Detailed Event Loop Algorithm</h3>

<p>The Event Loop operates in phases:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
</pre></td><td class="rouge-code"><pre>┌───────────────────────────┐
┌─&gt;│           timers          │  ← setTimeout, setInterval callbacks
│  └─────────────┬─────────────┘
│  ┌─────────────┴─────────────┐
│  │     pending callbacks     │  ← I/O callbacks (except close, timers, setImmediate)
│  └─────────────┬─────────────┘
│  ┌─────────────┴─────────────┐
│  │       idle, prepare       │  ← Internal use only
│  └─────────────┬─────────────┘
│  ┌─────────────┴─────────────┐
│  │           poll            │  ← Fetch new I/O events; execute I/O callbacks
│  └─────────────┬─────────────┘
│  ┌─────────────┴─────────────┐
│  │           check           │  ← setImmediate callbacks
│  └─────────────┬─────────────┘
│  ┌─────────────┴─────────────┐
└──┤      close callbacks      │  ← close event callbacks
   └───────────────────────────┘
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="browser-event-loop-vs-nodejs">Browser Event Loop vs Node.js</h3>

<p><strong>Browser Event Loop:</strong></p>

<ul>
  <li>Simpler model</li>
  <li>Focuses on user interaction</li>
  <li>Microtasks processed after each macrotask</li>
</ul>

<p><strong>Node.js Event Loop:</strong></p>

<ul>
  <li>More complex with phases</li>
  <li>Handles I/O efficiently</li>
  <li>Different microtask timing</li>
</ul>

<h2 id="visual-diagrams">Visual Diagrams</h2>

<h3 id="complete-event-loop-flow">Complete Event Loop Flow</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
</pre></td><td class="rouge-code"><pre>┌─────────────────────────────────────────────────────────────────┐
│                        JAVASCRIPT RUNTIME                       │
│                                                                 │
│  ┌─────────────┐    ┌─────────────────────────────────────────┐ │
│  │    HEAP     │    │             CALL STACK                 │ │
│  │             │    │                                        │ │
│  │   Objects   │    │  ┌─────────────────────────────────┐   │ │
│  │  Memory     │    │  │        function()               │   │ │
│  │             │    │  └─────────────────────────────────┘   │ │
│  │             │    │  ┌─────────────────────────────────┐   │ │
│  │             │    │  │        function()               │   │ │
│  │             │    │  └─────────────────────────────────┘   │ │
│  │             │    │  ┌─────────────────────────────────┐   │ │
│  │             │    │  │         main()                  │   │ │
│  │             │    │  └─────────────────────────────────┘   │ │
│  └─────────────┘    └─────────────────────────────────────────┘ │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
                                   │
                                   ▼
┌─────────────────────────────────────────────────────────────────┐
│                          WEB APIs                               │
│                                                                 │
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────────────────┐  │
│  │    DOM      │  │   Network   │  │        Timers           │  │
│  │   Events    │  │    APIs     │  │    setTimeout()         │  │
│  │             │  │   fetch()   │  │    setInterval()        │  │
│  └─────────────┘  └─────────────┘  └─────────────────────────┘  │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
                                   │
                                   ▼
┌─────────────────────────────────────────────────────────────────┐
│                        TASK QUEUES                             │
│                                                                 │
│  ┌─────────────────────────────┐  ┌─────────────────────────┐   │
│  │      MICROTASK QUEUE        │  │     MACROTASK QUEUE     │   │
│  │      (High Priority)        │  │     (Low Priority)      │   │
│  │                             │  │                         │   │
│  │  ┌─────────────────────┐    │  │  ┌─────────────────┐    │   │
│  │  │ Promise.then()      │    │  │  │ setTimeout()    │    │   │
│  │  └─────────────────────┘    │  │  └─────────────────┘    │   │
│  │  ┌─────────────────────┐    │  │  ┌─────────────────┐    │   │
│  │  │ queueMicrotask()    │    │  │  │ DOM Events      │    │   │
│  │  └─────────────────────┘    │  │  └─────────────────┘    │   │
│  │  ┌─────────────────────┐    │  │  ┌─────────────────┐    │   │
│  │  │ async/await         │    │  │  │ I/O Operations  │    │   │
│  │  └─────────────────────┘    │  │  └─────────────────┘    │   │
│  └─────────────────────────────┘  └─────────────────────────┘   │
└─────────────────────────────────────────────────────────────────┘
                                   ▲
                                   │
                         ┌─────────────────┐
                         │   EVENT LOOP    │
                         │                 │
                         │  1. Check Stack │
                         │  2. Microtasks  │
                         │  3. Macrotasks  │
                         │  4. Render      │
                         │  5. Repeat      │
                         └─────────────────┘
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="promise-vs-settimeout-timing">Promise vs setTimeout Timing</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
</pre></td><td class="rouge-code"><pre>Timeline: Promise vs setTimeout Execution

Time: 0ms
┌─────────────────────────────────────────────────────────────┐
│ console.log('start')                                        │
│ setTimeout(() =&gt; console.log('timeout'), 0)                │
│ Promise.resolve().then(() =&gt; console.log('promise'))       │
│ console.log('end')                                          │
└─────────────────────────────────────────────────────────────┘

Call Stack:     [main]
Microtasks:     []
Macrotasks:     []
Output:         "start"

Time: 1ms
┌─────────────────────────────────────────────────────────────┐
│ setTimeout callback queued                                  │
└─────────────────────────────────────────────────────────────┘

Call Stack:     [main]
Microtasks:     []
Macrotasks:     [setTimeout callback]
Output:         "start"

Time: 2ms
┌─────────────────────────────────────────────────────────────┐
│ Promise callback queued                                     │
└─────────────────────────────────────────────────────────────┘

Call Stack:     [main]
Microtasks:     [Promise callback]
Macrotasks:     [setTimeout callback]
Output:         "start"

Time: 3ms
┌─────────────────────────────────────────────────────────────┐
│ console.log('end') executed                                 │
└─────────────────────────────────────────────────────────────┘

Call Stack:     [main]
Microtasks:     [Promise callback]
Macrotasks:     [setTimeout callback]
Output:         "start", "end"

Time: 4ms - main() completes
┌─────────────────────────────────────────────────────────────┐
│ Call stack empty - Process microtasks first                │
└─────────────────────────────────────────────────────────────┘

Call Stack:     []
Microtasks:     [Promise callback] → Execute
Macrotasks:     [setTimeout callback]
Output:         "start", "end", "promise"

Time: 5ms
┌─────────────────────────────────────────────────────────────┐
│ All microtasks done - Process one macrotask                │
└─────────────────────────────────────────────────────────────┘

Call Stack:     []
Microtasks:     []
Macrotasks:     [setTimeout callback] → Execute
Output:         "start", "end", "promise", "timeout"
</pre></td></tr></tbody></table></code></pre></div></div>

<h2 id="common-misconceptions">Common Misconceptions</h2>

<h3 id="misconception-1-settimeoutfn-0-executes-immediately">Misconception 1: “setTimeout(fn, 0) executes immediately”</h3>

<p><strong>Reality</strong>: setTimeout(fn, 0) schedules execution for the next event loop cycle.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="rouge-code"><pre><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">1</span><span class="dl">"</span><span class="p">);</span>
<span class="nx">setTimeout</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">2</span><span class="dl">"</span><span class="p">),</span> <span class="mi">0</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">3</span><span class="dl">"</span><span class="p">);</span>

<span class="c1">// Output: 1, 3, 2 (not 1, 2, 3)</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="misconception-2-promises-are-synchronous">Misconception 2: “Promises are synchronous”</h3>

<p><strong>Reality</strong>: Promise callbacks are asynchronous microtasks.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="rouge-code"><pre><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">1</span><span class="dl">"</span><span class="p">);</span>
<span class="nb">Promise</span><span class="p">.</span><span class="nx">resolve</span><span class="p">().</span><span class="nx">then</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">2</span><span class="dl">"</span><span class="p">));</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">3</span><span class="dl">"</span><span class="p">);</span>

<span class="c1">// Output: 1, 3, 2</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="misconception-3-all-async-operations-are-the-same-priority">Misconception 3: “All async operations are the same priority”</h3>

<p><strong>Reality</strong>: Microtasks have higher priority than macrotasks.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="rouge-code"><pre><span class="nx">setTimeout</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">setTimeout</span><span class="dl">"</span><span class="p">),</span> <span class="mi">0</span><span class="p">);</span>
<span class="nb">Promise</span><span class="p">.</span><span class="nx">resolve</span><span class="p">().</span><span class="nx">then</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Promise</span><span class="dl">"</span><span class="p">));</span>
<span class="nx">queueMicrotask</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">queueMicrotask</span><span class="dl">"</span><span class="p">));</span>

<span class="c1">// Output: Promise, queueMicrotask, setTimeout</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h2 id="performance-implications">Performance Implications</h2>

<h3 id="blocking-the-event-loop">Blocking the Event Loop</h3>

<p><strong>Long-running synchronous operations block everything:</strong></p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre></td><td class="rouge-code"><pre><span class="c1">// BAD: Blocks event loop</span>
<span class="kd">function</span> <span class="nx">heavyComputation</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">let</span> <span class="nx">result</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="mi">1000000000</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">result</span> <span class="o">+=</span> <span class="nx">i</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="nx">result</span><span class="p">;</span>
<span class="p">}</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Start</span><span class="dl">"</span><span class="p">);</span>
<span class="nx">heavyComputation</span><span class="p">();</span> <span class="c1">// Blocks everything</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">End</span><span class="dl">"</span><span class="p">);</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><strong>Solution: Break work into chunks:</strong></p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
</pre></td><td class="rouge-code"><pre><span class="c1">// GOOD: Non-blocking approach</span>
<span class="kd">function</span> <span class="nx">heavyComputationAsync</span><span class="p">(</span><span class="nx">start</span><span class="p">,</span> <span class="nx">end</span><span class="p">,</span> <span class="nx">chunkSize</span> <span class="o">=</span> <span class="mi">1000000</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="k">new</span> <span class="nb">Promise</span><span class="p">((</span><span class="nx">resolve</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">result</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="kd">let</span> <span class="nx">current</span> <span class="o">=</span> <span class="nx">start</span><span class="p">;</span>

    <span class="kd">function</span> <span class="nx">processChunk</span><span class="p">()</span> <span class="p">{</span>
      <span class="kd">const</span> <span class="nx">chunkEnd</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">min</span><span class="p">(</span><span class="nx">current</span> <span class="o">+</span> <span class="nx">chunkSize</span><span class="p">,</span> <span class="nx">end</span><span class="p">);</span>

      <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="nx">current</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">chunkEnd</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">result</span> <span class="o">+=</span> <span class="nx">i</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="nx">current</span> <span class="o">=</span> <span class="nx">chunkEnd</span><span class="p">;</span>

      <span class="k">if</span> <span class="p">(</span><span class="nx">current</span> <span class="o">&lt;</span> <span class="nx">end</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">setTimeout</span><span class="p">(</span><span class="nx">processChunk</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span> <span class="c1">// Yield control</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nx">resolve</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span>

    <span class="nx">processChunk</span><span class="p">();</span>
  <span class="p">});</span>
<span class="p">}</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Start</span><span class="dl">"</span><span class="p">);</span>
<span class="nx">heavyComputationAsync</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1000000000</span><span class="p">).</span><span class="nx">then</span><span class="p">((</span><span class="nx">result</span><span class="p">)</span> <span class="o">=&gt;</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Result:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">result</span><span class="p">)</span>
<span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">End</span><span class="dl">"</span><span class="p">);</span>
<span class="c1">// Output: Start, End, Result: [number]</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="microtask-queue-starvation">Microtask Queue Starvation</h3>

<p><strong>Problem</strong>: Too many microtasks can starve macrotasks:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="rouge-code"><pre><span class="c1">// BAD: Infinite microtask loop</span>
<span class="kd">function</span> <span class="nx">recursiveMicrotask</span><span class="p">()</span> <span class="p">{</span>
  <span class="nb">Promise</span><span class="p">.</span><span class="nx">resolve</span><span class="p">().</span><span class="nx">then</span><span class="p">(</span><span class="nx">recursiveMicrotask</span><span class="p">);</span>
<span class="p">}</span>

<span class="nx">recursiveMicrotask</span><span class="p">();</span> <span class="c1">// Blocks all macrotasks!</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><strong>Solution</strong>: Use macrotasks for long-running operations:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre></td><td class="rouge-code"><pre><span class="c1">// GOOD: Mix microtasks and macrotasks</span>
<span class="kd">function</span> <span class="nx">balancedRecursion</span><span class="p">(</span><span class="nx">count</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">count</span> <span class="o">%</span> <span class="mi">100</span> <span class="o">===</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Use macrotask every 100 iterations</span>
    <span class="nx">setTimeout</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="nx">balancedRecursion</span><span class="p">(</span><span class="nx">count</span> <span class="o">+</span> <span class="mi">1</span><span class="p">),</span> <span class="mi">0</span><span class="p">);</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="c1">// Use microtask for most iterations</span>
    <span class="nb">Promise</span><span class="p">.</span><span class="nx">resolve</span><span class="p">().</span><span class="nx">then</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="nx">balancedRecursion</span><span class="p">(</span><span class="nx">count</span> <span class="o">+</span> <span class="mi">1</span><span class="p">));</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h2 id="interview-questions--answers">Interview Questions &amp; Answers</h2>

<h3 id="q1-what-will-this-code-output-and-why">Q1: What will this code output and why?</h3>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre></td><td class="rouge-code"><pre><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">A</span><span class="dl">"</span><span class="p">);</span>

<span class="nx">setTimeout</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">B</span><span class="dl">"</span><span class="p">),</span> <span class="mi">0</span><span class="p">);</span>

<span class="nb">Promise</span><span class="p">.</span><span class="nx">resolve</span><span class="p">().</span><span class="nx">then</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">C</span><span class="dl">"</span><span class="p">);</span>
  <span class="nx">setTimeout</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">D</span><span class="dl">"</span><span class="p">),</span> <span class="mi">0</span><span class="p">);</span>
<span class="p">});</span>

<span class="nb">Promise</span><span class="p">.</span><span class="nx">resolve</span><span class="p">().</span><span class="nx">then</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">E</span><span class="dl">"</span><span class="p">));</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">F</span><span class="dl">"</span><span class="p">);</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><strong>Answer</strong>: A, F, C, E, B, D</p>

<p><strong>Explanation</strong>:</p>

<ol>
  <li><strong>A</strong> - Synchronous console.log</li>
  <li><strong>F</strong> - Synchronous console.log</li>
  <li><strong>C</strong> - First Promise microtask (higher priority)</li>
  <li><strong>E</strong> - Second Promise microtask</li>
  <li><strong>B</strong> - First setTimeout macrotask</li>
  <li><strong>D</strong> - Second setTimeout macrotask (queued from within Promise)</li>
</ol>

<h3 id="q2-explain-the-difference-between-microtasks-and-macrotasks">Q2: Explain the difference between microtasks and macrotasks.</h3>

<p><strong>Answer</strong>:</p>

<p><strong>Microtasks</strong>:</p>

<ul>
  <li>Higher priority in event loop</li>
  <li>Processed completely before any macrotask</li>
  <li>Sources: Promises, queueMicrotask, MutationObserver</li>
  <li>Can starve macrotasks if not careful</li>
</ul>

<p><strong>Macrotasks</strong>:</p>

<ul>
  <li>Lower priority in event loop</li>
  <li>Only one processed per event loop cycle</li>
  <li>Sources: setTimeout, setInterval, I/O, UI events</li>
  <li>Allow other operations between executions</li>
</ul>

<h3 id="q3-how-would-you-prevent-blocking-the-main-thread-during-heavy-computation">Q3: How would you prevent blocking the main thread during heavy computation?</h3>

<p><strong>Answer</strong>:</p>

<p><strong>1. Web Workers</strong>:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre></td><td class="rouge-code"><pre><span class="c1">// main.js</span>
<span class="kd">const</span> <span class="nx">worker</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Worker</span><span class="p">(</span><span class="dl">"</span><span class="s2">computation-worker.js</span><span class="dl">"</span><span class="p">);</span>
<span class="nx">worker</span><span class="p">.</span><span class="nx">postMessage</span><span class="p">({</span> <span class="na">data</span><span class="p">:</span> <span class="nx">largeDataset</span> <span class="p">});</span>
<span class="nx">worker</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Result:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>

<span class="c1">// computation-worker.js</span>
<span class="nb">self</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="nx">heavyComputation</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
  <span class="nb">self</span><span class="p">.</span><span class="nx">postMessage</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">};</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><strong>2. Time-slicing</strong>:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre></td><td class="rouge-code"><pre><span class="k">async</span> <span class="kd">function</span> <span class="nx">processLargeArray</span><span class="p">(</span><span class="nx">array</span><span class="p">,</span> <span class="nx">processor</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">CHUNK_SIZE</span> <span class="o">=</span> <span class="mi">1000</span><span class="p">;</span>

  <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">array</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">+=</span> <span class="nx">CHUNK_SIZE</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">chunk</span> <span class="o">=</span> <span class="nx">array</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="nx">i</span><span class="p">,</span> <span class="nx">i</span> <span class="o">+</span> <span class="nx">CHUNK_SIZE</span><span class="p">);</span>
    <span class="nx">chunk</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="nx">processor</span><span class="p">);</span>

    <span class="c1">// Yield control every chunk</span>
    <span class="k">await</span> <span class="k">new</span> <span class="nb">Promise</span><span class="p">((</span><span class="nx">resolve</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">setTimeout</span><span class="p">(</span><span class="nx">resolve</span><span class="p">,</span> <span class="mi">0</span><span class="p">));</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><strong>3. RequestIdleCallback</strong>:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre></td><td class="rouge-code"><pre><span class="kd">function</span> <span class="nx">processWhenIdle</span><span class="p">(</span><span class="nx">tasks</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">function</span> <span class="nx">processTasks</span><span class="p">(</span><span class="nx">deadline</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">while</span> <span class="p">(</span><span class="nx">deadline</span><span class="p">.</span><span class="nx">timeRemaining</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="nx">tasks</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">const</span> <span class="nx">task</span> <span class="o">=</span> <span class="nx">tasks</span><span class="p">.</span><span class="nx">shift</span><span class="p">();</span>
      <span class="nx">task</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span><span class="nx">tasks</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">requestIdleCallback</span><span class="p">(</span><span class="nx">processTasks</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="nx">requestIdleCallback</span><span class="p">(</span><span class="nx">processTasks</span><span class="p">);</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="q4-whats-the-difference-between-settimeoutfn-0-and-queuemicrotaskfn">Q4: What’s the difference between setTimeout(fn, 0) and queueMicrotask(fn)?</h3>

<p><strong>Answer</strong>:</p>

<p><strong>setTimeout(fn, 0)</strong>:</p>

<ul>
  <li>Macrotask - lower priority</li>
  <li>Minimum delay of 4ms in browsers</li>
  <li>Processed after current microtasks</li>
</ul>

<p><strong>queueMicrotask(fn)</strong>:</p>

<ul>
  <li>Microtask - higher priority</li>
  <li>No artificial delay</li>
  <li>Processed before any macrotasks</li>
</ul>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="nx">queueMicrotask</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">microtask</span><span class="dl">"</span><span class="p">));</span>
<span class="nx">setTimeout</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">macrotask</span><span class="dl">"</span><span class="p">),</span> <span class="mi">0</span><span class="p">);</span>
<span class="c1">// Output: microtask, macrotask</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h2 id="practical-examples">Practical Examples</h2>

<h3 id="example-1-building-a-non-blocking-renderer">Example 1: Building a Non-Blocking Renderer</h3>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
</pre></td><td class="rouge-code"><pre><span class="kd">class</span> <span class="nx">NonBlockingRenderer</span> <span class="p">{</span>
  <span class="kd">constructor</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">renderQueue</span> <span class="o">=</span> <span class="p">[];</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">isRendering</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="k">async</span> <span class="nx">render</span><span class="p">(</span><span class="nx">items</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">renderQueue</span><span class="p">.</span><span class="nx">push</span><span class="p">(...</span><span class="nx">items</span><span class="p">);</span>

    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">isRendering</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">isRendering</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
      <span class="k">await</span> <span class="k">this</span><span class="p">.</span><span class="nx">processRenderQueue</span><span class="p">();</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">isRendering</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="k">async</span> <span class="nx">processRenderQueue</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">CHUNK_SIZE</span> <span class="o">=</span> <span class="mi">50</span><span class="p">;</span>

    <span class="k">while</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">renderQueue</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">const</span> <span class="nx">chunk</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">renderQueue</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nx">CHUNK_SIZE</span><span class="p">);</span>

      <span class="c1">// Render chunk synchronously</span>
      <span class="nx">chunk</span><span class="p">.</span><span class="nx">forEach</span><span class="p">((</span><span class="nx">item</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">renderItem</span><span class="p">(</span><span class="nx">item</span><span class="p">));</span>

      <span class="c1">// Yield control to prevent blocking</span>
      <span class="k">await</span> <span class="k">this</span><span class="p">.</span><span class="nx">yieldControl</span><span class="p">();</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="nx">yieldControl</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nb">Promise</span><span class="p">((</span><span class="nx">resolve</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">shouldYield</span><span class="p">())</span> <span class="p">{</span>
        <span class="nx">setTimeout</span><span class="p">(</span><span class="nx">resolve</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span> <span class="c1">// Macrotask</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nx">queueMicrotask</span><span class="p">(</span><span class="nx">resolve</span><span class="p">);</span> <span class="c1">// Microtask</span>
      <span class="p">}</span>
    <span class="p">});</span>
  <span class="p">}</span>

  <span class="nx">shouldYield</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// Yield if we've been running for too long</span>
    <span class="k">return</span> <span class="nx">performance</span><span class="p">.</span><span class="nx">now</span><span class="p">()</span> <span class="o">%</span> <span class="mi">16</span> <span class="o">&gt;</span> <span class="mi">5</span><span class="p">;</span> <span class="c1">// ~5ms threshold</span>
  <span class="p">}</span>

  <span class="nx">renderItem</span><span class="p">(</span><span class="nx">item</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">element</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="dl">"</span><span class="s2">div</span><span class="dl">"</span><span class="p">);</span>
    <span class="nx">element</span><span class="p">.</span><span class="nx">textContent</span> <span class="o">=</span> <span class="nx">item</span><span class="p">.</span><span class="nx">text</span><span class="p">;</span>
    <span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">element</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="example-2-promise-queue-with-concurrency-control">Example 2: Promise Queue with Concurrency Control</h3>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
</pre></td><td class="rouge-code"><pre><span class="kd">class</span> <span class="nx">PromiseQueue</span> <span class="p">{</span>
  <span class="kd">constructor</span><span class="p">(</span><span class="nx">concurrency</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">concurrency</span> <span class="o">=</span> <span class="nx">concurrency</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">running</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">queue</span> <span class="o">=</span> <span class="p">[];</span>
  <span class="p">}</span>

  <span class="nx">add</span><span class="p">(</span><span class="nx">promiseFactory</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nb">Promise</span><span class="p">((</span><span class="nx">resolve</span><span class="p">,</span> <span class="nx">reject</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">queue</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span>
        <span class="nx">promiseFactory</span><span class="p">,</span>
        <span class="nx">resolve</span><span class="p">,</span>
        <span class="nx">reject</span><span class="p">,</span>
      <span class="p">});</span>

      <span class="k">this</span><span class="p">.</span><span class="nx">process</span><span class="p">();</span>
    <span class="p">});</span>
  <span class="p">}</span>

  <span class="k">async</span> <span class="nx">process</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">running</span> <span class="o">&gt;=</span> <span class="k">this</span><span class="p">.</span><span class="nx">concurrency</span> <span class="o">||</span> <span class="k">this</span><span class="p">.</span><span class="nx">queue</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">running</span><span class="o">++</span><span class="p">;</span>
    <span class="kd">const</span> <span class="p">{</span> <span class="nx">promiseFactory</span><span class="p">,</span> <span class="nx">resolve</span><span class="p">,</span> <span class="nx">reject</span> <span class="p">}</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">queue</span><span class="p">.</span><span class="nx">shift</span><span class="p">();</span>

    <span class="k">try</span> <span class="p">{</span>
      <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">promiseFactory</span><span class="p">();</span>
      <span class="nx">resolve</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">reject</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">finally</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">running</span><span class="o">--</span><span class="p">;</span>
      <span class="c1">// Process next item in next microtask</span>
      <span class="nx">queueMicrotask</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">process</span><span class="p">());</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// Usage</span>
<span class="kd">const</span> <span class="nx">queue</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PromiseQueue</span><span class="p">(</span><span class="mi">3</span><span class="p">);</span> <span class="c1">// Max 3 concurrent operations</span>

<span class="c1">// Add multiple async operations</span>
<span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">queue</span>
    <span class="p">.</span><span class="nx">add</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="nx">fetch</span><span class="p">(</span><span class="s2">`/api/data/</span><span class="p">${</span><span class="nx">i</span><span class="p">}</span><span class="s2">`</span><span class="p">))</span>
    <span class="p">.</span><span class="nx">then</span><span class="p">((</span><span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">`Completed </span><span class="p">${</span><span class="nx">i</span><span class="p">}</span><span class="s2">`</span><span class="p">));</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h1 id="additional-advanced-interview-qa-and-visuals">Additional Advanced Interview Q&amp;A and Visuals</h1>

<h2 id="q-what-is-the-output-of-the-following-code-and-why">Q: What is the output of the following code and why?</h2>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="rouge-code"><pre><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">A</span><span class="dl">"</span><span class="p">);</span>
<span class="nx">setTimeout</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">B</span><span class="dl">"</span><span class="p">),</span> <span class="mi">0</span><span class="p">);</span>
<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">C</span><span class="dl">"</span><span class="p">);</span>
  <span class="k">await</span> <span class="kc">null</span><span class="p">;</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">D</span><span class="dl">"</span><span class="p">);</span>
<span class="p">})();</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">E</span><span class="dl">"</span><span class="p">);</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><strong>Answer (English):</strong>
A, C, E, D, B</p>

<ul>
  <li>Synchronous: A, C, E</li>
  <li>Awaited code (D) is a microtask, runs after sync code</li>
  <li>setTimeout (B) is a macrotask, runs after microtasks</li>
</ul>

<p><strong>Answer (Vietnamese):</strong>
A, C, E, D, B</p>

<ul>
  <li>Lệnh đồng bộ: A, C, E</li>
  <li>D (sau await) là microtask, chạy sau code đồng bộ</li>
  <li>B (setTimeout) là macrotask, chạy sau microtask</li>
</ul>

<hr />

<h2 id="q-how-would-you-debug-a-ui-freeze-caused-by-a-long-running-synchronous-function">Q: How would you debug a UI freeze caused by a long-running synchronous function?</h2>

<p><strong>Answer (English):</strong></p>

<ul>
  <li>Use Chrome DevTools Performance tab to record and find long tasks</li>
  <li>Refactor code to break work into smaller chunks (setTimeout, requestIdleCallback)</li>
  <li>Move heavy computation to a Web Worker</li>
</ul>

<p><strong>Answer (Vietnamese):</strong></p>

<ul>
  <li>Dùng Chrome DevTools Performance để tìm task dài</li>
  <li>Chia nhỏ công việc bằng setTimeout, requestIdleCallback</li>
  <li>Đưa xử lý nặng sang Web Worker</li>
</ul>

<hr />

<h2 id="diagram-event-loop-with-asyncawait-and-timers">Diagram: Event Loop with Async/Await and Timers</h2>

<pre><code class="language-mermaid">sequenceDiagram
  participant Main
  participant Microtask
  participant Macrotask
  Main-&gt;&gt;Main: console.log('A')
  Main-&gt;&gt;Main: setTimeout(...)
  Main-&gt;&gt;Main: (async) console.log('C')
  Main-&gt;&gt;Microtask: await null (schedules D)
  Main-&gt;&gt;Main: console.log('E')
  Microtask-&gt;&gt;Main: console.log('D')
  Macrotask-&gt;&gt;Main: console.log('B')
</code></pre>

<hr />

<p>This comprehensive deep-dive covers the Event Loop from fundamental concepts to advanced implementation patterns, providing the theoretical knowledge and practical understanding needed for senior frontend engineering interviews.</p>

        </div>
    </article>
</div>
    </main>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>Study Resources</h3>
                    <p>Comprehensive collection of frontend interview questions, coding challenges, and system design problems.</p>
                </div>
                <div class="footer-section">
                    <h3>Progress Tracking</h3>
                    <p>Monitor your learning journey with detailed progress indicators and completion status.</p>
                </div>
                <div class="footer-section">
                    <h3>Big Tech Ready</h3>
                    <p>Curated content specifically designed for interviews at Google, Meta, Amazon, Apple, and Netflix.</p>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 Frontend Interview Hub. Built for aspiring frontend engineers.</p>
            </div>
        </div>
    </footer>

    <!-- Scripts -->
    <script src="/assets/js/app.js"></script>
</body>
</html>