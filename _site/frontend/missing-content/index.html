<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üîç Missing Content Analysis &amp; Solutions | Frontend Interview Preparation Guide</title>
    <meta name="description" content="Comprehensive frontend interview materials for Big Tech companies">
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
    
    <!-- Styles -->
    <link rel="stylesheet" href="/assets/css/main.css">
</head>
<body>
    <!-- Navigation -->
    <header>
        <nav class="container">
            <div class="logo">Frontend Interview Hub</div>
            <ul class="nav-links">
                <li><a href="/">Home</a></li>
                <li><a href="#progress">Progress</a></li>
                <li><a href="#knowledge">Knowledge</a></li>
                <li><a href="https://github.com/nee/interview">GitHub</a></li>
            </ul>
        </nav>
    </header>

    <!-- Main Content -->
    <main>
        <div class="content-container">
    
        <nav class="breadcrumb">
            <ol>
                <li><a href="/">Home</a></li>
                
                
                
                    
                
                    
                        
                        
                            <li><a href="/frontend/">Frontend</a></li>
                        
                    
                
                    
                        
                        
                            <li class="active">üîç missing content analysis &amp; solutions</li>
                        
                    
                
            </ol>
        </nav>
    
    
    <article class="content">
        
            <header class="content-header">
                <h1 class="content-title">üîç Missing Content Analysis &amp; Solutions</h1>
                
                
            </header>
        
        
        <div class="content-body">
            <h1 id="-missing-content-analysis--solutions">üîç Missing Content Analysis &amp; Solutions</h1>

<h2 id="-overview">üìã Overview</h2>

<p>This document identifies missing content, duplicates, and opportunities for improvement in the frontend interview preparation repository. It provides solutions and new content to create a more comprehensive and organized learning experience.</p>

<h2 id="-missing-core-content">üéØ Missing Core Content</h2>

<h3 id="1-modern-web-apis--browser-features">1. Modern Web APIs &amp; Browser Features</h3>

<h4 id="web-apis-deep-dive">Web APIs Deep Dive</h4>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
</pre></td><td class="rouge-code"><pre><span class="c1">// Modern Web APIs Implementation Guide</span>

<span class="c1">// 1. Intersection Observer API</span>
<span class="kd">class</span> <span class="nx">LazyLoader</span> <span class="p">{</span>
  <span class="kd">constructor</span><span class="p">(</span><span class="nx">options</span> <span class="o">=</span> <span class="p">{})</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
      <span class="na">root</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
      <span class="na">rootMargin</span><span class="p">:</span> <span class="dl">"</span><span class="s2">50px</span><span class="dl">"</span><span class="p">,</span>
      <span class="na">threshold</span><span class="p">:</span> <span class="mf">0.1</span><span class="p">,</span>
      <span class="p">...</span><span class="nx">options</span><span class="p">,</span>
    <span class="p">};</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">observer</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">IntersectionObserver</span><span class="p">(</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">handleIntersection</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">),</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">options</span>
    <span class="p">);</span>
  <span class="p">}</span>

  <span class="nx">observe</span><span class="p">(</span><span class="nx">element</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">observer</span><span class="p">.</span><span class="nx">observe</span><span class="p">(</span><span class="nx">element</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="nx">handleIntersection</span><span class="p">(</span><span class="nx">entries</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">entries</span><span class="p">.</span><span class="nx">forEach</span><span class="p">((</span><span class="nx">entry</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">entry</span><span class="p">.</span><span class="nx">isIntersecting</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">loadContent</span><span class="p">(</span><span class="nx">entry</span><span class="p">.</span><span class="nx">target</span><span class="p">);</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">observer</span><span class="p">.</span><span class="nx">unobserve</span><span class="p">(</span><span class="nx">entry</span><span class="p">.</span><span class="nx">target</span><span class="p">);</span>
      <span class="p">}</span>
    <span class="p">});</span>
  <span class="p">}</span>

  <span class="nx">loadContent</span><span class="p">(</span><span class="nx">element</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">src</span> <span class="o">=</span> <span class="nx">element</span><span class="p">.</span><span class="nx">dataset</span><span class="p">.</span><span class="nx">src</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">src</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">element</span><span class="p">.</span><span class="nx">tagName</span> <span class="o">===</span> <span class="dl">"</span><span class="s2">IMG</span><span class="dl">"</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">element</span><span class="p">.</span><span class="nx">src</span> <span class="o">=</span> <span class="nx">src</span><span class="p">;</span>
      <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">element</span><span class="p">.</span><span class="nx">tagName</span> <span class="o">===</span> <span class="dl">"</span><span class="s2">IFRAME</span><span class="dl">"</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">element</span><span class="p">.</span><span class="nx">src</span> <span class="o">=</span> <span class="nx">src</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="nx">element</span><span class="p">.</span><span class="nx">removeAttribute</span><span class="p">(</span><span class="dl">"</span><span class="s2">data-src</span><span class="dl">"</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// 2. Resize Observer API</span>
<span class="kd">class</span> <span class="nx">ResponsiveComponent</span> <span class="p">{</span>
  <span class="kd">constructor</span><span class="p">(</span><span class="nx">element</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">element</span> <span class="o">=</span> <span class="nx">element</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">resizeObserver</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">ResizeObserver</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">handleResize</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">));</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">resizeObserver</span><span class="p">.</span><span class="nx">observe</span><span class="p">(</span><span class="nx">element</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="nx">handleResize</span><span class="p">(</span><span class="nx">entries</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">entries</span><span class="p">.</span><span class="nx">forEach</span><span class="p">((</span><span class="nx">entry</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="kd">const</span> <span class="p">{</span> <span class="nx">width</span><span class="p">,</span> <span class="nx">height</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">entry</span><span class="p">.</span><span class="nx">contentRect</span><span class="p">;</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">updateLayout</span><span class="p">(</span><span class="nx">width</span><span class="p">,</span> <span class="nx">height</span><span class="p">);</span>
    <span class="p">});</span>
  <span class="p">}</span>

  <span class="nx">updateLayout</span><span class="p">(</span><span class="nx">width</span><span class="p">,</span> <span class="nx">height</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Update component layout based on new dimensions</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">width</span> <span class="o">&lt;</span> <span class="mi">768</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">element</span><span class="p">.</span><span class="nx">classList</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="dl">"</span><span class="s2">mobile</span><span class="dl">"</span><span class="p">);</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">element</span><span class="p">.</span><span class="nx">classList</span><span class="p">.</span><span class="nx">remove</span><span class="p">(</span><span class="dl">"</span><span class="s2">desktop</span><span class="dl">"</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">element</span><span class="p">.</span><span class="nx">classList</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="dl">"</span><span class="s2">desktop</span><span class="dl">"</span><span class="p">);</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">element</span><span class="p">.</span><span class="nx">classList</span><span class="p">.</span><span class="nx">remove</span><span class="p">(</span><span class="dl">"</span><span class="s2">mobile</span><span class="dl">"</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// 3. Mutation Observer API</span>
<span class="kd">class</span> <span class="nx">DOMWatcher</span> <span class="p">{</span>
  <span class="kd">constructor</span><span class="p">(</span><span class="nx">target</span><span class="p">,</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{})</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">target</span> <span class="o">=</span> <span class="nx">target</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
      <span class="na">childList</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
      <span class="na">subtree</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
      <span class="na">attributes</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
      <span class="na">attributeFilter</span><span class="p">:</span> <span class="p">[</span><span class="dl">"</span><span class="s2">class</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">style</span><span class="dl">"</span><span class="p">],</span>
      <span class="p">...</span><span class="nx">options</span><span class="p">,</span>
    <span class="p">};</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">observer</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">MutationObserver</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">handleMutations</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">));</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">observer</span><span class="p">.</span><span class="nx">observe</span><span class="p">(</span><span class="nx">target</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="nx">handleMutations</span><span class="p">(</span><span class="nx">mutations</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">mutations</span><span class="p">.</span><span class="nx">forEach</span><span class="p">((</span><span class="nx">mutation</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="k">switch</span> <span class="p">(</span><span class="nx">mutation</span><span class="p">.</span><span class="nx">type</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">case</span> <span class="dl">"</span><span class="s2">childList</span><span class="dl">"</span><span class="p">:</span>
          <span class="k">this</span><span class="p">.</span><span class="nx">handleChildListChange</span><span class="p">(</span><span class="nx">mutation</span><span class="p">);</span>
          <span class="k">break</span><span class="p">;</span>
        <span class="k">case</span> <span class="dl">"</span><span class="s2">attributes</span><span class="dl">"</span><span class="p">:</span>
          <span class="k">this</span><span class="p">.</span><span class="nx">handleAttributeChange</span><span class="p">(</span><span class="nx">mutation</span><span class="p">);</span>
          <span class="k">break</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">});</span>
  <span class="p">}</span>

  <span class="nx">handleChildListChange</span><span class="p">(</span><span class="nx">mutation</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">mutation</span><span class="p">.</span><span class="nx">addedNodes</span><span class="p">.</span><span class="nx">forEach</span><span class="p">((</span><span class="nx">node</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">node</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="nx">Node</span><span class="p">.</span><span class="nx">ELEMENT_NODE</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Element added:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">node</span><span class="p">);</span>
      <span class="p">}</span>
    <span class="p">});</span>

    <span class="nx">mutation</span><span class="p">.</span><span class="nx">removedNodes</span><span class="p">.</span><span class="nx">forEach</span><span class="p">((</span><span class="nx">node</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">node</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="nx">Node</span><span class="p">.</span><span class="nx">ELEMENT_NODE</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Element removed:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">node</span><span class="p">);</span>
      <span class="p">}</span>
    <span class="p">});</span>
  <span class="p">}</span>

  <span class="nx">handleAttributeChange</span><span class="p">(</span><span class="nx">mutation</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span>
      <span class="s2">`Attribute </span><span class="p">${</span><span class="nx">mutation</span><span class="p">.</span><span class="nx">attributeName</span><span class="p">}</span><span class="s2"> changed on`</span><span class="p">,</span>
      <span class="nx">mutation</span><span class="p">.</span><span class="nx">target</span>
    <span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// 4. Web Workers API</span>
<span class="kd">class</span> <span class="nx">WorkerManager</span> <span class="p">{</span>
  <span class="kd">constructor</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">workers</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Map</span><span class="p">();</span>
  <span class="p">}</span>

  <span class="nx">createWorker</span><span class="p">(</span><span class="nx">script</span><span class="p">,</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{})</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">worker</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Worker</span><span class="p">(</span><span class="nx">script</span><span class="p">,</span> <span class="nx">options</span><span class="p">);</span>
    <span class="kd">const</span> <span class="nx">id</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">generateId</span><span class="p">();</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">workers</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="nx">id</span><span class="p">,</span> <span class="nx">worker</span><span class="p">);</span>

    <span class="nx">worker</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">handleWorkerMessage</span><span class="p">(</span><span class="nx">id</span><span class="p">,</span> <span class="nx">event</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
    <span class="p">};</span>

    <span class="nx">worker</span><span class="p">.</span><span class="nx">onerror</span> <span class="o">=</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">handleWorkerError</span><span class="p">(</span><span class="nx">id</span><span class="p">,</span> <span class="nx">error</span><span class="p">);</span>
    <span class="p">};</span>

    <span class="k">return</span> <span class="nx">id</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="nx">postMessage</span><span class="p">(</span><span class="nx">workerId</span><span class="p">,</span> <span class="nx">message</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">worker</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">workers</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="nx">workerId</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">worker</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">worker</span><span class="p">.</span><span class="nx">postMessage</span><span class="p">(</span><span class="nx">message</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="nx">terminateWorker</span><span class="p">(</span><span class="nx">workerId</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">worker</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">workers</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="nx">workerId</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">worker</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">worker</span><span class="p">.</span><span class="nx">terminate</span><span class="p">();</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">workers</span><span class="p">.</span><span class="k">delete</span><span class="p">(</span><span class="nx">workerId</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="nx">handleWorkerMessage</span><span class="p">(</span><span class="nx">workerId</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">`Worker </span><span class="p">${</span><span class="nx">workerId</span><span class="p">}</span><span class="s2"> message:`</span><span class="p">,</span> <span class="nx">data</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="nx">handleWorkerError</span><span class="p">(</span><span class="nx">workerId</span><span class="p">,</span> <span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="s2">`Worker </span><span class="p">${</span><span class="nx">workerId</span><span class="p">}</span><span class="s2"> error:`</span><span class="p">,</span> <span class="nx">error</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="nx">generateId</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">().</span><span class="nx">toString</span><span class="p">(</span><span class="mi">36</span><span class="p">).</span><span class="nx">substr</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">9</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// 5. Service Worker Advanced Features</span>
<span class="kd">class</span> <span class="nx">AdvancedServiceWorker</span> <span class="p">{</span>
  <span class="kd">constructor</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">cacheName</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">advanced-cache-v1</span><span class="dl">"</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">strategies</span> <span class="o">=</span> <span class="p">{</span>
      <span class="na">cacheFirst</span><span class="p">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">cacheFirst</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">),</span>
      <span class="na">networkFirst</span><span class="p">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">networkFirst</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">),</span>
      <span class="na">staleWhileRevalidate</span><span class="p">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">staleWhileRevalidate</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">),</span>
      <span class="na">cacheOnly</span><span class="p">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">cacheOnly</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">),</span>
    <span class="p">};</span>
  <span class="p">}</span>

  <span class="k">async</span> <span class="nx">install</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">event</span><span class="p">.</span><span class="nx">waitUntil</span><span class="p">(</span>
      <span class="nx">caches</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">cacheName</span><span class="p">).</span><span class="nx">then</span><span class="p">((</span><span class="nx">cache</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">cache</span><span class="p">.</span><span class="nx">addAll</span><span class="p">([</span>
          <span class="dl">"</span><span class="s2">/</span><span class="dl">"</span><span class="p">,</span>
          <span class="dl">"</span><span class="s2">/index.html</span><span class="dl">"</span><span class="p">,</span>
          <span class="dl">"</span><span class="s2">/styles/main.css</span><span class="dl">"</span><span class="p">,</span>
          <span class="dl">"</span><span class="s2">/scripts/app.js</span><span class="dl">"</span><span class="p">,</span>
          <span class="dl">"</span><span class="s2">/offline.html</span><span class="dl">"</span><span class="p">,</span>
        <span class="p">]);</span>
      <span class="p">})</span>
    <span class="p">);</span>
  <span class="p">}</span>

  <span class="k">async</span> <span class="nx">fetch</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">event</span><span class="p">.</span><span class="nx">request</span><span class="p">;</span>
    <span class="kd">const</span> <span class="nx">url</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">URL</span><span class="p">(</span><span class="nx">request</span><span class="p">.</span><span class="nx">url</span><span class="p">);</span>

    <span class="c1">// API requests</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">url</span><span class="p">.</span><span class="nx">pathname</span><span class="p">.</span><span class="nx">startsWith</span><span class="p">(</span><span class="dl">"</span><span class="s2">/api/</span><span class="dl">"</span><span class="p">))</span> <span class="p">{</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">strategies</span><span class="p">.</span><span class="nx">networkFirst</span><span class="p">(</span><span class="nx">request</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="c1">// Static assets</span>
    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">isStaticAsset</span><span class="p">(</span><span class="nx">url</span><span class="p">.</span><span class="nx">pathname</span><span class="p">))</span> <span class="p">{</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">strategies</span><span class="p">.</span><span class="nx">cacheFirst</span><span class="p">(</span><span class="nx">request</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="c1">// HTML pages</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">request</span><span class="p">.</span><span class="nx">headers</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">"</span><span class="s2">accept</span><span class="dl">"</span><span class="p">).</span><span class="nx">includes</span><span class="p">(</span><span class="dl">"</span><span class="s2">text/html</span><span class="dl">"</span><span class="p">))</span> <span class="p">{</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">strategies</span><span class="p">.</span><span class="nx">staleWhileRevalidate</span><span class="p">(</span><span class="nx">request</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="c1">// Default to network first</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">strategies</span><span class="p">.</span><span class="nx">networkFirst</span><span class="p">(</span><span class="nx">request</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="k">async</span> <span class="nx">cacheFirst</span><span class="p">(</span><span class="nx">request</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">cache</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">caches</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">cacheName</span><span class="p">);</span>
    <span class="kd">const</span> <span class="nx">cachedResponse</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">cache</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="nx">request</span><span class="p">);</span>

    <span class="k">if</span> <span class="p">(</span><span class="nx">cachedResponse</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">cachedResponse</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">try</span> <span class="p">{</span>
      <span class="kd">const</span> <span class="nx">networkResponse</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">fetch</span><span class="p">(</span><span class="nx">request</span><span class="p">);</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">networkResponse</span><span class="p">.</span><span class="nx">ok</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">await</span> <span class="nx">cache</span><span class="p">.</span><span class="nx">put</span><span class="p">(</span><span class="nx">request</span><span class="p">,</span> <span class="nx">networkResponse</span><span class="p">.</span><span class="nx">clone</span><span class="p">());</span>
      <span class="p">}</span>
      <span class="k">return</span> <span class="nx">networkResponse</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="k">new</span> <span class="nx">Response</span><span class="p">(</span><span class="dl">"</span><span class="s2">Network error</span><span class="dl">"</span><span class="p">,</span> <span class="p">{</span> <span class="na">status</span><span class="p">:</span> <span class="mi">503</span> <span class="p">});</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="k">async</span> <span class="nx">networkFirst</span><span class="p">(</span><span class="nx">request</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">cache</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">caches</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">cacheName</span><span class="p">);</span>

    <span class="k">try</span> <span class="p">{</span>
      <span class="kd">const</span> <span class="nx">networkResponse</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">fetch</span><span class="p">(</span><span class="nx">request</span><span class="p">);</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">networkResponse</span><span class="p">.</span><span class="nx">ok</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">await</span> <span class="nx">cache</span><span class="p">.</span><span class="nx">put</span><span class="p">(</span><span class="nx">request</span><span class="p">,</span> <span class="nx">networkResponse</span><span class="p">.</span><span class="nx">clone</span><span class="p">());</span>
      <span class="p">}</span>
      <span class="k">return</span> <span class="nx">networkResponse</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">const</span> <span class="nx">cachedResponse</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">cache</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="nx">request</span><span class="p">);</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">cachedResponse</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">cachedResponse</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="k">if</span> <span class="p">(</span><span class="nx">request</span><span class="p">.</span><span class="nx">headers</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">"</span><span class="s2">accept</span><span class="dl">"</span><span class="p">).</span><span class="nx">includes</span><span class="p">(</span><span class="dl">"</span><span class="s2">text/html</span><span class="dl">"</span><span class="p">))</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">cache</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="dl">"</span><span class="s2">/offline.html</span><span class="dl">"</span><span class="p">);</span>
      <span class="p">}</span>

      <span class="k">throw</span> <span class="nx">error</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="k">async</span> <span class="nx">staleWhileRevalidate</span><span class="p">(</span><span class="nx">request</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">cache</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">caches</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">cacheName</span><span class="p">);</span>
    <span class="kd">const</span> <span class="nx">cachedResponse</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">cache</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="nx">request</span><span class="p">);</span>

    <span class="kd">const</span> <span class="nx">fetchPromise</span> <span class="o">=</span> <span class="nx">fetch</span><span class="p">(</span><span class="nx">request</span><span class="p">).</span><span class="nx">then</span><span class="p">(</span><span class="k">async</span> <span class="p">(</span><span class="nx">networkResponse</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">networkResponse</span><span class="p">.</span><span class="nx">ok</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">await</span> <span class="nx">cache</span><span class="p">.</span><span class="nx">put</span><span class="p">(</span><span class="nx">request</span><span class="p">,</span> <span class="nx">networkResponse</span><span class="p">.</span><span class="nx">clone</span><span class="p">());</span>
      <span class="p">}</span>
      <span class="k">return</span> <span class="nx">networkResponse</span><span class="p">;</span>
    <span class="p">});</span>

    <span class="k">if</span> <span class="p">(</span><span class="nx">cachedResponse</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">cachedResponse</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="nx">fetchPromise</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="k">async</span> <span class="nx">cacheOnly</span><span class="p">(</span><span class="nx">request</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">cache</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">caches</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">cacheName</span><span class="p">);</span>
    <span class="kd">const</span> <span class="nx">cachedResponse</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">cache</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="nx">request</span><span class="p">);</span>

    <span class="k">if</span> <span class="p">(</span><span class="nx">cachedResponse</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">cachedResponse</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="k">new</span> <span class="nx">Response</span><span class="p">(</span><span class="dl">"</span><span class="s2">Not found in cache</span><span class="dl">"</span><span class="p">,</span> <span class="p">{</span> <span class="na">status</span><span class="p">:</span> <span class="mi">404</span> <span class="p">});</span>
  <span class="p">}</span>

  <span class="nx">isStaticAsset</span><span class="p">(</span><span class="nx">pathname</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="sr">/</span><span class="se">\.(</span><span class="sr">css|js|png|jpg|jpeg|gif|svg|webp|woff|woff2|ttf|eot</span><span class="se">)</span><span class="sr">$/</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span>
      <span class="nx">pathname</span>
    <span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="2-advanced-react-patterns">2. Advanced React Patterns</h3>

<h4 id="compound-components-pattern">Compound Components Pattern</h4>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
</pre></td><td class="rouge-code"><pre><span class="c1">// Compound Components Implementation</span>
<span class="kd">const</span> <span class="nx">Tabs</span> <span class="o">=</span> <span class="p">({</span> <span class="nx">children</span><span class="p">,</span> <span class="nx">defaultIndex</span> <span class="o">=</span> <span class="mi">0</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="p">[</span><span class="nx">activeIndex</span><span class="p">,</span> <span class="nx">setActiveIndex</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">(</span><span class="nx">defaultIndex</span><span class="p">);</span>

  <span class="kd">const</span> <span class="nx">context</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">activeIndex</span><span class="p">,</span>
    <span class="nx">setActiveIndex</span><span class="p">,</span>
  <span class="p">};</span>

  <span class="k">return</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nc">TabsContext</span><span class="p">.</span><span class="nc">Provider</span> <span class="na">value</span><span class="p">=</span><span class="si">{</span><span class="nx">context</span><span class="si">}</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="p">=</span><span class="s">"tabs"</span><span class="p">&gt;</span><span class="si">{</span><span class="nx">children</span><span class="si">}</span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nc">TabsContext</span><span class="p">.</span><span class="nc">Provider</span><span class="p">&gt;</span>
  <span class="p">);</span>
<span class="p">};</span>

<span class="kd">const</span> <span class="nx">TabsList</span> <span class="o">=</span> <span class="p">({</span> <span class="nx">children</span><span class="p">,</span> <span class="nx">className</span> <span class="o">=</span> <span class="dl">""</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="p">=</span><span class="si">{</span><span class="s2">`tabs-list </span><span class="p">${</span><span class="nx">className</span><span class="p">}</span><span class="s2">`</span><span class="si">}</span> <span class="na">role</span><span class="p">=</span><span class="s">"tablist"</span><span class="p">&gt;</span>
      <span class="si">{</span><span class="nx">children</span><span class="si">}</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
  <span class="p">);</span>
<span class="p">};</span>

<span class="kd">const</span> <span class="nx">Tab</span> <span class="o">=</span> <span class="p">({</span> <span class="nx">children</span><span class="p">,</span> <span class="nx">index</span><span class="p">,</span> <span class="nx">disabled</span> <span class="o">=</span> <span class="kc">false</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="p">{</span> <span class="nx">activeIndex</span><span class="p">,</span> <span class="nx">setActiveIndex</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">useContext</span><span class="p">(</span><span class="nx">TabsContext</span><span class="p">);</span>
  <span class="kd">const</span> <span class="nx">isActive</span> <span class="o">=</span> <span class="nx">activeIndex</span> <span class="o">===</span> <span class="nx">index</span><span class="p">;</span>

  <span class="k">return</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nt">button</span>
      <span class="na">className</span><span class="p">=</span><span class="si">{</span><span class="s2">`tab </span><span class="p">${</span><span class="nx">isActive</span> <span class="p">?</span> <span class="dl">"</span><span class="s2">active</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">""</span><span class="p">}</span><span class="s2"> </span><span class="p">${</span>
        <span class="nx">disabled</span> <span class="p">?</span> <span class="dl">"</span><span class="s2">disabled</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">""</span>
      <span class="p">}</span><span class="s2">`</span><span class="si">}</span>
      <span class="na">onClick</span><span class="p">=</span><span class="si">{</span><span class="p">()</span> <span class="o">=&gt;</span> <span class="o">!</span><span class="nx">disabled</span> <span class="o">&amp;&amp;</span> <span class="nx">setActiveIndex</span><span class="p">(</span><span class="nx">index</span><span class="p">)</span><span class="si">}</span>
      <span class="na">role</span><span class="p">=</span><span class="s">"tab"</span>
      <span class="na">aria-selected</span><span class="p">=</span><span class="si">{</span><span class="nx">isActive</span><span class="si">}</span>
      <span class="na">aria-disabled</span><span class="p">=</span><span class="si">{</span><span class="nx">disabled</span><span class="si">}</span>
    <span class="p">&gt;</span>
      <span class="si">{</span><span class="nx">children</span><span class="si">}</span>
    <span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
  <span class="p">);</span>
<span class="p">};</span>

<span class="kd">const</span> <span class="nx">TabPanels</span> <span class="o">=</span> <span class="p">({</span> <span class="nx">children</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="p">=</span><span class="s">"tab-panels"</span><span class="p">&gt;</span><span class="si">{</span><span class="nx">children</span><span class="si">}</span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;;</span>
<span class="p">};</span>

<span class="kd">const</span> <span class="nx">TabPanel</span> <span class="o">=</span> <span class="p">({</span> <span class="nx">children</span><span class="p">,</span> <span class="nx">index</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="p">{</span> <span class="nx">activeIndex</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">useContext</span><span class="p">(</span><span class="nx">TabsContext</span><span class="p">);</span>
  <span class="kd">const</span> <span class="nx">isActive</span> <span class="o">=</span> <span class="nx">activeIndex</span> <span class="o">===</span> <span class="nx">index</span><span class="p">;</span>

  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">isActive</span><span class="p">)</span> <span class="k">return</span> <span class="kc">null</span><span class="p">;</span>

  <span class="k">return</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="p">=</span><span class="s">"tab-panel"</span> <span class="na">role</span><span class="p">=</span><span class="s">"tabpanel"</span> <span class="na">aria-hidden</span><span class="p">=</span><span class="si">{</span><span class="o">!</span><span class="nx">isActive</span><span class="si">}</span><span class="p">&gt;</span>
      <span class="si">{</span><span class="nx">children</span><span class="si">}</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
  <span class="p">);</span>
<span class="p">};</span>

<span class="c1">// Usage</span>
<span class="kd">function</span> <span class="nx">App</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nc">Tabs</span> <span class="na">defaultIndex</span><span class="p">=</span><span class="si">{</span><span class="mi">0</span><span class="si">}</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nc">TabsList</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nc">Tab</span> <span class="na">index</span><span class="p">=</span><span class="si">{</span><span class="mi">0</span><span class="si">}</span><span class="p">&gt;</span>Profile<span class="p">&lt;/</span><span class="nc">Tab</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nc">Tab</span> <span class="na">index</span><span class="p">=</span><span class="si">{</span><span class="mi">1</span><span class="si">}</span><span class="p">&gt;</span>Settings<span class="p">&lt;/</span><span class="nc">Tab</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nc">Tab</span> <span class="na">index</span><span class="p">=</span><span class="si">{</span><span class="mi">2</span><span class="si">}</span><span class="p">&gt;</span>Help<span class="p">&lt;/</span><span class="nc">Tab</span><span class="p">&gt;</span>
      <span class="p">&lt;/</span><span class="nc">TabsList</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nc">TabPanels</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nc">TabPanel</span> <span class="na">index</span><span class="p">=</span><span class="si">{</span><span class="mi">0</span><span class="si">}</span><span class="p">&gt;</span>
          <span class="p">&lt;</span><span class="nt">h2</span><span class="p">&gt;</span>Profile Information<span class="p">&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
          <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>This is the profile panel.<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nc">TabPanel</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nc">TabPanel</span> <span class="na">index</span><span class="p">=</span><span class="si">{</span><span class="mi">1</span><span class="si">}</span><span class="p">&gt;</span>
          <span class="p">&lt;</span><span class="nt">h2</span><span class="p">&gt;</span>Settings<span class="p">&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
          <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>This is the settings panel.<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nc">TabPanel</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nc">TabPanel</span> <span class="na">index</span><span class="p">=</span><span class="si">{</span><span class="mi">2</span><span class="si">}</span><span class="p">&gt;</span>
          <span class="p">&lt;</span><span class="nt">h2</span><span class="p">&gt;</span>Help<span class="p">&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
          <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>This is the help panel.<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nc">TabPanel</span><span class="p">&gt;</span>
      <span class="p">&lt;/</span><span class="nc">TabPanels</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nc">Tabs</span><span class="p">&gt;</span>
  <span class="p">);</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h4 id="render-props-pattern">Render Props Pattern</h4>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
</pre></td><td class="rouge-code"><pre><span class="c1">// Render Props Implementation</span>
<span class="kd">class</span> <span class="nx">DataFetcher</span> <span class="kd">extends</span> <span class="nx">Component</span> <span class="p">{</span>
  <span class="nx">state</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">data</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="na">loading</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="na">error</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
  <span class="p">};</span>

  <span class="k">async</span> <span class="nx">componentDidMount</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">try</span> <span class="p">{</span>
      <span class="kd">const</span> <span class="nx">response</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">fetch</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">url</span><span class="p">);</span>
      <span class="kd">const</span> <span class="nx">data</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">response</span><span class="p">.</span><span class="nx">json</span><span class="p">();</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span> <span class="nx">data</span><span class="p">,</span> <span class="na">loading</span><span class="p">:</span> <span class="kc">false</span> <span class="p">});</span>
    <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span> <span class="nx">error</span><span class="p">,</span> <span class="na">loading</span><span class="p">:</span> <span class="kc">false</span> <span class="p">});</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">children</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// Usage</span>
<span class="kd">function</span> <span class="nx">UserProfile</span><span class="p">({</span> <span class="nx">userId</span> <span class="p">})</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nc">DataFetcher</span> <span class="na">url</span><span class="p">=</span><span class="si">{</span><span class="s2">`/api/users/</span><span class="p">${</span><span class="nx">userId</span><span class="p">}</span><span class="s2">`</span><span class="si">}</span><span class="p">&gt;</span>
      <span class="si">{</span><span class="p">({</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">loading</span><span class="p">,</span> <span class="nx">error</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">loading</span><span class="p">)</span> <span class="k">return</span> <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>Loading...<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;;</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="k">return</span> <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>Error: <span class="si">{</span><span class="nx">error</span><span class="p">.</span><span class="nx">message</span><span class="si">}</span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;;</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">data</span><span class="p">)</span> <span class="k">return</span> <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>No data found<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;;</span>

        <span class="k">return</span> <span class="p">(</span>
          <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span><span class="si">{</span><span class="nx">data</span><span class="p">.</span><span class="nx">name</span><span class="si">}</span><span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span><span class="si">{</span><span class="nx">data</span><span class="p">.</span><span class="nx">email</span><span class="si">}</span><span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
          <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
        <span class="p">);</span>
      <span class="p">}</span><span class="si">}</span>
    <span class="p">&lt;/</span><span class="nc">DataFetcher</span><span class="p">&gt;</span>
  <span class="p">);</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h4 id="higher-order-components-hocs">Higher-Order Components (HOCs)</h4>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
</pre></td><td class="rouge-code"><pre><span class="c1">// HOC Implementation</span>
<span class="kd">const</span> <span class="nx">withLoading</span> <span class="o">=</span> <span class="p">(</span><span class="nx">WrappedComponent</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="k">return</span> <span class="kd">class</span> <span class="kd">extends</span> <span class="nx">Component</span> <span class="p">{</span>
    <span class="nx">state</span> <span class="o">=</span> <span class="p">{</span>
      <span class="na">loading</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
      <span class="na">data</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
      <span class="na">error</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="p">};</span>

    <span class="k">async</span> <span class="nx">componentDidMount</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">try</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="nx">data</span> <span class="o">=</span> <span class="k">await</span> <span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">fetchData</span><span class="p">();</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span> <span class="nx">data</span><span class="p">,</span> <span class="na">loading</span><span class="p">:</span> <span class="kc">false</span> <span class="p">});</span>
      <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span> <span class="nx">error</span><span class="p">,</span> <span class="na">loading</span><span class="p">:</span> <span class="kc">false</span> <span class="p">});</span>
      <span class="p">}</span>
    <span class="p">}</span>

    <span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
      <span class="kd">const</span> <span class="p">{</span> <span class="nx">loading</span><span class="p">,</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">error</span> <span class="p">}</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">;</span>

      <span class="k">if</span> <span class="p">(</span><span class="nx">loading</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>Loading...<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;;</span>
      <span class="p">}</span>

      <span class="k">if</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>Error: <span class="si">{</span><span class="nx">error</span><span class="p">.</span><span class="nx">message</span><span class="si">}</span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;;</span>
      <span class="p">}</span>

      <span class="k">return</span> <span class="p">&lt;</span><span class="nc">WrappedComponent</span> <span class="na">data</span><span class="p">=</span><span class="si">{</span><span class="nx">data</span><span class="si">}</span> <span class="si">{</span><span class="p">...</span><span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="si">}</span> <span class="p">/&gt;;</span>
    <span class="p">}</span>
  <span class="p">};</span>
<span class="p">};</span>

<span class="c1">// Usage</span>
<span class="kd">const</span> <span class="nx">UserList</span> <span class="o">=</span> <span class="p">({</span> <span class="nx">data</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">(</span>
  <span class="p">&lt;</span><span class="nt">ul</span><span class="p">&gt;</span>
    <span class="si">{</span><span class="nx">data</span><span class="p">.</span><span class="nx">map</span><span class="p">((</span><span class="nx">user</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">(</span>
      <span class="p">&lt;</span><span class="nt">li</span> <span class="na">key</span><span class="p">=</span><span class="si">{</span><span class="nx">user</span><span class="p">.</span><span class="nx">id</span><span class="si">}</span><span class="p">&gt;</span><span class="si">{</span><span class="nx">user</span><span class="p">.</span><span class="nx">name</span><span class="si">}</span><span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
    <span class="p">))</span><span class="si">}</span>
  <span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
<span class="p">);</span>

<span class="kd">const</span> <span class="nx">UserListWithLoading</span> <span class="o">=</span> <span class="nx">withLoading</span><span class="p">(</span><span class="nx">UserList</span><span class="p">);</span>

<span class="kd">function</span> <span class="nx">App</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">fetchUsers</span> <span class="o">=</span> <span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">response</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">fetch</span><span class="p">(</span><span class="dl">"</span><span class="s2">/api/users</span><span class="dl">"</span><span class="p">);</span>
    <span class="k">return</span> <span class="nx">response</span><span class="p">.</span><span class="nx">json</span><span class="p">();</span>
  <span class="p">};</span>

  <span class="k">return</span> <span class="p">&lt;</span><span class="nc">UserListWithLoading</span> <span class="na">fetchData</span><span class="p">=</span><span class="si">{</span><span class="nx">fetchUsers</span><span class="si">}</span> <span class="p">/&gt;;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="3-advanced-state-management">3. Advanced State Management</h3>

<h4 id="custom-state-management-with-context">Custom State Management with Context</h4>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
</pre></td><td class="rouge-code"><pre><span class="c1">// Advanced State Management Implementation</span>
<span class="kd">const</span> <span class="nx">StateContext</span> <span class="o">=</span> <span class="nx">createContext</span><span class="p">();</span>
<span class="kd">const</span> <span class="nx">DispatchContext</span> <span class="o">=</span> <span class="nx">createContext</span><span class="p">();</span>

<span class="kd">function</span> <span class="nx">reducer</span><span class="p">(</span><span class="nx">state</span><span class="p">,</span> <span class="nx">action</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">switch</span> <span class="p">(</span><span class="nx">action</span><span class="p">.</span><span class="nx">type</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">case</span> <span class="dl">"</span><span class="s2">SET_USER</span><span class="dl">"</span><span class="p">:</span>
      <span class="k">return</span> <span class="p">{</span>
        <span class="p">...</span><span class="nx">state</span><span class="p">,</span>
        <span class="na">user</span><span class="p">:</span> <span class="nx">action</span><span class="p">.</span><span class="nx">payload</span><span class="p">,</span>
      <span class="p">};</span>
    <span class="k">case</span> <span class="dl">"</span><span class="s2">SET_THEME</span><span class="dl">"</span><span class="p">:</span>
      <span class="k">return</span> <span class="p">{</span>
        <span class="p">...</span><span class="nx">state</span><span class="p">,</span>
        <span class="na">theme</span><span class="p">:</span> <span class="nx">action</span><span class="p">.</span><span class="nx">payload</span><span class="p">,</span>
      <span class="p">};</span>
    <span class="k">case</span> <span class="dl">"</span><span class="s2">ADD_TODO</span><span class="dl">"</span><span class="p">:</span>
      <span class="k">return</span> <span class="p">{</span>
        <span class="p">...</span><span class="nx">state</span><span class="p">,</span>
        <span class="na">todos</span><span class="p">:</span> <span class="p">[...</span><span class="nx">state</span><span class="p">.</span><span class="nx">todos</span><span class="p">,</span> <span class="nx">action</span><span class="p">.</span><span class="nx">payload</span><span class="p">],</span>
      <span class="p">};</span>
    <span class="k">case</span> <span class="dl">"</span><span class="s2">TOGGLE_TODO</span><span class="dl">"</span><span class="p">:</span>
      <span class="k">return</span> <span class="p">{</span>
        <span class="p">...</span><span class="nx">state</span><span class="p">,</span>
        <span class="na">todos</span><span class="p">:</span> <span class="nx">state</span><span class="p">.</span><span class="nx">todos</span><span class="p">.</span><span class="nx">map</span><span class="p">((</span><span class="nx">todo</span><span class="p">)</span> <span class="o">=&gt;</span>
          <span class="nx">todo</span><span class="p">.</span><span class="nx">id</span> <span class="o">===</span> <span class="nx">action</span><span class="p">.</span><span class="nx">payload</span>
            <span class="p">?</span> <span class="p">{</span> <span class="p">...</span><span class="nx">todo</span><span class="p">,</span> <span class="na">completed</span><span class="p">:</span> <span class="o">!</span><span class="nx">todo</span><span class="p">.</span><span class="nx">completed</span> <span class="p">}</span>
            <span class="p">:</span> <span class="nx">todo</span>
        <span class="p">),</span>
      <span class="p">};</span>
    <span class="k">case</span> <span class="dl">"</span><span class="s2">DELETE_TODO</span><span class="dl">"</span><span class="p">:</span>
      <span class="k">return</span> <span class="p">{</span>
        <span class="p">...</span><span class="nx">state</span><span class="p">,</span>
        <span class="na">todos</span><span class="p">:</span> <span class="nx">state</span><span class="p">.</span><span class="nx">todos</span><span class="p">.</span><span class="nx">filter</span><span class="p">((</span><span class="nx">todo</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">todo</span><span class="p">.</span><span class="nx">id</span> <span class="o">!==</span> <span class="nx">action</span><span class="p">.</span><span class="nx">payload</span><span class="p">),</span>
      <span class="p">};</span>
    <span class="nl">default</span><span class="p">:</span>
      <span class="k">return</span> <span class="nx">state</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">StateProvider</span><span class="p">({</span> <span class="nx">children</span> <span class="p">})</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="p">[</span><span class="nx">state</span><span class="p">,</span> <span class="nx">dispatch</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useReducer</span><span class="p">(</span><span class="nx">reducer</span><span class="p">,</span> <span class="p">{</span>
    <span class="na">user</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="na">theme</span><span class="p">:</span> <span class="dl">"</span><span class="s2">light</span><span class="dl">"</span><span class="p">,</span>
    <span class="na">todos</span><span class="p">:</span> <span class="p">[],</span>
  <span class="p">});</span>

  <span class="k">return</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nc">StateContext</span><span class="p">.</span><span class="nc">Provider</span> <span class="na">value</span><span class="p">=</span><span class="si">{</span><span class="nx">state</span><span class="si">}</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nc">DispatchContext</span><span class="p">.</span><span class="nc">Provider</span> <span class="na">value</span><span class="p">=</span><span class="si">{</span><span class="nx">dispatch</span><span class="si">}</span><span class="p">&gt;</span>
        <span class="si">{</span><span class="nx">children</span><span class="si">}</span>
      <span class="p">&lt;/</span><span class="nc">DispatchContext</span><span class="p">.</span><span class="nc">Provider</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nc">StateContext</span><span class="p">.</span><span class="nc">Provider</span><span class="p">&gt;</span>
  <span class="p">);</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">useState</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">context</span> <span class="o">=</span> <span class="nx">useContext</span><span class="p">(</span><span class="nx">StateContext</span><span class="p">);</span>
  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">context</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="dl">"</span><span class="s2">useState must be used within a StateProvider</span><span class="dl">"</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="nx">context</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">useDispatch</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">context</span> <span class="o">=</span> <span class="nx">useContext</span><span class="p">(</span><span class="nx">DispatchContext</span><span class="p">);</span>
  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">context</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="dl">"</span><span class="s2">useDispatch must be used within a StateProvider</span><span class="dl">"</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="nx">context</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// Custom hooks for specific state</span>
<span class="kd">function</span> <span class="nx">useUser</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">state</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">();</span>
  <span class="kd">const</span> <span class="nx">dispatch</span> <span class="o">=</span> <span class="nx">useDispatch</span><span class="p">();</span>

  <span class="k">return</span> <span class="p">{</span>
    <span class="na">user</span><span class="p">:</span> <span class="nx">state</span><span class="p">.</span><span class="nx">user</span><span class="p">,</span>
    <span class="na">setUser</span><span class="p">:</span> <span class="p">(</span><span class="nx">user</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">dispatch</span><span class="p">({</span> <span class="na">type</span><span class="p">:</span> <span class="dl">"</span><span class="s2">SET_USER</span><span class="dl">"</span><span class="p">,</span> <span class="na">payload</span><span class="p">:</span> <span class="nx">user</span> <span class="p">}),</span>
    <span class="na">logout</span><span class="p">:</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="nx">dispatch</span><span class="p">({</span> <span class="na">type</span><span class="p">:</span> <span class="dl">"</span><span class="s2">SET_USER</span><span class="dl">"</span><span class="p">,</span> <span class="na">payload</span><span class="p">:</span> <span class="kc">null</span> <span class="p">}),</span>
  <span class="p">};</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">useTheme</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">state</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">();</span>
  <span class="kd">const</span> <span class="nx">dispatch</span> <span class="o">=</span> <span class="nx">useDispatch</span><span class="p">();</span>

  <span class="k">return</span> <span class="p">{</span>
    <span class="na">theme</span><span class="p">:</span> <span class="nx">state</span><span class="p">.</span><span class="nx">theme</span><span class="p">,</span>
    <span class="na">setTheme</span><span class="p">:</span> <span class="p">(</span><span class="nx">theme</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">dispatch</span><span class="p">({</span> <span class="na">type</span><span class="p">:</span> <span class="dl">"</span><span class="s2">SET_THEME</span><span class="dl">"</span><span class="p">,</span> <span class="na">payload</span><span class="p">:</span> <span class="nx">theme</span> <span class="p">}),</span>
    <span class="na">toggleTheme</span><span class="p">:</span> <span class="p">()</span> <span class="o">=&gt;</span>
      <span class="nx">dispatch</span><span class="p">({</span>
        <span class="na">type</span><span class="p">:</span> <span class="dl">"</span><span class="s2">SET_THEME</span><span class="dl">"</span><span class="p">,</span>
        <span class="na">payload</span><span class="p">:</span> <span class="nx">state</span><span class="p">.</span><span class="nx">theme</span> <span class="o">===</span> <span class="dl">"</span><span class="s2">light</span><span class="dl">"</span> <span class="p">?</span> <span class="dl">"</span><span class="s2">dark</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">light</span><span class="dl">"</span><span class="p">,</span>
      <span class="p">}),</span>
  <span class="p">};</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">useTodos</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">state</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">();</span>
  <span class="kd">const</span> <span class="nx">dispatch</span> <span class="o">=</span> <span class="nx">useDispatch</span><span class="p">();</span>

  <span class="k">return</span> <span class="p">{</span>
    <span class="na">todos</span><span class="p">:</span> <span class="nx">state</span><span class="p">.</span><span class="nx">todos</span><span class="p">,</span>
    <span class="na">addTodo</span><span class="p">:</span> <span class="p">(</span><span class="nx">text</span><span class="p">)</span> <span class="o">=&gt;</span>
      <span class="nx">dispatch</span><span class="p">({</span>
        <span class="na">type</span><span class="p">:</span> <span class="dl">"</span><span class="s2">ADD_TODO</span><span class="dl">"</span><span class="p">,</span>
        <span class="na">payload</span><span class="p">:</span> <span class="p">{</span> <span class="na">id</span><span class="p">:</span> <span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">(),</span> <span class="nx">text</span><span class="p">,</span> <span class="na">completed</span><span class="p">:</span> <span class="kc">false</span> <span class="p">},</span>
      <span class="p">}),</span>
    <span class="na">toggleTodo</span><span class="p">:</span> <span class="p">(</span><span class="nx">id</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">dispatch</span><span class="p">({</span> <span class="na">type</span><span class="p">:</span> <span class="dl">"</span><span class="s2">TOGGLE_TODO</span><span class="dl">"</span><span class="p">,</span> <span class="na">payload</span><span class="p">:</span> <span class="nx">id</span> <span class="p">}),</span>
    <span class="na">deleteTodo</span><span class="p">:</span> <span class="p">(</span><span class="nx">id</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">dispatch</span><span class="p">({</span> <span class="na">type</span><span class="p">:</span> <span class="dl">"</span><span class="s2">DELETE_TODO</span><span class="dl">"</span><span class="p">,</span> <span class="na">payload</span><span class="p">:</span> <span class="nx">id</span> <span class="p">}),</span>
  <span class="p">};</span>
<span class="p">}</span>

<span class="c1">// Usage</span>
<span class="kd">function</span> <span class="nx">App</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nc">StateProvider</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nc">TodoApp</span> <span class="p">/&gt;</span>
    <span class="p">&lt;/</span><span class="nc">StateProvider</span><span class="p">&gt;</span>
  <span class="p">);</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">TodoApp</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="p">{</span> <span class="nx">user</span><span class="p">,</span> <span class="nx">setUser</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">useUser</span><span class="p">();</span>
  <span class="kd">const</span> <span class="p">{</span> <span class="nx">theme</span><span class="p">,</span> <span class="nx">toggleTheme</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">useTheme</span><span class="p">();</span>
  <span class="kd">const</span> <span class="p">{</span> <span class="nx">todos</span><span class="p">,</span> <span class="nx">addTodo</span><span class="p">,</span> <span class="nx">toggleTodo</span><span class="p">,</span> <span class="nx">deleteTodo</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">useTodos</span><span class="p">();</span>

  <span class="k">return</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="p">=</span><span class="si">{</span><span class="s2">`app </span><span class="p">${</span><span class="nx">theme</span><span class="p">}</span><span class="s2">`</span><span class="si">}</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">button</span> <span class="na">onClick</span><span class="p">=</span><span class="si">{</span><span class="nx">toggleTheme</span><span class="si">}</span><span class="p">&gt;</span>
        Switch to <span class="si">{</span><span class="nx">theme</span> <span class="o">===</span> <span class="dl">"</span><span class="s2">light</span><span class="dl">"</span> <span class="p">?</span> <span class="dl">"</span><span class="s2">dark</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">light</span><span class="dl">"</span><span class="si">}</span> mode
      <span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>

      <span class="si">{</span><span class="nx">user</span> <span class="p">?</span> <span class="p">(</span>
        <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
          <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>Welcome, <span class="si">{</span><span class="nx">user</span><span class="p">.</span><span class="nx">name</span><span class="si">}</span>!<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
          <span class="p">&lt;</span><span class="nc">TodoList</span> <span class="na">todos</span><span class="p">=</span><span class="si">{</span><span class="nx">todos</span><span class="si">}</span> <span class="na">onToggle</span><span class="p">=</span><span class="si">{</span><span class="nx">toggleTodo</span><span class="si">}</span> <span class="na">onDelete</span><span class="p">=</span><span class="si">{</span><span class="nx">deleteTodo</span><span class="si">}</span> <span class="p">/&gt;</span>
          <span class="p">&lt;</span><span class="nc">AddTodo</span> <span class="na">onAdd</span><span class="p">=</span><span class="si">{</span><span class="nx">addTodo</span><span class="si">}</span> <span class="p">/&gt;</span>
        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
      <span class="p">)</span> <span class="p">:</span> <span class="p">(</span>
        <span class="p">&lt;</span><span class="nc">LoginForm</span> <span class="na">onLogin</span><span class="p">=</span><span class="si">{</span><span class="nx">setUser</span><span class="si">}</span> <span class="p">/&gt;</span>
      <span class="p">)</span><span class="si">}</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
  <span class="p">);</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="4-advanced-performance-optimization">4. Advanced Performance Optimization</h3>

<h4 id="virtual-scrolling-implementation">Virtual Scrolling Implementation</h4>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
</pre></td><td class="rouge-code"><pre><span class="c1">// Virtual Scrolling Implementation</span>
<span class="kd">class</span> <span class="nx">VirtualScroller</span> <span class="kd">extends</span> <span class="nx">Component</span> <span class="p">{</span>
  <span class="kd">constructor</span><span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">super</span><span class="p">(</span><span class="nx">props</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">state</span> <span class="o">=</span> <span class="p">{</span>
      <span class="na">scrollTop</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
      <span class="na">viewportHeight</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="p">};</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">containerRef</span> <span class="o">=</span> <span class="nx">createRef</span><span class="p">();</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">itemHeight</span> <span class="o">=</span> <span class="nx">props</span><span class="p">.</span><span class="nx">itemHeight</span> <span class="o">||</span> <span class="mi">50</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">overscan</span> <span class="o">=</span> <span class="nx">props</span><span class="p">.</span><span class="nx">overscan</span> <span class="o">||</span> <span class="mi">5</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="nx">componentDidMount</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">updateViewportHeight</span><span class="p">();</span>
    <span class="nb">window</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="dl">"</span><span class="s2">resize</span><span class="dl">"</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">updateViewportHeight</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="nx">componentWillUnmount</span><span class="p">()</span> <span class="p">{</span>
    <span class="nb">window</span><span class="p">.</span><span class="nx">removeEventListener</span><span class="p">(</span><span class="dl">"</span><span class="s2">resize</span><span class="dl">"</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">updateViewportHeight</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="nx">updateViewportHeight</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">containerRef</span><span class="p">.</span><span class="nx">current</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span>
        <span class="na">viewportHeight</span><span class="p">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">containerRef</span><span class="p">.</span><span class="nx">current</span><span class="p">.</span><span class="nx">clientHeight</span><span class="p">,</span>
      <span class="p">});</span>
    <span class="p">}</span>
  <span class="p">};</span>

  <span class="nx">handleScroll</span> <span class="o">=</span> <span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span>
      <span class="na">scrollTop</span><span class="p">:</span> <span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">scrollTop</span><span class="p">,</span>
    <span class="p">});</span>
  <span class="p">};</span>

  <span class="nx">getVisibleRange</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="p">{</span> <span class="nx">scrollTop</span><span class="p">,</span> <span class="nx">viewportHeight</span> <span class="p">}</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">;</span>
    <span class="kd">const</span> <span class="p">{</span> <span class="nx">items</span> <span class="p">}</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">;</span>

    <span class="kd">const</span> <span class="nx">startIndex</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nx">scrollTop</span> <span class="o">/</span> <span class="k">this</span><span class="p">.</span><span class="nx">itemHeight</span><span class="p">);</span>
    <span class="kd">const</span> <span class="nx">endIndex</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">min</span><span class="p">(</span>
      <span class="nx">startIndex</span> <span class="o">+</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">ceil</span><span class="p">(</span><span class="nx">viewportHeight</span> <span class="o">/</span> <span class="k">this</span><span class="p">.</span><span class="nx">itemHeight</span><span class="p">)</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">overscan</span><span class="p">,</span>
      <span class="nx">items</span><span class="p">.</span><span class="nx">length</span>
    <span class="p">);</span>

    <span class="k">return</span> <span class="p">{</span>
      <span class="na">startIndex</span><span class="p">:</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nx">startIndex</span> <span class="o">-</span> <span class="k">this</span><span class="p">.</span><span class="nx">overscan</span><span class="p">),</span>
      <span class="nx">endIndex</span><span class="p">,</span>
    <span class="p">};</span>
  <span class="p">}</span>

  <span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="p">{</span> <span class="nx">items</span><span class="p">,</span> <span class="nx">renderItem</span> <span class="p">}</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">;</span>
    <span class="kd">const</span> <span class="p">{</span> <span class="nx">scrollTop</span><span class="p">,</span> <span class="nx">viewportHeight</span> <span class="p">}</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">;</span>
    <span class="kd">const</span> <span class="p">{</span> <span class="nx">startIndex</span><span class="p">,</span> <span class="nx">endIndex</span> <span class="p">}</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">getVisibleRange</span><span class="p">();</span>

    <span class="kd">const</span> <span class="nx">visibleItems</span> <span class="o">=</span> <span class="nx">items</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="nx">startIndex</span><span class="p">,</span> <span class="nx">endIndex</span><span class="p">);</span>
    <span class="kd">const</span> <span class="nx">totalHeight</span> <span class="o">=</span> <span class="nx">items</span><span class="p">.</span><span class="nx">length</span> <span class="o">*</span> <span class="k">this</span><span class="p">.</span><span class="nx">itemHeight</span><span class="p">;</span>
    <span class="kd">const</span> <span class="nx">offsetY</span> <span class="o">=</span> <span class="nx">startIndex</span> <span class="o">*</span> <span class="k">this</span><span class="p">.</span><span class="nx">itemHeight</span><span class="p">;</span>

    <span class="k">return</span> <span class="p">(</span>
      <span class="p">&lt;</span><span class="nt">div</span>
        <span class="na">ref</span><span class="p">=</span><span class="si">{</span><span class="k">this</span><span class="p">.</span><span class="nx">containerRef</span><span class="si">}</span>
        <span class="na">style</span><span class="p">=</span><span class="si">{</span><span class="p">{</span>
          <span class="na">height</span><span class="p">:</span> <span class="nx">viewportHeight</span><span class="p">,</span>
          <span class="na">overflow</span><span class="p">:</span> <span class="dl">"</span><span class="s2">auto</span><span class="dl">"</span><span class="p">,</span>
        <span class="p">}</span><span class="si">}</span>
        <span class="na">onScroll</span><span class="p">=</span><span class="si">{</span><span class="k">this</span><span class="p">.</span><span class="nx">handleScroll</span><span class="si">}</span>
      <span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">style</span><span class="p">=</span><span class="si">{</span><span class="p">{</span> <span class="na">height</span><span class="p">:</span> <span class="nx">totalHeight</span><span class="p">,</span> <span class="na">position</span><span class="p">:</span> <span class="dl">"</span><span class="s2">relative</span><span class="dl">"</span> <span class="p">}</span><span class="si">}</span><span class="p">&gt;</span>
          <span class="p">&lt;</span><span class="nt">div</span> <span class="na">style</span><span class="p">=</span><span class="si">{</span><span class="p">{</span> <span class="na">transform</span><span class="p">:</span> <span class="s2">`translateY(</span><span class="p">${</span><span class="nx">offsetY</span><span class="p">}</span><span class="s2">px)`</span> <span class="p">}</span><span class="si">}</span><span class="p">&gt;</span>
            <span class="si">{</span><span class="nx">visibleItems</span><span class="p">.</span><span class="nx">map</span><span class="p">((</span><span class="nx">item</span><span class="p">,</span> <span class="nx">index</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">(</span>
              <span class="p">&lt;</span><span class="nt">div</span> <span class="na">key</span><span class="p">=</span><span class="si">{</span><span class="nx">startIndex</span> <span class="o">+</span> <span class="nx">index</span><span class="si">}</span> <span class="na">style</span><span class="p">=</span><span class="si">{</span><span class="p">{</span> <span class="na">height</span><span class="p">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">itemHeight</span> <span class="p">}</span><span class="si">}</span><span class="p">&gt;</span>
                <span class="si">{</span><span class="nx">renderItem</span><span class="p">(</span><span class="nx">item</span><span class="p">,</span> <span class="nx">startIndex</span> <span class="o">+</span> <span class="nx">index</span><span class="p">)</span><span class="si">}</span>
              <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
            <span class="p">))</span><span class="si">}</span>
          <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
      <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    <span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// Usage</span>
<span class="kd">function</span> <span class="nx">LargeList</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">items</span> <span class="o">=</span> <span class="nb">Array</span><span class="p">.</span><span class="k">from</span><span class="p">({</span> <span class="na">length</span><span class="p">:</span> <span class="mi">10000</span> <span class="p">},</span> <span class="p">(</span><span class="nx">_</span><span class="p">,</span> <span class="nx">i</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">({</span>
    <span class="na">id</span><span class="p">:</span> <span class="nx">i</span><span class="p">,</span>
    <span class="na">text</span><span class="p">:</span> <span class="s2">`Item </span><span class="p">${</span><span class="nx">i</span><span class="p">}</span><span class="s2">`</span><span class="p">,</span>
  <span class="p">}));</span>

  <span class="kd">const</span> <span class="nx">renderItem</span> <span class="o">=</span> <span class="p">(</span><span class="nx">item</span><span class="p">,</span> <span class="nx">index</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="p">=</span><span class="s">"list-item"</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">span</span><span class="p">&gt;</span><span class="si">{</span><span class="nx">item</span><span class="p">.</span><span class="nx">text</span><span class="si">}</span><span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">button</span> <span class="na">onClick</span><span class="p">=</span><span class="si">{</span><span class="p">()</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">`Clicked item </span><span class="p">${</span><span class="nx">index</span><span class="p">}</span><span class="s2">`</span><span class="p">)</span><span class="si">}</span><span class="p">&gt;</span>
        Click me
      <span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
  <span class="p">);</span>

  <span class="k">return</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nc">VirtualScroller</span>
      <span class="na">items</span><span class="p">=</span><span class="si">{</span><span class="nx">items</span><span class="si">}</span>
      <span class="na">itemHeight</span><span class="p">=</span><span class="si">{</span><span class="mi">50</span><span class="si">}</span>
      <span class="na">overscan</span><span class="p">=</span><span class="si">{</span><span class="mi">5</span><span class="si">}</span>
      <span class="na">renderItem</span><span class="p">=</span><span class="si">{</span><span class="nx">renderItem</span><span class="si">}</span>
    <span class="p">/&gt;</span>
  <span class="p">);</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="5-advanced-testing-strategies">5. Advanced Testing Strategies</h3>

<h4 id="component-testing-with-react-testing-library">Component Testing with React Testing Library</h4>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
</pre></td><td class="rouge-code"><pre><span class="c1">// Advanced Testing Implementation</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">render</span><span class="p">,</span> <span class="nx">screen</span><span class="p">,</span> <span class="nx">fireEvent</span><span class="p">,</span> <span class="nx">waitFor</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">@testing-library/react</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">userEvent</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">@testing-library/user-event</span><span class="dl">"</span><span class="p">;</span>

<span class="c1">// Custom render function with providers</span>
<span class="kd">function</span> <span class="nx">renderWithProviders</span><span class="p">(</span><span class="nx">ui</span><span class="p">,</span> <span class="p">{</span> <span class="nx">initialState</span> <span class="o">=</span> <span class="p">{},</span> <span class="p">...</span><span class="nx">renderOptions</span> <span class="p">}</span> <span class="o">=</span> <span class="p">{})</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">Wrapper</span> <span class="o">=</span> <span class="p">({</span> <span class="nx">children</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nc">StateProvider</span> <span class="na">initialState</span><span class="p">=</span><span class="si">{</span><span class="nx">initialState</span><span class="si">}</span><span class="p">&gt;</span><span class="si">{</span><span class="nx">children</span><span class="si">}</span><span class="p">&lt;/</span><span class="nc">StateProvider</span><span class="p">&gt;</span>
  <span class="p">);</span>

  <span class="k">return</span> <span class="nx">render</span><span class="p">(</span><span class="nx">ui</span><span class="p">,</span> <span class="p">{</span> <span class="na">wrapper</span><span class="p">:</span> <span class="nx">Wrapper</span><span class="p">,</span> <span class="p">...</span><span class="nx">renderOptions</span> <span class="p">});</span>
<span class="p">}</span>

<span class="c1">// Test utilities</span>
<span class="kd">const</span> <span class="nx">createMockUser</span> <span class="o">=</span> <span class="p">(</span><span class="nx">overrides</span> <span class="o">=</span> <span class="p">{})</span> <span class="o">=&gt;</span> <span class="p">({</span>
  <span class="na">id</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
  <span class="na">name</span><span class="p">:</span> <span class="dl">"</span><span class="s2">John Doe</span><span class="dl">"</span><span class="p">,</span>
  <span class="na">email</span><span class="p">:</span> <span class="dl">"</span><span class="s2">john@example.com</span><span class="dl">"</span><span class="p">,</span>
  <span class="p">...</span><span class="nx">overrides</span><span class="p">,</span>
<span class="p">});</span>

<span class="kd">const</span> <span class="nx">createMockTodo</span> <span class="o">=</span> <span class="p">(</span><span class="nx">overrides</span> <span class="o">=</span> <span class="p">{})</span> <span class="o">=&gt;</span> <span class="p">({</span>
  <span class="na">id</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
  <span class="na">text</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Test todo</span><span class="dl">"</span><span class="p">,</span>
  <span class="na">completed</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
  <span class="p">...</span><span class="nx">overrides</span><span class="p">,</span>
<span class="p">});</span>

<span class="c1">// Component tests</span>
<span class="nx">describe</span><span class="p">(</span><span class="dl">"</span><span class="s2">TodoApp</span><span class="dl">"</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">test</span><span class="p">(</span><span class="dl">"</span><span class="s2">renders login form when user is not authenticated</span><span class="dl">"</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">renderWithProviders</span><span class="p">(&lt;</span><span class="nc">TodoApp</span> <span class="p">/&gt;);</span>

    <span class="nx">expect</span><span class="p">(</span><span class="nx">screen</span><span class="p">.</span><span class="nx">getByLabelText</span><span class="p">(</span><span class="sr">/email/i</span><span class="p">)).</span><span class="nx">toBeInTheDocument</span><span class="p">();</span>
    <span class="nx">expect</span><span class="p">(</span><span class="nx">screen</span><span class="p">.</span><span class="nx">getByLabelText</span><span class="p">(</span><span class="sr">/password/i</span><span class="p">)).</span><span class="nx">toBeInTheDocument</span><span class="p">();</span>
    <span class="nx">expect</span><span class="p">(</span><span class="nx">screen</span><span class="p">.</span><span class="nx">getByRole</span><span class="p">(</span><span class="dl">"</span><span class="s2">button</span><span class="dl">"</span><span class="p">,</span> <span class="p">{</span> <span class="na">name</span><span class="p">:</span> <span class="sr">/login/i</span> <span class="p">})).</span><span class="nx">toBeInTheDocument</span><span class="p">();</span>
  <span class="p">});</span>

  <span class="nx">test</span><span class="p">(</span><span class="dl">"</span><span class="s2">renders todo list when user is authenticated</span><span class="dl">"</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">mockUser</span> <span class="o">=</span> <span class="nx">createMockUser</span><span class="p">();</span>
    <span class="kd">const</span> <span class="nx">mockTodos</span> <span class="o">=</span> <span class="p">[</span>
      <span class="nx">createMockTodo</span><span class="p">({</span> <span class="na">id</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="na">text</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Todo 1</span><span class="dl">"</span> <span class="p">}),</span>
      <span class="nx">createMockTodo</span><span class="p">({</span> <span class="na">id</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="na">text</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Todo 2</span><span class="dl">"</span> <span class="p">}),</span>
    <span class="p">];</span>

    <span class="nx">renderWithProviders</span><span class="p">(&lt;</span><span class="nc">TodoApp</span> <span class="p">/&gt;,</span> <span class="p">{</span>
      <span class="na">initialState</span><span class="p">:</span> <span class="p">{</span>
        <span class="na">user</span><span class="p">:</span> <span class="nx">mockUser</span><span class="p">,</span>
        <span class="na">todos</span><span class="p">:</span> <span class="nx">mockTodos</span><span class="p">,</span>
      <span class="p">},</span>
    <span class="p">});</span>

    <span class="nx">expect</span><span class="p">(</span><span class="nx">screen</span><span class="p">.</span><span class="nx">getByText</span><span class="p">(</span><span class="dl">"</span><span class="s2">Welcome, John Doe!</span><span class="dl">"</span><span class="p">)).</span><span class="nx">toBeInTheDocument</span><span class="p">();</span>
    <span class="nx">expect</span><span class="p">(</span><span class="nx">screen</span><span class="p">.</span><span class="nx">getByText</span><span class="p">(</span><span class="dl">"</span><span class="s2">Todo 1</span><span class="dl">"</span><span class="p">)).</span><span class="nx">toBeInTheDocument</span><span class="p">();</span>
    <span class="nx">expect</span><span class="p">(</span><span class="nx">screen</span><span class="p">.</span><span class="nx">getByText</span><span class="p">(</span><span class="dl">"</span><span class="s2">Todo 2</span><span class="dl">"</span><span class="p">)).</span><span class="nx">toBeInTheDocument</span><span class="p">();</span>
  <span class="p">});</span>

  <span class="nx">test</span><span class="p">(</span><span class="dl">"</span><span class="s2">allows user to add new todo</span><span class="dl">"</span><span class="p">,</span> <span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">mockUser</span> <span class="o">=</span> <span class="nx">createMockUser</span><span class="p">();</span>
    <span class="kd">const</span> <span class="nx">user</span> <span class="o">=</span> <span class="nx">userEvent</span><span class="p">.</span><span class="nx">setup</span><span class="p">();</span>

    <span class="nx">renderWithProviders</span><span class="p">(&lt;</span><span class="nc">TodoApp</span> <span class="p">/&gt;,</span> <span class="p">{</span>
      <span class="na">initialState</span><span class="p">:</span> <span class="p">{</span> <span class="na">user</span><span class="p">:</span> <span class="nx">mockUser</span> <span class="p">},</span>
    <span class="p">});</span>

    <span class="kd">const</span> <span class="nx">input</span> <span class="o">=</span> <span class="nx">screen</span><span class="p">.</span><span class="nx">getByPlaceholderText</span><span class="p">(</span><span class="sr">/add new todo/i</span><span class="p">);</span>
    <span class="kd">const</span> <span class="nx">addButton</span> <span class="o">=</span> <span class="nx">screen</span><span class="p">.</span><span class="nx">getByRole</span><span class="p">(</span><span class="dl">"</span><span class="s2">button</span><span class="dl">"</span><span class="p">,</span> <span class="p">{</span> <span class="na">name</span><span class="p">:</span> <span class="sr">/add/i</span> <span class="p">});</span>

    <span class="k">await</span> <span class="nx">user</span><span class="p">.</span><span class="nx">type</span><span class="p">(</span><span class="nx">input</span><span class="p">,</span> <span class="dl">"</span><span class="s2">New todo item</span><span class="dl">"</span><span class="p">);</span>
    <span class="k">await</span> <span class="nx">user</span><span class="p">.</span><span class="nx">click</span><span class="p">(</span><span class="nx">addButton</span><span class="p">);</span>

    <span class="nx">expect</span><span class="p">(</span><span class="nx">screen</span><span class="p">.</span><span class="nx">getByText</span><span class="p">(</span><span class="dl">"</span><span class="s2">New todo item</span><span class="dl">"</span><span class="p">)).</span><span class="nx">toBeInTheDocument</span><span class="p">();</span>
  <span class="p">});</span>

  <span class="nx">test</span><span class="p">(</span><span class="dl">"</span><span class="s2">allows user to toggle todo completion</span><span class="dl">"</span><span class="p">,</span> <span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">mockUser</span> <span class="o">=</span> <span class="nx">createMockUser</span><span class="p">();</span>
    <span class="kd">const</span> <span class="nx">mockTodo</span> <span class="o">=</span> <span class="nx">createMockTodo</span><span class="p">();</span>
    <span class="kd">const</span> <span class="nx">user</span> <span class="o">=</span> <span class="nx">userEvent</span><span class="p">.</span><span class="nx">setup</span><span class="p">();</span>

    <span class="nx">renderWithProviders</span><span class="p">(&lt;</span><span class="nc">TodoApp</span> <span class="p">/&gt;,</span> <span class="p">{</span>
      <span class="na">initialState</span><span class="p">:</span> <span class="p">{</span>
        <span class="na">user</span><span class="p">:</span> <span class="nx">mockUser</span><span class="p">,</span>
        <span class="na">todos</span><span class="p">:</span> <span class="p">[</span><span class="nx">mockTodo</span><span class="p">],</span>
      <span class="p">},</span>
    <span class="p">});</span>

    <span class="kd">const</span> <span class="nx">todoItem</span> <span class="o">=</span> <span class="nx">screen</span><span class="p">.</span><span class="nx">getByText</span><span class="p">(</span><span class="dl">"</span><span class="s2">Test todo</span><span class="dl">"</span><span class="p">);</span>
    <span class="kd">const</span> <span class="nx">checkbox</span> <span class="o">=</span> <span class="nx">screen</span><span class="p">.</span><span class="nx">getByRole</span><span class="p">(</span><span class="dl">"</span><span class="s2">checkbox</span><span class="dl">"</span><span class="p">);</span>

    <span class="nx">expect</span><span class="p">(</span><span class="nx">checkbox</span><span class="p">).</span><span class="nx">not</span><span class="p">.</span><span class="nx">toBeChecked</span><span class="p">();</span>

    <span class="k">await</span> <span class="nx">user</span><span class="p">.</span><span class="nx">click</span><span class="p">(</span><span class="nx">checkbox</span><span class="p">);</span>

    <span class="nx">expect</span><span class="p">(</span><span class="nx">checkbox</span><span class="p">).</span><span class="nx">toBeChecked</span><span class="p">();</span>
  <span class="p">});</span>

  <span class="nx">test</span><span class="p">(</span><span class="dl">"</span><span class="s2">allows user to delete todo</span><span class="dl">"</span><span class="p">,</span> <span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">mockUser</span> <span class="o">=</span> <span class="nx">createMockUser</span><span class="p">();</span>
    <span class="kd">const</span> <span class="nx">mockTodo</span> <span class="o">=</span> <span class="nx">createMockTodo</span><span class="p">();</span>
    <span class="kd">const</span> <span class="nx">user</span> <span class="o">=</span> <span class="nx">userEvent</span><span class="p">.</span><span class="nx">setup</span><span class="p">();</span>

    <span class="nx">renderWithProviders</span><span class="p">(&lt;</span><span class="nc">TodoApp</span> <span class="p">/&gt;,</span> <span class="p">{</span>
      <span class="na">initialState</span><span class="p">:</span> <span class="p">{</span>
        <span class="na">user</span><span class="p">:</span> <span class="nx">mockUser</span><span class="p">,</span>
        <span class="na">todos</span><span class="p">:</span> <span class="p">[</span><span class="nx">mockTodo</span><span class="p">],</span>
      <span class="p">},</span>
    <span class="p">});</span>

    <span class="nx">expect</span><span class="p">(</span><span class="nx">screen</span><span class="p">.</span><span class="nx">getByText</span><span class="p">(</span><span class="dl">"</span><span class="s2">Test todo</span><span class="dl">"</span><span class="p">)).</span><span class="nx">toBeInTheDocument</span><span class="p">();</span>

    <span class="kd">const</span> <span class="nx">deleteButton</span> <span class="o">=</span> <span class="nx">screen</span><span class="p">.</span><span class="nx">getByRole</span><span class="p">(</span><span class="dl">"</span><span class="s2">button</span><span class="dl">"</span><span class="p">,</span> <span class="p">{</span> <span class="na">name</span><span class="p">:</span> <span class="sr">/delete/i</span> <span class="p">});</span>
    <span class="k">await</span> <span class="nx">user</span><span class="p">.</span><span class="nx">click</span><span class="p">(</span><span class="nx">deleteButton</span><span class="p">);</span>

    <span class="nx">expect</span><span class="p">(</span><span class="nx">screen</span><span class="p">.</span><span class="nx">queryByText</span><span class="p">(</span><span class="dl">"</span><span class="s2">Test todo</span><span class="dl">"</span><span class="p">)).</span><span class="nx">not</span><span class="p">.</span><span class="nx">toBeInTheDocument</span><span class="p">();</span>
  <span class="p">});</span>

  <span class="nx">test</span><span class="p">(</span><span class="dl">"</span><span class="s2">handles theme switching</span><span class="dl">"</span><span class="p">,</span> <span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">mockUser</span> <span class="o">=</span> <span class="nx">createMockUser</span><span class="p">();</span>
    <span class="kd">const</span> <span class="nx">user</span> <span class="o">=</span> <span class="nx">userEvent</span><span class="p">.</span><span class="nx">setup</span><span class="p">();</span>

    <span class="nx">renderWithProviders</span><span class="p">(&lt;</span><span class="nc">TodoApp</span> <span class="p">/&gt;,</span> <span class="p">{</span>
      <span class="na">initialState</span><span class="p">:</span> <span class="p">{</span> <span class="na">user</span><span class="p">:</span> <span class="nx">mockUser</span> <span class="p">},</span>
    <span class="p">});</span>

    <span class="kd">const</span> <span class="nx">themeButton</span> <span class="o">=</span> <span class="nx">screen</span><span class="p">.</span><span class="nx">getByRole</span><span class="p">(</span><span class="dl">"</span><span class="s2">button</span><span class="dl">"</span><span class="p">,</span> <span class="p">{</span>
      <span class="na">name</span><span class="p">:</span> <span class="sr">/switch to dark mode/i</span><span class="p">,</span>
    <span class="p">});</span>

    <span class="k">await</span> <span class="nx">user</span><span class="p">.</span><span class="nx">click</span><span class="p">(</span><span class="nx">themeButton</span><span class="p">);</span>

    <span class="nx">expect</span><span class="p">(</span>
      <span class="nx">screen</span><span class="p">.</span><span class="nx">getByRole</span><span class="p">(</span><span class="dl">"</span><span class="s2">button</span><span class="dl">"</span><span class="p">,</span> <span class="p">{</span> <span class="na">name</span><span class="p">:</span> <span class="sr">/switch to light mode/i</span> <span class="p">})</span>
    <span class="p">).</span><span class="nx">toBeInTheDocument</span><span class="p">();</span>
  <span class="p">});</span>
<span class="p">});</span>

<span class="c1">// Integration tests</span>
<span class="nx">describe</span><span class="p">(</span><span class="dl">"</span><span class="s2">TodoApp Integration</span><span class="dl">"</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">test</span><span class="p">(</span><span class="dl">"</span><span class="s2">complete user workflow</span><span class="dl">"</span><span class="p">,</span> <span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">user</span> <span class="o">=</span> <span class="nx">userEvent</span><span class="p">.</span><span class="nx">setup</span><span class="p">();</span>

    <span class="nx">renderWithProviders</span><span class="p">(&lt;</span><span class="nc">TodoApp</span> <span class="p">/&gt;);</span>

    <span class="c1">// Login</span>
    <span class="k">await</span> <span class="nx">user</span><span class="p">.</span><span class="nx">type</span><span class="p">(</span><span class="nx">screen</span><span class="p">.</span><span class="nx">getByLabelText</span><span class="p">(</span><span class="sr">/email/i</span><span class="p">),</span> <span class="dl">"</span><span class="s2">john@example.com</span><span class="dl">"</span><span class="p">);</span>
    <span class="k">await</span> <span class="nx">user</span><span class="p">.</span><span class="nx">type</span><span class="p">(</span><span class="nx">screen</span><span class="p">.</span><span class="nx">getByLabelText</span><span class="p">(</span><span class="sr">/password/i</span><span class="p">),</span> <span class="dl">"</span><span class="s2">password123</span><span class="dl">"</span><span class="p">);</span>
    <span class="k">await</span> <span class="nx">user</span><span class="p">.</span><span class="nx">click</span><span class="p">(</span><span class="nx">screen</span><span class="p">.</span><span class="nx">getByRole</span><span class="p">(</span><span class="dl">"</span><span class="s2">button</span><span class="dl">"</span><span class="p">,</span> <span class="p">{</span> <span class="na">name</span><span class="p">:</span> <span class="sr">/login/i</span> <span class="p">}));</span>

    <span class="c1">// Add todo</span>
    <span class="k">await</span> <span class="nx">user</span><span class="p">.</span><span class="nx">type</span><span class="p">(</span>
      <span class="nx">screen</span><span class="p">.</span><span class="nx">getByPlaceholderText</span><span class="p">(</span><span class="sr">/add new todo/i</span><span class="p">),</span>
      <span class="dl">"</span><span class="s2">Complete interview prep</span><span class="dl">"</span>
    <span class="p">);</span>
    <span class="k">await</span> <span class="nx">user</span><span class="p">.</span><span class="nx">click</span><span class="p">(</span><span class="nx">screen</span><span class="p">.</span><span class="nx">getByRole</span><span class="p">(</span><span class="dl">"</span><span class="s2">button</span><span class="dl">"</span><span class="p">,</span> <span class="p">{</span> <span class="na">name</span><span class="p">:</span> <span class="sr">/add/i</span> <span class="p">}));</span>

    <span class="c1">// Toggle todo</span>
    <span class="kd">const</span> <span class="nx">checkbox</span> <span class="o">=</span> <span class="nx">screen</span><span class="p">.</span><span class="nx">getByRole</span><span class="p">(</span><span class="dl">"</span><span class="s2">checkbox</span><span class="dl">"</span><span class="p">);</span>
    <span class="k">await</span> <span class="nx">user</span><span class="p">.</span><span class="nx">click</span><span class="p">(</span><span class="nx">checkbox</span><span class="p">);</span>

    <span class="c1">// Verify state</span>
    <span class="nx">expect</span><span class="p">(</span><span class="nx">checkbox</span><span class="p">).</span><span class="nx">toBeChecked</span><span class="p">();</span>
    <span class="nx">expect</span><span class="p">(</span><span class="nx">screen</span><span class="p">.</span><span class="nx">getByText</span><span class="p">(</span><span class="dl">"</span><span class="s2">Complete interview prep</span><span class="dl">"</span><span class="p">)).</span><span class="nx">toBeInTheDocument</span><span class="p">();</span>
  <span class="p">});</span>
<span class="p">});</span>

<span class="c1">// API mocking</span>
<span class="nx">describe</span><span class="p">(</span><span class="dl">"</span><span class="s2">API Integration</span><span class="dl">"</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">beforeEach</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">fetch</span><span class="p">.</span><span class="nx">resetMocks</span><span class="p">();</span>
  <span class="p">});</span>

  <span class="nx">test</span><span class="p">(</span><span class="dl">"</span><span class="s2">loads todos from API</span><span class="dl">"</span><span class="p">,</span> <span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">mockTodos</span> <span class="o">=</span> <span class="p">[</span>
      <span class="p">{</span> <span class="na">id</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="na">text</span><span class="p">:</span> <span class="dl">"</span><span class="s2">API Todo 1</span><span class="dl">"</span><span class="p">,</span> <span class="na">completed</span><span class="p">:</span> <span class="kc">false</span> <span class="p">},</span>
      <span class="p">{</span> <span class="na">id</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="na">text</span><span class="p">:</span> <span class="dl">"</span><span class="s2">API Todo 2</span><span class="dl">"</span><span class="p">,</span> <span class="na">completed</span><span class="p">:</span> <span class="kc">true</span> <span class="p">},</span>
    <span class="p">];</span>

    <span class="nx">fetch</span><span class="p">.</span><span class="nx">mockResponseOnce</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">mockTodos</span><span class="p">));</span>

    <span class="nx">renderWithProviders</span><span class="p">(&lt;</span><span class="nc">TodoApp</span> <span class="p">/&gt;,</span> <span class="p">{</span>
      <span class="na">initialState</span><span class="p">:</span> <span class="p">{</span> <span class="na">user</span><span class="p">:</span> <span class="nx">createMockUser</span><span class="p">()</span> <span class="p">},</span>
    <span class="p">});</span>

    <span class="k">await</span> <span class="nx">waitFor</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="nx">expect</span><span class="p">(</span><span class="nx">screen</span><span class="p">.</span><span class="nx">getByText</span><span class="p">(</span><span class="dl">"</span><span class="s2">API Todo 1</span><span class="dl">"</span><span class="p">)).</span><span class="nx">toBeInTheDocument</span><span class="p">();</span>
      <span class="nx">expect</span><span class="p">(</span><span class="nx">screen</span><span class="p">.</span><span class="nx">getByText</span><span class="p">(</span><span class="dl">"</span><span class="s2">API Todo 2</span><span class="dl">"</span><span class="p">)).</span><span class="nx">toBeInTheDocument</span><span class="p">();</span>
    <span class="p">});</span>
  <span class="p">});</span>

  <span class="nx">test</span><span class="p">(</span><span class="dl">"</span><span class="s2">handles API errors gracefully</span><span class="dl">"</span><span class="p">,</span> <span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">fetch</span><span class="p">.</span><span class="nx">mockRejectOnce</span><span class="p">(</span><span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="dl">"</span><span class="s2">API Error</span><span class="dl">"</span><span class="p">));</span>

    <span class="nx">renderWithProviders</span><span class="p">(&lt;</span><span class="nc">TodoApp</span> <span class="p">/&gt;,</span> <span class="p">{</span>
      <span class="na">initialState</span><span class="p">:</span> <span class="p">{</span> <span class="na">user</span><span class="p">:</span> <span class="nx">createMockUser</span><span class="p">()</span> <span class="p">},</span>
    <span class="p">});</span>

    <span class="k">await</span> <span class="nx">waitFor</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="nx">expect</span><span class="p">(</span><span class="nx">screen</span><span class="p">.</span><span class="nx">getByText</span><span class="p">(</span><span class="sr">/error/i</span><span class="p">)).</span><span class="nx">toBeInTheDocument</span><span class="p">();</span>
    <span class="p">});</span>
  <span class="p">});</span>
<span class="p">});</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h2 id="-duplicate-content-consolidation">üîÑ Duplicate Content Consolidation</h2>

<h3 id="1-performance-optimization-consolidation">1. Performance Optimization Consolidation</h3>

<p><strong>Current Issues:</strong></p>

<ul>
  <li>Performance content scattered across multiple files</li>
  <li>Duplicate concepts in different contexts</li>
  <li>Inconsistent terminology</li>
</ul>

<p><strong>Solution:</strong>
Create a unified performance optimization guide that covers:</p>

<ul>
  <li>Loading performance (bundle optimization, code splitting)</li>
  <li>Runtime performance (memory management, rendering optimization)</li>
  <li>Network performance (caching, compression)</li>
  <li>User experience (Core Web Vitals, accessibility)</li>
</ul>

<h3 id="2-state-management-consolidation">2. State Management Consolidation</h3>

<p><strong>Current Issues:</strong></p>

<ul>
  <li>Multiple state management approaches in different files</li>
  <li>Redundant examples and patterns</li>
  <li>Inconsistent best practices</li>
</ul>

<p><strong>Solution:</strong>
Create a comprehensive state management guide covering:</p>

<ul>
  <li>Local state (useState, useReducer)</li>
  <li>Global state (Context API, Redux, Zustand)</li>
  <li>Server state (React Query, SWR)</li>
  <li>State patterns and best practices</li>
</ul>

<h3 id="3-testing-consolidation">3. Testing Consolidation</h3>

<p><strong>Current Issues:</strong></p>

<ul>
  <li>Testing content spread across multiple files</li>
  <li>Inconsistent testing approaches</li>
  <li>Missing advanced testing patterns</li>
</ul>

<p><strong>Solution:</strong>
Create a unified testing guide covering:</p>

<ul>
  <li>Unit testing (Jest, React Testing Library)</li>
  <li>Integration testing</li>
  <li>E2E testing (Cypress, Playwright)</li>
  <li>Performance testing</li>
  <li>Accessibility testing</li>
</ul>

<h2 id="-visual-enhancements">üìä Visual Enhancements</h2>

<h3 id="1-interactive-diagrams">1. Interactive Diagrams</h3>

<p>Create interactive diagrams using Mermaid.js for:</p>

<ul>
  <li>Component lifecycle</li>
  <li>State management flow</li>
  <li>Performance optimization pipeline</li>
  <li>Security model</li>
  <li>Network protocols</li>
</ul>

<h3 id="2-code-flow-visualizations">2. Code Flow Visualizations</h3>

<p>Add visual representations for:</p>

<ul>
  <li>JavaScript execution flow</li>
  <li>React rendering process</li>
  <li>Memory management</li>
  <li>Network request/response cycle</li>
</ul>

<h3 id="3-architecture-diagrams">3. Architecture Diagrams</h3>

<p>Create comprehensive architecture diagrams for:</p>

<ul>
  <li>Frontend application structure</li>
  <li>Component hierarchy</li>
  <li>Data flow patterns</li>
  <li>Performance optimization strategies</li>
</ul>

<h2 id="-implementation-plan">üéØ Implementation Plan</h2>

<h3 id="phase-1-content-creation-week-1-2">Phase 1: Content Creation (Week 1-2)</h3>

<ol>
  <li>Create missing content files</li>
  <li>Implement advanced patterns and examples</li>
  <li>Add comprehensive testing strategies</li>
</ol>

<h3 id="phase-2-consolidation-week-3">Phase 2: Consolidation (Week 3)</h3>

<ol>
  <li>Merge duplicate content</li>
  <li>Standardize terminology</li>
  <li>Create cross-references</li>
</ol>

<h3 id="phase-3-visual-enhancement-week-4">Phase 3: Visual Enhancement (Week 4)</h3>

<ol>
  <li>Add interactive diagrams</li>
  <li>Create flow visualizations</li>
  <li>Implement architecture diagrams</li>
</ol>

<h3 id="phase-4-integration-week-5">Phase 4: Integration (Week 5)</h3>

<ol>
  <li>Link related concepts</li>
  <li>Create learning paths</li>
  <li>Add assessment tools</li>
</ol>

<h2 id="-success-metrics">üìà Success Metrics</h2>

<h3 id="content-quality">Content Quality</h3>

<ul class="task-list">
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />All missing topics covered</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />No duplicate content</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Consistent terminology</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Comprehensive examples</li>
</ul>

<h3 id="visual-enhancement">Visual Enhancement</h3>

<ul class="task-list">
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Interactive diagrams added</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Flow visualizations created</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Architecture diagrams implemented</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Cross-references established</li>
</ul>

<h3 id="learning-experience">Learning Experience</h3>

<ul class="task-list">
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Clear learning paths</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Progressive difficulty</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Practical examples</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Assessment tools</li>
</ul>

<hr />

<h2 id="-next-steps">üéØ Next Steps</h2>

<ol>
  <li><strong>Review and prioritize</strong> missing content</li>
  <li><strong>Create implementation timeline</strong></li>
  <li><strong>Assign content creation tasks</strong></li>
  <li><strong>Set up review process</strong></li>
  <li><strong>Implement feedback loop</strong></li>
</ol>

<p>This comprehensive analysis and solution plan will transform the repository into a complete, well-organized, and visually enhanced learning resource for frontend interview preparation.</p>

        </div>
    </article>
</div>
    </main>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>Study Resources</h3>
                    <p>Comprehensive collection of frontend interview questions, coding challenges, and system design problems.</p>
                </div>
                <div class="footer-section">
                    <h3>Progress Tracking</h3>
                    <p>Monitor your learning journey with detailed progress indicators and completion status.</p>
                </div>
                <div class="footer-section">
                    <h3>Big Tech Ready</h3>
                    <p>Curated content specifically designed for interviews at Google, Meta, Amazon, Apple, and Netflix.</p>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 Frontend Interview Hub. Built for aspiring frontend engineers.</p>
            </div>
        </div>
    </footer>

    <!-- Scripts -->
    <script src="/assets/js/main.js"></script>
</body>
</html>