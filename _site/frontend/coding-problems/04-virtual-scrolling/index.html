<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Virtual Scrolling Implementation | Frontend Interview Preparation Guide</title>
    <meta name="description" content="Comprehensive frontend interview materials for Big Tech companies">
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
    
    <!-- Styles -->
    <link rel="stylesheet" href="/assets/css/main.css">
</head>
<body>
    <!-- Navigation -->
    <header>
        <nav class="container">
            <div class="logo">Frontend Interview Hub</div>
            <ul class="nav-links">
                <li><a href="/">Home</a></li>
                <li><a href="#progress">Progress</a></li>
                <li><a href="#knowledge">Knowledge</a></li>
                <li><a href="https://github.com/nee/interview">GitHub</a></li>
            </ul>
        </nav>
    </header>

    <!-- Main Content -->
    <main>
        <div class="content-container">
    
        <nav class="breadcrumb">
            <ol>
                <li><a href="/">Home</a></li>
                
                
                
                    
                
                    
                        
                        
                            <li><a href="/frontend/">Frontend</a></li>
                        
                    
                
                    
                        
                        
                            <li><a href="/frontend/coding-problems/">Coding problems</a></li>
                        
                    
                
                    
                        
                        
                            <li class="active">Virtual scrolling implementation</li>
                        
                    
                
            </ol>
        </nav>
    
    
    <article class="content">
        
            <header class="content-header">
                <h1 class="content-title">Virtual Scrolling Implementation</h1>
                
                
                    <div class="content-meta">
                        <span class="difficulty difficulty-hard">Hard</span>
                        
                            <span class="category">Coding Problems</span>
                        
                        
                            <div class="tags">
                                
                                    <span class="tag">javascript</span>
                                
                                    <span class="tag">performance</span>
                                
                                    <span class="tag">virtualization</span>
                                
                                    <span class="tag">large-datasets</span>
                                
                                    <span class="tag">optimization</span>
                                
                                    <span class="tag">memory-management</span>
                                
                            </div>
                        
                    </div>
                
            </header>
        
        
        <div class="content-body">
            <h1 id="problem-4-virtual-scrolling-implementation">Problem 4: Virtual Scrolling Implementation</h1>

<h2 id="problem-description">Problem Description</h2>

<p>Implement virtual scrolling for a large list of items to improve performance when dealing with thousands of records.</p>

<h2 id="requirements">Requirements</h2>

<ul>
  <li>Handle thousands of items efficiently</li>
  <li>Maintain smooth scrolling</li>
  <li>Support dynamic item heights</li>
  <li>Implement proper recycling</li>
  <li>Handle scroll events optimally</li>
</ul>

<h2 id="solution">Solution</h2>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
</pre></td><td class="rouge-code"><pre><span class="kd">class</span> <span class="nx">VirtualScroller</span> <span class="p">{</span>
  <span class="kd">constructor</span><span class="p">(</span><span class="nx">container</span><span class="p">,</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{})</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">container</span> <span class="o">=</span> <span class="nx">container</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">itemHeight</span> <span class="o">=</span> <span class="nx">options</span><span class="p">.</span><span class="nx">itemHeight</span> <span class="o">||</span> <span class="mi">50</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">overscan</span> <span class="o">=</span> <span class="nx">options</span><span class="p">.</span><span class="nx">overscan</span> <span class="o">||</span> <span class="mi">5</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">items</span> <span class="o">=</span> <span class="p">[];</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">visibleItems</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Map</span><span class="p">();</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">scrollTop</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">containerHeight</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">totalHeight</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">init</span><span class="p">();</span>
  <span class="p">}</span>

  <span class="nx">init</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">setupContainer</span><span class="p">();</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">attachEventListeners</span><span class="p">();</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">updateDimensions</span><span class="p">();</span>
  <span class="p">}</span>

  <span class="nx">setupContainer</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">container</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="s2">`
      &lt;div class="virtual-scroller"&gt;
        &lt;div class="virtual-scroller-content"&gt;&lt;/div&gt;
        &lt;div class="virtual-scroller-spacer"&gt;&lt;/div&gt;
      &lt;/div&gt;
    `</span><span class="p">;</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">content</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">container</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="dl">"</span><span class="s2">.virtual-scroller-content</span><span class="dl">"</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">spacer</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">container</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="dl">"</span><span class="s2">.virtual-scroller-spacer</span><span class="dl">"</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="nx">attachEventListeners</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">ticking</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">container</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="dl">"</span><span class="s2">scroll</span><span class="dl">"</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">ticking</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">requestAnimationFrame</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
          <span class="k">this</span><span class="p">.</span><span class="nx">handleScroll</span><span class="p">();</span>
          <span class="nx">ticking</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
        <span class="p">});</span>
        <span class="nx">ticking</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">});</span>

    <span class="nb">window</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="dl">"</span><span class="s2">resize</span><span class="dl">"</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">updateDimensions</span><span class="p">();</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">render</span><span class="p">();</span>
    <span class="p">});</span>
  <span class="p">}</span>

  <span class="nx">handleScroll</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">newScrollTop</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">container</span><span class="p">.</span><span class="nx">scrollTop</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">abs</span><span class="p">(</span><span class="nx">newScrollTop</span> <span class="o">-</span> <span class="k">this</span><span class="p">.</span><span class="nx">scrollTop</span><span class="p">)</span> <span class="o">&gt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">itemHeight</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">scrollTop</span> <span class="o">=</span> <span class="nx">newScrollTop</span><span class="p">;</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">render</span><span class="p">();</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="nx">updateDimensions</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">containerHeight</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">container</span><span class="p">.</span><span class="nx">clientHeight</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">totalHeight</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">items</span><span class="p">.</span><span class="nx">length</span> <span class="o">*</span> <span class="k">this</span><span class="p">.</span><span class="nx">itemHeight</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">spacer</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">height</span> <span class="o">=</span> <span class="s2">`</span><span class="p">${</span><span class="k">this</span><span class="p">.</span><span class="nx">totalHeight</span><span class="p">}</span><span class="s2">px`</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="nx">setItems</span><span class="p">(</span><span class="nx">items</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">items</span> <span class="o">=</span> <span class="nx">items</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">updateDimensions</span><span class="p">();</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">render</span><span class="p">();</span>
  <span class="p">}</span>

  <span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">startIndex</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">scrollTop</span> <span class="o">/</span> <span class="k">this</span><span class="p">.</span><span class="nx">itemHeight</span><span class="p">);</span>
    <span class="kd">const</span> <span class="nx">endIndex</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">min</span><span class="p">(</span>
      <span class="nx">startIndex</span> <span class="o">+</span>
        <span class="nb">Math</span><span class="p">.</span><span class="nx">ceil</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">containerHeight</span> <span class="o">/</span> <span class="k">this</span><span class="p">.</span><span class="nx">itemHeight</span><span class="p">)</span> <span class="o">+</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">overscan</span><span class="p">,</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">items</span><span class="p">.</span><span class="nx">length</span>
    <span class="p">);</span>

    <span class="kd">const</span> <span class="nx">startIndexWithOverscan</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nx">startIndex</span> <span class="o">-</span> <span class="k">this</span><span class="p">.</span><span class="nx">overscan</span><span class="p">);</span>
    <span class="kd">const</span> <span class="nx">endIndexWithOverscan</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">min</span><span class="p">(</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">items</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span>
      <span class="nx">endIndex</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">overscan</span>
    <span class="p">);</span>

    <span class="c1">// Remove items that are no longer visible</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">const</span> <span class="p">[</span><span class="nx">index</span><span class="p">,</span> <span class="nx">element</span><span class="p">]</span> <span class="k">of</span> <span class="k">this</span><span class="p">.</span><span class="nx">visibleItems</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">index</span> <span class="o">&lt;</span> <span class="nx">startIndexWithOverscan</span> <span class="o">||</span> <span class="nx">index</span> <span class="o">&gt;=</span> <span class="nx">endIndexWithOverscan</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">element</span><span class="p">.</span><span class="nx">remove</span><span class="p">();</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">visibleItems</span><span class="p">.</span><span class="k">delete</span><span class="p">(</span><span class="nx">index</span><span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span>

    <span class="c1">// Add new visible items</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="nx">startIndexWithOverscan</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">endIndexWithOverscan</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">visibleItems</span><span class="p">.</span><span class="nx">has</span><span class="p">(</span><span class="nx">i</span><span class="p">))</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="nx">element</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">renderItem</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">items</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="nx">i</span><span class="p">);</span>
        <span class="nx">element</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">position</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">absolute</span><span class="dl">"</span><span class="p">;</span>
        <span class="nx">element</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">top</span> <span class="o">=</span> <span class="s2">`</span><span class="p">${</span><span class="nx">i</span> <span class="o">*</span> <span class="k">this</span><span class="p">.</span><span class="nx">itemHeight</span><span class="p">}</span><span class="s2">px`</span><span class="p">;</span>
        <span class="nx">element</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">width</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">100%</span><span class="dl">"</span><span class="p">;</span>
        <span class="nx">element</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">height</span> <span class="o">=</span> <span class="s2">`</span><span class="p">${</span><span class="k">this</span><span class="p">.</span><span class="nx">itemHeight</span><span class="p">}</span><span class="s2">px`</span><span class="p">;</span>

        <span class="k">this</span><span class="p">.</span><span class="nx">content</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">element</span><span class="p">);</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">visibleItems</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="nx">i</span><span class="p">,</span> <span class="nx">element</span><span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="nx">renderItem</span><span class="p">(</span><span class="nx">item</span><span class="p">,</span> <span class="nx">index</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">element</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="dl">"</span><span class="s2">div</span><span class="dl">"</span><span class="p">);</span>
    <span class="nx">element</span><span class="p">.</span><span class="nx">className</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">virtual-item</span><span class="dl">"</span><span class="p">;</span>
    <span class="nx">element</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="s2">`
      &lt;div class="item-content"&gt;
        &lt;span class="item-index"&gt;</span><span class="p">${</span><span class="nx">index</span> <span class="o">+</span> <span class="mi">1</span><span class="p">}</span><span class="s2">&lt;/span&gt;
        &lt;span class="item-text"&gt;</span><span class="p">${</span><span class="nx">item</span><span class="p">.</span><span class="nx">text</span><span class="p">}</span><span class="s2">&lt;/span&gt;
      &lt;/div&gt;
    `</span><span class="p">;</span>
    <span class="k">return</span> <span class="nx">element</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="nx">scrollToIndex</span><span class="p">(</span><span class="nx">index</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">scrollTop</span> <span class="o">=</span> <span class="nx">index</span> <span class="o">*</span> <span class="k">this</span><span class="p">.</span><span class="nx">itemHeight</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">container</span><span class="p">.</span><span class="nx">scrollTop</span> <span class="o">=</span> <span class="nx">scrollTop</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="nx">getVisibleRange</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">startIndex</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">scrollTop</span> <span class="o">/</span> <span class="k">this</span><span class="p">.</span><span class="nx">itemHeight</span><span class="p">);</span>
    <span class="kd">const</span> <span class="nx">endIndex</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">min</span><span class="p">(</span>
      <span class="nx">startIndex</span> <span class="o">+</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">ceil</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">containerHeight</span> <span class="o">/</span> <span class="k">this</span><span class="p">.</span><span class="nx">itemHeight</span><span class="p">),</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">items</span><span class="p">.</span><span class="nx">length</span>
    <span class="p">);</span>
    <span class="k">return</span> <span class="p">{</span> <span class="nx">startIndex</span><span class="p">,</span> <span class="nx">endIndex</span> <span class="p">};</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// Usage</span>
<span class="kd">const</span> <span class="nx">container</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="dl">"</span><span class="s2">virtual-scroll-container</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">virtualScroller</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">VirtualScroller</span><span class="p">(</span><span class="nx">container</span><span class="p">,</span> <span class="p">{</span>
  <span class="na">itemHeight</span><span class="p">:</span> <span class="mi">60</span><span class="p">,</span>
  <span class="na">overscan</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
<span class="p">});</span>

<span class="c1">// Generate large dataset</span>
<span class="kd">const</span> <span class="nx">items</span> <span class="o">=</span> <span class="nb">Array</span><span class="p">.</span><span class="k">from</span><span class="p">({</span> <span class="na">length</span><span class="p">:</span> <span class="mi">10000</span> <span class="p">},</span> <span class="p">(</span><span class="nx">_</span><span class="p">,</span> <span class="nx">i</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">({</span>
  <span class="na">id</span><span class="p">:</span> <span class="nx">i</span><span class="p">,</span>
  <span class="na">text</span><span class="p">:</span> <span class="s2">`Item </span><span class="p">${</span>
    <span class="nx">i</span> <span class="o">+</span> <span class="mi">1</span>
  <span class="p">}</span><span class="s2"> - Lorem ipsum dolor sit amet, consectetur adipiscing elit.`</span><span class="p">,</span>
<span class="p">}));</span>

<span class="nx">virtualScroller</span><span class="p">.</span><span class="nx">setItems</span><span class="p">(</span><span class="nx">items</span><span class="p">);</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h2 id="css-styling">CSS Styling</h2>

<div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
</pre></td><td class="rouge-code"><pre><span class="nc">.virtual-scroller</span> <span class="p">{</span>
  <span class="nl">position</span><span class="p">:</span> <span class="nb">relative</span><span class="p">;</span>
  <span class="nl">height</span><span class="p">:</span> <span class="m">100%</span><span class="p">;</span>
  <span class="nl">overflow</span><span class="p">:</span> <span class="nb">hidden</span><span class="p">;</span>
<span class="p">}</span>

<span class="nc">.virtual-scroller-content</span> <span class="p">{</span>
  <span class="nl">position</span><span class="p">:</span> <span class="nb">relative</span><span class="p">;</span>
  <span class="nl">width</span><span class="p">:</span> <span class="m">100%</span><span class="p">;</span>
<span class="p">}</span>

<span class="nc">.virtual-scroller-spacer</span> <span class="p">{</span>
  <span class="nl">width</span><span class="p">:</span> <span class="m">100%</span><span class="p">;</span>
<span class="p">}</span>

<span class="nc">.virtual-item</span> <span class="p">{</span>
  <span class="nl">border-bottom</span><span class="p">:</span> <span class="m">1px</span> <span class="nb">solid</span> <span class="m">#eee</span><span class="p">;</span>
  <span class="nl">background</span><span class="p">:</span> <span class="no">white</span><span class="p">;</span>
  <span class="nl">transition</span><span class="p">:</span> <span class="n">background-color</span> <span class="m">0.2s</span><span class="p">;</span>
<span class="p">}</span>

<span class="nc">.virtual-item</span><span class="nd">:hover</span> <span class="p">{</span>
  <span class="nl">background-color</span><span class="p">:</span> <span class="m">#f8f9fa</span><span class="p">;</span>
<span class="p">}</span>

<span class="nc">.item-content</span> <span class="p">{</span>
  <span class="nl">padding</span><span class="p">:</span> <span class="m">16px</span><span class="p">;</span>
  <span class="nl">display</span><span class="p">:</span> <span class="n">flex</span><span class="p">;</span>
  <span class="nl">align-items</span><span class="p">:</span> <span class="nb">center</span><span class="p">;</span>
  <span class="py">gap</span><span class="p">:</span> <span class="m">12px</span><span class="p">;</span>
<span class="p">}</span>

<span class="nc">.item-index</span> <span class="p">{</span>
  <span class="nl">font-weight</span><span class="p">:</span> <span class="m">600</span><span class="p">;</span>
  <span class="nl">color</span><span class="p">:</span> <span class="m">#007bff</span><span class="p">;</span>
  <span class="nl">min-width</span><span class="p">:</span> <span class="m">40px</span><span class="p">;</span>
<span class="p">}</span>

<span class="nc">.item-text</span> <span class="p">{</span>
  <span class="nl">color</span><span class="p">:</span> <span class="m">#333</span><span class="p">;</span>
  <span class="nl">line-height</span><span class="p">:</span> <span class="m">1.4</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h2 id="advanced-features">Advanced Features</h2>

<h3 id="dynamic-height-support">Dynamic Height Support</h3>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
</pre></td><td class="rouge-code"><pre><span class="kd">class</span> <span class="nx">DynamicVirtualScroller</span> <span class="kd">extends</span> <span class="nx">VirtualScroller</span> <span class="p">{</span>
  <span class="kd">constructor</span><span class="p">(</span><span class="nx">container</span><span class="p">,</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{})</span> <span class="p">{</span>
    <span class="k">super</span><span class="p">(</span><span class="nx">container</span><span class="p">,</span> <span class="nx">options</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">itemHeights</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Map</span><span class="p">();</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">estimatedHeight</span> <span class="o">=</span> <span class="nx">options</span><span class="p">.</span><span class="nx">estimatedHeight</span> <span class="o">||</span> <span class="mi">50</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="nx">updateItemHeight</span><span class="p">(</span><span class="nx">index</span><span class="p">,</span> <span class="nx">height</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">itemHeights</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="nx">index</span><span class="p">,</span> <span class="nx">height</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">updateTotalHeight</span><span class="p">();</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">render</span><span class="p">();</span>
  <span class="p">}</span>

  <span class="nx">updateTotalHeight</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">totalHeight</span> <span class="o">=</span> <span class="nb">Array</span><span class="p">.</span><span class="k">from</span><span class="p">(</span>
      <span class="p">{</span> <span class="na">length</span><span class="p">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">items</span><span class="p">.</span><span class="nx">length</span> <span class="p">},</span>
      <span class="p">(</span><span class="nx">_</span><span class="p">,</span> <span class="nx">i</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">itemHeights</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="nx">i</span><span class="p">)</span> <span class="o">||</span> <span class="k">this</span><span class="p">.</span><span class="nx">estimatedHeight</span>
    <span class="p">).</span><span class="nx">reduce</span><span class="p">((</span><span class="nx">sum</span><span class="p">,</span> <span class="nx">height</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">sum</span> <span class="o">+</span> <span class="nx">height</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">spacer</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">height</span> <span class="o">=</span> <span class="s2">`</span><span class="p">${</span><span class="k">this</span><span class="p">.</span><span class="nx">totalHeight</span><span class="p">}</span><span class="s2">px`</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="nx">getItemTop</span><span class="p">(</span><span class="nx">index</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">top</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">index</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">top</span> <span class="o">+=</span> <span class="k">this</span><span class="p">.</span><span class="nx">itemHeights</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="nx">i</span><span class="p">)</span> <span class="o">||</span> <span class="k">this</span><span class="p">.</span><span class="nx">estimatedHeight</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nx">top</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">visibleRange</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">getVisibleRange</span><span class="p">();</span>
    <span class="kd">const</span> <span class="nx">startIndex</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nx">visibleRange</span><span class="p">.</span><span class="nx">startIndex</span> <span class="o">-</span> <span class="k">this</span><span class="p">.</span><span class="nx">overscan</span><span class="p">);</span>
    <span class="kd">const</span> <span class="nx">endIndex</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">min</span><span class="p">(</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">items</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span>
      <span class="nx">visibleRange</span><span class="p">.</span><span class="nx">endIndex</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">overscan</span>
    <span class="p">);</span>

    <span class="c1">// Remove items that are no longer visible</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">const</span> <span class="p">[</span><span class="nx">index</span><span class="p">,</span> <span class="nx">element</span><span class="p">]</span> <span class="k">of</span> <span class="k">this</span><span class="p">.</span><span class="nx">visibleItems</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">index</span> <span class="o">&lt;</span> <span class="nx">startIndex</span> <span class="o">||</span> <span class="nx">index</span> <span class="o">&gt;=</span> <span class="nx">endIndex</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">element</span><span class="p">.</span><span class="nx">remove</span><span class="p">();</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">visibleItems</span><span class="p">.</span><span class="k">delete</span><span class="p">(</span><span class="nx">index</span><span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span>

    <span class="c1">// Add new visible items</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="nx">startIndex</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">endIndex</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">visibleItems</span><span class="p">.</span><span class="nx">has</span><span class="p">(</span><span class="nx">i</span><span class="p">))</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="nx">element</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">renderItem</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">items</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="nx">i</span><span class="p">);</span>
        <span class="nx">element</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">position</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">absolute</span><span class="dl">"</span><span class="p">;</span>
        <span class="nx">element</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">top</span> <span class="o">=</span> <span class="s2">`</span><span class="p">${</span><span class="k">this</span><span class="p">.</span><span class="nx">getItemTop</span><span class="p">(</span><span class="nx">i</span><span class="p">)}</span><span class="s2">px`</span><span class="p">;</span>
        <span class="nx">element</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">width</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">100%</span><span class="dl">"</span><span class="p">;</span>

        <span class="k">this</span><span class="p">.</span><span class="nx">content</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">element</span><span class="p">);</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">visibleItems</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="nx">i</span><span class="p">,</span> <span class="nx">element</span><span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="search-and-filter-support">Search and Filter Support</h3>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
</pre></td><td class="rouge-code"><pre><span class="kd">class</span> <span class="nx">SearchableVirtualScroller</span> <span class="kd">extends</span> <span class="nx">VirtualScroller</span> <span class="p">{</span>
  <span class="kd">constructor</span><span class="p">(</span><span class="nx">container</span><span class="p">,</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{})</span> <span class="p">{</span>
    <span class="k">super</span><span class="p">(</span><span class="nx">container</span><span class="p">,</span> <span class="nx">options</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">filteredItems</span> <span class="o">=</span> <span class="p">[];</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">searchTerm</span> <span class="o">=</span> <span class="dl">""</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="nx">search</span><span class="p">(</span><span class="nx">term</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">searchTerm</span> <span class="o">=</span> <span class="nx">term</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">();</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">filteredItems</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">items</span><span class="p">.</span><span class="nx">filter</span><span class="p">((</span><span class="nx">item</span><span class="p">)</span> <span class="o">=&gt;</span>
      <span class="nx">item</span><span class="p">.</span><span class="nx">text</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">().</span><span class="nx">includes</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">searchTerm</span><span class="p">)</span>
    <span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">updateDimensions</span><span class="p">();</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">render</span><span class="p">();</span>
  <span class="p">}</span>

  <span class="nx">updateDimensions</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">containerHeight</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">container</span><span class="p">.</span><span class="nx">clientHeight</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">totalHeight</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">filteredItems</span><span class="p">.</span><span class="nx">length</span> <span class="o">*</span> <span class="k">this</span><span class="p">.</span><span class="nx">itemHeight</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">spacer</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">height</span> <span class="o">=</span> <span class="s2">`</span><span class="p">${</span><span class="k">this</span><span class="p">.</span><span class="nx">totalHeight</span><span class="p">}</span><span class="s2">px`</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">startIndex</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">scrollTop</span> <span class="o">/</span> <span class="k">this</span><span class="p">.</span><span class="nx">itemHeight</span><span class="p">);</span>
    <span class="kd">const</span> <span class="nx">endIndex</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">min</span><span class="p">(</span>
      <span class="nx">startIndex</span> <span class="o">+</span>
        <span class="nb">Math</span><span class="p">.</span><span class="nx">ceil</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">containerHeight</span> <span class="o">/</span> <span class="k">this</span><span class="p">.</span><span class="nx">itemHeight</span><span class="p">)</span> <span class="o">+</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">overscan</span><span class="p">,</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">filteredItems</span><span class="p">.</span><span class="nx">length</span>
    <span class="p">);</span>

    <span class="kd">const</span> <span class="nx">startIndexWithOverscan</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nx">startIndex</span> <span class="o">-</span> <span class="k">this</span><span class="p">.</span><span class="nx">overscan</span><span class="p">);</span>
    <span class="kd">const</span> <span class="nx">endIndexWithOverscan</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">min</span><span class="p">(</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">filteredItems</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span>
      <span class="nx">endIndex</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">overscan</span>
    <span class="p">);</span>

    <span class="c1">// Remove items that are no longer visible</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">const</span> <span class="p">[</span><span class="nx">index</span><span class="p">,</span> <span class="nx">element</span><span class="p">]</span> <span class="k">of</span> <span class="k">this</span><span class="p">.</span><span class="nx">visibleItems</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">index</span> <span class="o">&lt;</span> <span class="nx">startIndexWithOverscan</span> <span class="o">||</span> <span class="nx">index</span> <span class="o">&gt;=</span> <span class="nx">endIndexWithOverscan</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">element</span><span class="p">.</span><span class="nx">remove</span><span class="p">();</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">visibleItems</span><span class="p">.</span><span class="k">delete</span><span class="p">(</span><span class="nx">index</span><span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span>

    <span class="c1">// Add new visible items</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="nx">startIndexWithOverscan</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">endIndexWithOverscan</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">visibleItems</span><span class="p">.</span><span class="nx">has</span><span class="p">(</span><span class="nx">i</span><span class="p">))</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="nx">element</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">renderItem</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">filteredItems</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="nx">i</span><span class="p">);</span>
        <span class="nx">element</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">position</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">absolute</span><span class="dl">"</span><span class="p">;</span>
        <span class="nx">element</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">top</span> <span class="o">=</span> <span class="s2">`</span><span class="p">${</span><span class="nx">i</span> <span class="o">*</span> <span class="k">this</span><span class="p">.</span><span class="nx">itemHeight</span><span class="p">}</span><span class="s2">px`</span><span class="p">;</span>
        <span class="nx">element</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">width</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">100%</span><span class="dl">"</span><span class="p">;</span>
        <span class="nx">element</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">height</span> <span class="o">=</span> <span class="s2">`</span><span class="p">${</span><span class="k">this</span><span class="p">.</span><span class="nx">itemHeight</span><span class="p">}</span><span class="s2">px`</span><span class="p">;</span>

        <span class="k">this</span><span class="p">.</span><span class="nx">content</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">element</span><span class="p">);</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">visibleItems</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="nx">i</span><span class="p">,</span> <span class="nx">element</span><span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h2 id="performance-optimizations">Performance Optimizations</h2>

<h3 id="memory-management">Memory Management</h3>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
</pre></td><td class="rouge-code"><pre><span class="kd">class</span> <span class="nx">OptimizedVirtualScroller</span> <span class="kd">extends</span> <span class="nx">VirtualScroller</span> <span class="p">{</span>
  <span class="kd">constructor</span><span class="p">(</span><span class="nx">container</span><span class="p">,</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{})</span> <span class="p">{</span>
    <span class="k">super</span><span class="p">(</span><span class="nx">container</span><span class="p">,</span> <span class="nx">options</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">elementPool</span> <span class="o">=</span> <span class="p">[];</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">maxPoolSize</span> <span class="o">=</span> <span class="nx">options</span><span class="p">.</span><span class="nx">maxPoolSize</span> <span class="o">||</span> <span class="mi">100</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="nx">getElementFromPool</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">elementPool</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">elementPool</span><span class="p">.</span><span class="nx">pop</span><span class="p">();</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="dl">"</span><span class="s2">div</span><span class="dl">"</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="nx">returnElementToPool</span><span class="p">(</span><span class="nx">element</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">elementPool</span><span class="p">.</span><span class="nx">length</span> <span class="o">&lt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">maxPoolSize</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">element</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="dl">""</span><span class="p">;</span>
      <span class="nx">element</span><span class="p">.</span><span class="nx">className</span> <span class="o">=</span> <span class="dl">""</span><span class="p">;</span>
      <span class="nx">element</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">cssText</span> <span class="o">=</span> <span class="dl">""</span><span class="p">;</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">elementPool</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">element</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// Implementation with element recycling</span>
    <span class="kd">const</span> <span class="nx">visibleRange</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">getVisibleRange</span><span class="p">();</span>

    <span class="c1">// Remove invisible items and return to pool</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">const</span> <span class="p">[</span><span class="nx">index</span><span class="p">,</span> <span class="nx">element</span><span class="p">]</span> <span class="k">of</span> <span class="k">this</span><span class="p">.</span><span class="nx">visibleItems</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span>
        <span class="nx">index</span> <span class="o">&lt;</span> <span class="nx">visibleRange</span><span class="p">.</span><span class="nx">startIndex</span> <span class="o">-</span> <span class="k">this</span><span class="p">.</span><span class="nx">overscan</span> <span class="o">||</span>
        <span class="nx">index</span> <span class="o">&gt;=</span> <span class="nx">visibleRange</span><span class="p">.</span><span class="nx">endIndex</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">overscan</span>
      <span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">returnElementToPool</span><span class="p">(</span><span class="nx">element</span><span class="p">);</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">visibleItems</span><span class="p">.</span><span class="k">delete</span><span class="p">(</span><span class="nx">index</span><span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span>

    <span class="c1">// Add visible items</span>
    <span class="k">for</span> <span class="p">(</span>
      <span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="nx">visibleRange</span><span class="p">.</span><span class="nx">startIndex</span> <span class="o">-</span> <span class="k">this</span><span class="p">.</span><span class="nx">overscan</span><span class="p">;</span>
      <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">visibleRange</span><span class="p">.</span><span class="nx">endIndex</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">overscan</span><span class="p">;</span>
      <span class="nx">i</span><span class="o">++</span>
    <span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">i</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">items</span><span class="p">.</span><span class="nx">length</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">visibleItems</span><span class="p">.</span><span class="nx">has</span><span class="p">(</span><span class="nx">i</span><span class="p">))</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="nx">element</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">getElementFromPool</span><span class="p">();</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">renderItem</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">items</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">element</span><span class="p">);</span>
        <span class="nx">element</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">position</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">absolute</span><span class="dl">"</span><span class="p">;</span>
        <span class="nx">element</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">top</span> <span class="o">=</span> <span class="s2">`</span><span class="p">${</span><span class="nx">i</span> <span class="o">*</span> <span class="k">this</span><span class="p">.</span><span class="nx">itemHeight</span><span class="p">}</span><span class="s2">px`</span><span class="p">;</span>
        <span class="nx">element</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">width</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">100%</span><span class="dl">"</span><span class="p">;</span>
        <span class="nx">element</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">height</span> <span class="o">=</span> <span class="s2">`</span><span class="p">${</span><span class="k">this</span><span class="p">.</span><span class="nx">itemHeight</span><span class="p">}</span><span class="s2">px`</span><span class="p">;</span>

        <span class="k">this</span><span class="p">.</span><span class="nx">content</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">element</span><span class="p">);</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">visibleItems</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="nx">i</span><span class="p">,</span> <span class="nx">element</span><span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h2 id="key-features">Key Features</h2>

<ol>
  <li><strong>Efficient Rendering</strong>: Only renders visible items plus overscan</li>
  <li><strong>Smooth Scrolling</strong>: Uses requestAnimationFrame for optimal performance</li>
  <li><strong>Memory Management</strong>: Recycles DOM elements to reduce memory usage</li>
  <li><strong>Dynamic Heights</strong>: Support for variable item heights</li>
  <li><strong>Search Integration</strong>: Filter items while maintaining performance</li>
  <li><strong>Responsive Design</strong>: Adapts to container size changes</li>
  <li><strong>Accessibility</strong>: Maintains proper focus management</li>
  <li><strong>Error Handling</strong>: Graceful handling of edge cases</li>
</ol>

<h2 id="usage-examples">Usage Examples</h2>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
</pre></td><td class="rouge-code"><pre><span class="c1">// Basic usage</span>
<span class="kd">const</span> <span class="nx">basicScroller</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">VirtualScroller</span><span class="p">(</span><span class="nx">container</span><span class="p">,</span> <span class="p">{</span>
  <span class="na">itemHeight</span><span class="p">:</span> <span class="mi">60</span><span class="p">,</span>
  <span class="na">overscan</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
<span class="p">});</span>

<span class="c1">// With search</span>
<span class="kd">const</span> <span class="nx">searchableScroller</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">SearchableVirtualScroller</span><span class="p">(</span><span class="nx">container</span><span class="p">,</span> <span class="p">{</span>
  <span class="na">itemHeight</span><span class="p">:</span> <span class="mi">60</span><span class="p">,</span>
  <span class="na">overscan</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
<span class="p">});</span>

<span class="nx">searchableScroller</span><span class="p">.</span><span class="nx">search</span><span class="p">(</span><span class="dl">"</span><span class="s2">lorem</span><span class="dl">"</span><span class="p">);</span>

<span class="c1">// With dynamic heights</span>
<span class="kd">const</span> <span class="nx">dynamicScroller</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">DynamicVirtualScroller</span><span class="p">(</span><span class="nx">container</span><span class="p">,</span> <span class="p">{</span>
  <span class="na">estimatedHeight</span><span class="p">:</span> <span class="mi">50</span><span class="p">,</span>
  <span class="na">overscan</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
<span class="p">});</span>

<span class="c1">// With optimization</span>
<span class="kd">const</span> <span class="nx">optimizedScroller</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">OptimizedVirtualScroller</span><span class="p">(</span><span class="nx">container</span><span class="p">,</span> <span class="p">{</span>
  <span class="na">itemHeight</span><span class="p">:</span> <span class="mi">60</span><span class="p">,</span>
  <span class="na">overscan</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
  <span class="na">maxPoolSize</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span>
<span class="p">});</span>
</pre></td></tr></tbody></table></code></pre></div></div>

        </div>
    </article>
</div>
    </main>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>Study Resources</h3>
                    <p>Comprehensive collection of frontend interview questions, coding challenges, and system design problems.</p>
                </div>
                <div class="footer-section">
                    <h3>Progress Tracking</h3>
                    <p>Monitor your learning journey with detailed progress indicators and completion status.</p>
                </div>
                <div class="footer-section">
                    <h3>Big Tech Ready</h3>
                    <p>Curated content specifically designed for interviews at Google, Meta, Amazon, Apple, and Netflix.</p>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 Frontend Interview Hub. Built for aspiring frontend engineers.</p>
            </div>
        </div>
    </footer>

    <!-- Scripts -->
    <script src="/assets/js/main.js"></script>
</body>
</html>