<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üåê Browser Architecture Deep Dive | Frontend Interview Preparation Guide</title>
    <meta name="description" content="Comprehensive frontend interview materials for Big Tech companies">
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
    
    <!-- Styles -->
    <link rel="stylesheet" href="/assets/css/main.css">
</head>
<body>
    <!-- Navigation -->
    <header>
        <nav class="container">
            <div class="logo">Frontend Interview Hub</div>
            <button class="mobile-menu-toggle" aria-label="Toggle navigation menu" aria-expanded="false">
                <span aria-hidden="true">‚ò∞</span>
            </button>
            <ul class="nav-links" role="navigation" aria-label="Main navigation">
                <li><a href="/">Home</a></li>
                <li><a href="#progress">Progress</a></li>
                <li><a href="#knowledge">Knowledge</a></li>
                <li><a href="https://github.com/nee/interview" target="_blank" rel="noopener">GitHub</a></li>
            </ul>
        </nav>
    </header>

    <!-- Main Content -->
    <main>
        <div class="content-container">
    
        <nav class="breadcrumb">
            <ol>
                <li><a href="/">Home</a></li>
                
                
                
                    
                
                    
                        
                        
                            <li><a href="/theory-and-visuals/">Theory and visuals</a></li>
                        
                    
                
                    
                        
                        
                            <li class="active">üåê browser architecture deep dive</li>
                        
                    
                
            </ol>
        </nav>
    
    
    <article class="content">
        
            <header class="content-header">
                <h1 class="content-title">üåê Browser Architecture Deep Dive</h1>
                
                
            </header>
        
        
        <div class="content-body">
            <h1 id="-browser-architecture-deep-dive">üåê Browser Architecture Deep Dive</h1>

<h2 id="-table-of-contents">üìã Table of Contents</h2>

<ul>
  <li><a href="#browser-process-model">Browser Process Model</a></li>
  <li><a href="#rendering-pipeline">Rendering Pipeline</a></li>
  <li><a href="#network-stack">Network Stack</a></li>
  <li><a href="#security-model">Security Model</a></li>
  <li><a href="#performance-optimization">Performance Optimization</a></li>
  <li><a href="#visual-diagrams">Visual Diagrams</a></li>
</ul>

<h2 id="Ô∏è-browser-process-model">üèóÔ∏è Browser Process Model</h2>

<h3 id="multi-process-architecture">Multi-Process Architecture</h3>

<pre><code class="language-mermaid">graph TB
    subgraph "Browser Process"
        A[Browser Process] --&gt; B[UI Thread]
        A --&gt; C[Network Thread]
        A --&gt; D[Storage Thread]
    end

    subgraph "Renderer Processes"
        E[Renderer Process 1] --&gt; F[Main Thread]
        E --&gt; G[Compositor Thread]
        E --&gt; H[Raster Thread]

        I[Renderer Process 2] --&gt; J[Main Thread]
        I --&gt; K[Compositor Thread]
        I --&gt; L[Raster Thread]
    end

    subgraph "Utility Processes"
        M[GPU Process] --&gt; N[Hardware Acceleration]
        O[Plugin Process] --&gt; P[Flash, PDF]
        Q[Extension Process] --&gt; R[Browser Extensions]
    end
</code></pre>

<h3 id="process-communication">Process Communication</h3>

<pre><code class="language-mermaid">sequenceDiagram
    participant User
    participant Browser
    participant Renderer
    participant Network
    participant GPU

    User-&gt;&gt;Browser: Navigate to URL
    Browser-&gt;&gt;Network: Fetch page
    Network--&gt;&gt;Browser: HTML/CSS/JS
    Browser-&gt;&gt;Renderer: Create renderer process
    Renderer-&gt;&gt;Renderer: Parse &amp; render
    Renderer-&gt;&gt;GPU: Composite layers
    GPU--&gt;&gt;Renderer: Display frame
    Renderer--&gt;&gt;Browser: Page ready
    Browser--&gt;&gt;User: Show page
</code></pre>

<h2 id="-rendering-pipeline">üé® Rendering Pipeline</h2>

<h3 id="critical-rendering-path">Critical Rendering Path</h3>

<pre><code class="language-mermaid">graph LR
    A[HTML] --&gt; B[DOM Tree]
    C[CSS] --&gt; D[CSSOM Tree]
    B --&gt; E[Render Tree]
    D --&gt; E
    E --&gt; F[Layout]
    F --&gt; G[Paint]
    G --&gt; H[Composite]
</code></pre>

<h3 id="detailed-rendering-steps">Detailed Rendering Steps</h3>

<pre><code class="language-mermaid">graph TB
    subgraph "Parsing"
        A[HTML Bytes] --&gt; B[HTML Parser]
        B --&gt; C[DOM Tree]
        D[CSS Bytes] --&gt; E[CSS Parser]
        E --&gt; F[CSSOM Tree]
    end

    subgraph "Rendering"
        C --&gt; G[Render Tree]
        F --&gt; G
        G --&gt; H[Layout]
        H --&gt; I[Paint]
        I --&gt; J[Composite]
    end

    subgraph "JavaScript"
        K[JavaScript] --&gt; L[DOM Manipulation]
        L --&gt; M[Style Recalculation]
        M --&gt; N[Layout Reflow]
        N --&gt; O[Repaint]
        O --&gt; P[Recomposite]
    end
</code></pre>

<h3 id="dom-tree-construction">DOM Tree Construction</h3>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre></td><td class="rouge-code"><pre><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html&gt;</span>
  <span class="nt">&lt;head&gt;</span>
    <span class="nt">&lt;title&gt;</span>Example<span class="nt">&lt;/title&gt;</span>
  <span class="nt">&lt;/head&gt;</span>
  <span class="nt">&lt;body&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"container"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;h1&gt;</span>Hello World<span class="nt">&lt;/h1&gt;</span>
      <span class="nt">&lt;p&gt;</span>This is a paragraph.<span class="nt">&lt;/p&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<pre><code class="language-mermaid">graph TD
    A[Document] --&gt; B[html]
    B --&gt; C[head]
    B --&gt; D[body]
    C --&gt; E[title]
    D --&gt; F[div#container]
    F --&gt; G[h1]
    F --&gt; H[p]
    G --&gt; I[Text: Hello World]
    H --&gt; J[Text: This is a paragraph]
</code></pre>

<h3 id="cssom-tree-construction">CSSOM Tree Construction</h3>

<div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
</pre></td><td class="rouge-code"><pre><span class="nt">body</span> <span class="p">{</span>
  <span class="nl">font-size</span><span class="p">:</span> <span class="m">16px</span><span class="p">;</span>
  <span class="nl">margin</span><span class="p">:</span> <span class="m">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="nf">#container</span> <span class="p">{</span>
  <span class="nl">width</span><span class="p">:</span> <span class="m">100%</span><span class="p">;</span>
  <span class="nl">max-width</span><span class="p">:</span> <span class="m">1200px</span><span class="p">;</span>
  <span class="nl">margin</span><span class="p">:</span> <span class="m">0</span> <span class="nb">auto</span><span class="p">;</span>
<span class="p">}</span>

<span class="nt">h1</span> <span class="p">{</span>
  <span class="nl">color</span><span class="p">:</span> <span class="m">#333</span><span class="p">;</span>
  <span class="nl">font-size</span><span class="p">:</span> <span class="m">2em</span><span class="p">;</span>
<span class="p">}</span>

<span class="nt">p</span> <span class="p">{</span>
  <span class="nl">color</span><span class="p">:</span> <span class="m">#666</span><span class="p">;</span>
  <span class="nl">line-height</span><span class="p">:</span> <span class="m">1.6</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<pre><code class="language-mermaid">graph TD
    A[CSSOM] --&gt; B[body]
    A --&gt; C[#container]
    A --&gt; D[h1]
    A --&gt; E[p]

    B --&gt; F[font-size: 16px]
    B --&gt; G[margin: 0]

    C --&gt; H[width: 100%]
    C --&gt; I[max-width: 1200px]
    C --&gt; J[margin: 0 auto]

    D --&gt; K[color: #333]
    D --&gt; L[font-size: 2em]

    E --&gt; M[color: #666]
    E --&gt; N[line-height: 1.6]
</code></pre>

<h2 id="-network-stack">üåê Network Stack</h2>

<h3 id="http-requestresponse-flow">HTTP Request/Response Flow</h3>

<pre><code class="language-mermaid">sequenceDiagram
    participant Browser
    participant DNS
    participant TCP
    participant TLS
    participant Server

    Browser-&gt;&gt;DNS: DNS Lookup
    DNS--&gt;&gt;Browser: IP Address
    Browser-&gt;&gt;TCP: TCP Handshake
    TCP--&gt;&gt;Browser: Connection Established
    Browser-&gt;&gt;TLS: TLS Handshake
    TLS--&gt;&gt;Browser: Encrypted Connection
    Browser-&gt;&gt;Server: HTTP Request
    Server--&gt;&gt;Browser: HTTP Response
    Browser-&gt;&gt;Browser: Parse Response
</code></pre>

<h3 id="resource-loading-pipeline">Resource Loading Pipeline</h3>

<pre><code class="language-mermaid">graph TB
    subgraph "Resource Discovery"
        A[HTML Parsing] --&gt; B[Resource Discovery]
        B --&gt; C[CSS Files]
        B --&gt; D[JavaScript Files]
        B --&gt; E[Images]
        B --&gt; F[Fonts]
    end

    subgraph "Loading Priority"
        G[Critical Resources] --&gt; H[High Priority]
        I[Non-Critical] --&gt; J[Low Priority]
        K[Lazy Load] --&gt; L[On Demand]
    end

    subgraph "Caching"
        M[Memory Cache] --&gt; N[Disk Cache]
        N --&gt; O[Network Request]
    end
</code></pre>

<h3 id="network-optimization-strategies">Network Optimization Strategies</h3>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
</pre></td><td class="rouge-code"><pre><span class="c1">// 1. Resource Hints</span>
<span class="kd">const</span> <span class="nx">resourceHints</span> <span class="o">=</span> <span class="s2">`
    &lt;!-- DNS Prefetch --&gt;
    &lt;link rel="dns-prefetch" href="//cdn.example.com"&gt;
    
    &lt;!-- Preconnect --&gt;
    &lt;link rel="preconnect" href="https://api.example.com"&gt;
    
    &lt;!-- Preload Critical Resources --&gt;
    &lt;link rel="preload" href="/critical.css" as="style"&gt;
    &lt;link rel="preload" href="/critical.js" as="script"&gt;
    
    &lt;!-- Prefetch Non-Critical Resources --&gt;
    &lt;link rel="prefetch" href="/next-page.js"&gt;
    
    &lt;!-- Preload Images --&gt;
    &lt;link rel="preload" href="/hero-image.jpg" as="image"&gt;
`</span><span class="p">;</span>

<span class="c1">// 2. Service Worker Caching</span>
<span class="kd">class</span> <span class="nx">CacheManager</span> <span class="p">{</span>
  <span class="kd">constructor</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">cacheName</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">app-cache-v1</span><span class="dl">"</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">criticalResources</span> <span class="o">=</span> <span class="p">[</span><span class="dl">"</span><span class="s2">/</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">/styles/main.css</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">/scripts/app.js</span><span class="dl">"</span><span class="p">];</span>
  <span class="p">}</span>

  <span class="k">async</span> <span class="nx">install</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">cache</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">caches</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">cacheName</span><span class="p">);</span>
    <span class="k">await</span> <span class="nx">cache</span><span class="p">.</span><span class="nx">addAll</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">criticalResources</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="k">async</span> <span class="nx">fetch</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">cachedResponse</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">caches</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">request</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">cachedResponse</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">cachedResponse</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kd">const</span> <span class="nx">networkResponse</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">fetch</span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">request</span><span class="p">);</span>
    <span class="kd">const</span> <span class="nx">cache</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">caches</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">cacheName</span><span class="p">);</span>
    <span class="nx">cache</span><span class="p">.</span><span class="nx">put</span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">request</span><span class="p">,</span> <span class="nx">networkResponse</span><span class="p">.</span><span class="nx">clone</span><span class="p">());</span>

    <span class="k">return</span> <span class="nx">networkResponse</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// 3. HTTP/2 Server Push</span>
<span class="kd">const</span> <span class="nx">http2Push</span> <span class="o">=</span> <span class="s2">`
    // Server-side (Node.js with HTTP/2)
    const http2 = require('http2');
    const fs = require('fs');
    
    const server = http2.createSecureServer({
        key: fs.readFileSync('key.pem'),
        cert: fs.readFileSync('cert.pem')
    });
    
    server.on('stream', (stream, headers) =&gt; {
        if (headers[':path'] === '/') {
            // Push critical CSS
            stream.pushStream({ ':path': '/styles/critical.css' }, (pushStream) =&gt; {
                pushStream.respondWithFile('./styles/critical.css');
            });
            
            // Push critical JS
            stream.pushStream({ ':path': '/scripts/critical.js' }, (pushStream) =&gt; {
                pushStream.respondWithFile('./scripts/critical.js');
            });
            
            stream.respondWithFile('./index.html');
        }
    });
`</span><span class="p">;</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h2 id="-security-model">üîí Security Model</h2>

<h3 id="same-origin-policy">Same-Origin Policy</h3>

<pre><code class="language-mermaid">graph TB
    subgraph "Same-Origin Policy"
        A[Origin] --&gt; B[Protocol]
        A --&gt; C[Host]
        A --&gt; D[Port]
    end

    subgraph "Cross-Origin Restrictions"
        E[DOM Access] --&gt; F[Blocked]
        G[Cookie Access] --&gt; H[Blocked]
        I[Network Requests] --&gt; J[CORS Required]
    end
</code></pre>

<h3 id="content-security-policy-csp">Content Security Policy (CSP)</h3>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
</pre></td><td class="rouge-code"><pre><span class="c1">// CSP Implementation</span>
<span class="kd">const</span> <span class="nx">cspHeaders</span> <span class="o">=</span> <span class="p">{</span>
  <span class="dl">"</span><span class="s2">Content-Security-Policy</span><span class="dl">"</span><span class="p">:</span> <span class="s2">`
        default-src 'self';
        script-src 'self' 'unsafe-inline' https://cdn.example.com;
        style-src 'self' 'unsafe-inline' https://fonts.googleapis.com;
        img-src 'self' data: https:;
        font-src 'self' https://fonts.gstatic.com;
        connect-src 'self' https://api.example.com;
        frame-src 'none';
        object-src 'none';
        base-uri 'self';
        form-action 'self';
    `</span>
    <span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/</span><span class="se">\s</span><span class="sr">+/g</span><span class="p">,</span> <span class="dl">"</span><span class="s2"> </span><span class="dl">"</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">trim</span><span class="p">(),</span>
<span class="p">};</span>

<span class="c1">// CSP Violation Reporting</span>
<span class="kd">const</span> <span class="nx">cspReporting</span> <span class="o">=</span> <span class="s2">`
    &lt;meta http-equiv="Content-Security-Policy" 
          content="default-src 'self'; report-uri /csp-report"&gt;
`</span><span class="p">;</span>

<span class="c1">// CSP Nonce for Inline Scripts</span>
<span class="kd">const</span> <span class="nx">cspNonce</span> <span class="o">=</span> <span class="s2">`
    &lt;script nonce="random-nonce-here"&gt;
        // This script is allowed because of the nonce
        console.log('CSP compliant inline script');
    &lt;/script&gt;
`</span><span class="p">;</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="cross-origin-resource-sharing-cors">Cross-Origin Resource Sharing (CORS)</h3>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
</pre></td><td class="rouge-code"><pre><span class="c1">// CORS Implementation</span>
<span class="kd">class</span> <span class="nx">CORSHandler</span> <span class="p">{</span>
  <span class="kd">constructor</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">allowedOrigins</span> <span class="o">=</span> <span class="p">[</span>
      <span class="dl">"</span><span class="s2">https://app.example.com</span><span class="dl">"</span><span class="p">,</span>
      <span class="dl">"</span><span class="s2">https://admin.example.com</span><span class="dl">"</span><span class="p">,</span>
    <span class="p">];</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">allowedMethods</span> <span class="o">=</span> <span class="p">[</span><span class="dl">"</span><span class="s2">GET</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">PUT</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">DELETE</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">OPTIONS</span><span class="dl">"</span><span class="p">];</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">allowedHeaders</span> <span class="o">=</span> <span class="p">[</span><span class="dl">"</span><span class="s2">Content-Type</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">Authorization</span><span class="dl">"</span><span class="p">];</span>
  <span class="p">}</span>

  <span class="nx">handleRequest</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">origin</span> <span class="o">=</span> <span class="nx">req</span><span class="p">.</span><span class="nx">headers</span><span class="p">.</span><span class="nx">origin</span><span class="p">;</span>

    <span class="c1">// Check if origin is allowed</span>
    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">allowedOrigins</span><span class="p">.</span><span class="nx">includes</span><span class="p">(</span><span class="nx">origin</span><span class="p">))</span> <span class="p">{</span>
      <span class="nx">res</span><span class="p">.</span><span class="nx">setHeader</span><span class="p">(</span><span class="dl">"</span><span class="s2">Access-Control-Allow-Origin</span><span class="dl">"</span><span class="p">,</span> <span class="nx">origin</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="c1">// Handle preflight requests</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">method</span> <span class="o">===</span> <span class="dl">"</span><span class="s2">OPTIONS</span><span class="dl">"</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">res</span><span class="p">.</span><span class="nx">setHeader</span><span class="p">(</span>
        <span class="dl">"</span><span class="s2">Access-Control-Allow-Methods</span><span class="dl">"</span><span class="p">,</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">allowedMethods</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="dl">"</span><span class="s2">, </span><span class="dl">"</span><span class="p">)</span>
      <span class="p">);</span>
      <span class="nx">res</span><span class="p">.</span><span class="nx">setHeader</span><span class="p">(</span>
        <span class="dl">"</span><span class="s2">Access-Control-Allow-Headers</span><span class="dl">"</span><span class="p">,</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">allowedHeaders</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="dl">"</span><span class="s2">, </span><span class="dl">"</span><span class="p">)</span>
      <span class="p">);</span>
      <span class="nx">res</span><span class="p">.</span><span class="nx">setHeader</span><span class="p">(</span><span class="dl">"</span><span class="s2">Access-Control-Max-Age</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">86400</span><span class="dl">"</span><span class="p">);</span> <span class="c1">// 24 hours</span>
      <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">200</span><span class="p">).</span><span class="nx">end</span><span class="p">();</span>
      <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="c1">// Handle actual request</span>
    <span class="nx">res</span><span class="p">.</span><span class="nx">setHeader</span><span class="p">(</span><span class="dl">"</span><span class="s2">Access-Control-Allow-Credentials</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">true</span><span class="dl">"</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">processRequest</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="nx">processRequest</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Handle the actual request logic</span>
    <span class="nx">res</span><span class="p">.</span><span class="nx">json</span><span class="p">({</span> <span class="na">message</span><span class="p">:</span> <span class="dl">"</span><span class="s2">CORS enabled response</span><span class="dl">"</span> <span class="p">});</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// Client-side CORS handling</span>
<span class="kd">class</span> <span class="nx">CORSClient</span> <span class="p">{</span>
  <span class="kd">constructor</span><span class="p">(</span><span class="nx">baseURL</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">baseURL</span> <span class="o">=</span> <span class="nx">baseURL</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="k">async</span> <span class="nx">request</span><span class="p">(</span><span class="nx">endpoint</span><span class="p">,</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{})</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">url</span> <span class="o">=</span> <span class="s2">`</span><span class="p">${</span><span class="k">this</span><span class="p">.</span><span class="nx">baseURL</span><span class="p">}${</span><span class="nx">endpoint</span><span class="p">}</span><span class="s2">`</span><span class="p">;</span>

    <span class="kd">const</span> <span class="nx">config</span> <span class="o">=</span> <span class="p">{</span>
      <span class="na">method</span><span class="p">:</span> <span class="dl">"</span><span class="s2">GET</span><span class="dl">"</span><span class="p">,</span>
      <span class="na">credentials</span><span class="p">:</span> <span class="dl">"</span><span class="s2">include</span><span class="dl">"</span><span class="p">,</span> <span class="c1">// Include cookies</span>
      <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
        <span class="dl">"</span><span class="s2">Content-Type</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">application/json</span><span class="dl">"</span><span class="p">,</span>
        <span class="p">...</span><span class="nx">options</span><span class="p">.</span><span class="nx">headers</span><span class="p">,</span>
      <span class="p">},</span>
      <span class="p">...</span><span class="nx">options</span><span class="p">,</span>
    <span class="p">};</span>

    <span class="k">try</span> <span class="p">{</span>
      <span class="kd">const</span> <span class="nx">response</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">fetch</span><span class="p">(</span><span class="nx">url</span><span class="p">,</span> <span class="nx">config</span><span class="p">);</span>

      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">response</span><span class="p">.</span><span class="nx">ok</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="s2">`HTTP error! status: </span><span class="p">${</span><span class="nx">response</span><span class="p">.</span><span class="nx">status</span><span class="p">}</span><span class="s2">`</span><span class="p">);</span>
      <span class="p">}</span>

      <span class="k">return</span> <span class="k">await</span> <span class="nx">response</span><span class="p">.</span><span class="nx">json</span><span class="p">();</span>
    <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">"</span><span class="s2">CORS request failed:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">error</span><span class="p">);</span>
      <span class="k">throw</span> <span class="nx">error</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h2 id="-performance-optimization">‚ö° Performance Optimization</h2>

<h3 id="rendering-performance">Rendering Performance</h3>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
</pre></td><td class="rouge-code"><pre><span class="c1">// 1. Optimize Layout Thrashing</span>
<span class="kd">class</span> <span class="nx">LayoutOptimizer</span> <span class="p">{</span>
  <span class="kd">constructor</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">pendingReads</span> <span class="o">=</span> <span class="p">[];</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">pendingWrites</span> <span class="o">=</span> <span class="p">[];</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">scheduled</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="c1">// Batch read operations</span>
  <span class="nx">read</span><span class="p">(</span><span class="nx">callback</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">pendingReads</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">callback</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">schedule</span><span class="p">();</span>
  <span class="p">}</span>

  <span class="c1">// Batch write operations</span>
  <span class="nx">write</span><span class="p">(</span><span class="nx">callback</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">pendingWrites</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">callback</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">schedule</span><span class="p">();</span>
  <span class="p">}</span>

  <span class="nx">schedule</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">scheduled</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">scheduled</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
      <span class="nx">requestAnimationFrame</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">flush</span><span class="p">());</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="nx">flush</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// Execute all reads first</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">pendingReads</span><span class="p">.</span><span class="nx">forEach</span><span class="p">((</span><span class="nx">callback</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">callback</span><span class="p">());</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">pendingReads</span><span class="p">.</span><span class="nx">length</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

    <span class="c1">// Then execute all writes</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">pendingWrites</span><span class="p">.</span><span class="nx">forEach</span><span class="p">((</span><span class="nx">callback</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">callback</span><span class="p">());</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">pendingWrites</span><span class="p">.</span><span class="nx">length</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">scheduled</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// Usage</span>
<span class="kd">const</span> <span class="nx">optimizer</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">LayoutOptimizer</span><span class="p">();</span>

<span class="c1">// ‚ùå Bad: Layout thrashing</span>
<span class="kd">function</span> <span class="nx">badExample</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">elements</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelectorAll</span><span class="p">(</span><span class="dl">"</span><span class="s2">.item</span><span class="dl">"</span><span class="p">);</span>
  <span class="nx">elements</span><span class="p">.</span><span class="nx">forEach</span><span class="p">((</span><span class="nx">element</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">height</span> <span class="o">=</span> <span class="nx">element</span><span class="p">.</span><span class="nx">offsetHeight</span><span class="p">;</span> <span class="c1">// Read</span>
    <span class="nx">element</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">height</span> <span class="o">=</span> <span class="nx">height</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">+</span> <span class="dl">"</span><span class="s2">px</span><span class="dl">"</span><span class="p">;</span> <span class="c1">// Write</span>
  <span class="p">});</span>
<span class="p">}</span>

<span class="c1">// ‚úÖ Good: Batched operations</span>
<span class="kd">function</span> <span class="nx">goodExample</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">elements</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelectorAll</span><span class="p">(</span><span class="dl">"</span><span class="s2">.item</span><span class="dl">"</span><span class="p">);</span>

  <span class="c1">// Batch reads</span>
  <span class="nx">optimizer</span><span class="p">.</span><span class="nx">read</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">elements</span><span class="p">.</span><span class="nx">forEach</span><span class="p">((</span><span class="nx">element</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="nx">element</span><span class="p">.</span><span class="nx">dataset</span><span class="p">.</span><span class="nx">height</span> <span class="o">=</span> <span class="nx">element</span><span class="p">.</span><span class="nx">offsetHeight</span><span class="p">;</span>
    <span class="p">});</span>
  <span class="p">});</span>

  <span class="c1">// Batch writes</span>
  <span class="nx">optimizer</span><span class="p">.</span><span class="nx">write</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">elements</span><span class="p">.</span><span class="nx">forEach</span><span class="p">((</span><span class="nx">element</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="kd">const</span> <span class="nx">height</span> <span class="o">=</span> <span class="nx">element</span><span class="p">.</span><span class="nx">dataset</span><span class="p">.</span><span class="nx">height</span><span class="p">;</span>
      <span class="nx">element</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">height</span> <span class="o">=</span> <span class="nx">height</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">+</span> <span class="dl">"</span><span class="s2">px</span><span class="dl">"</span><span class="p">;</span>
    <span class="p">});</span>
  <span class="p">});</span>
<span class="p">}</span>

<span class="c1">// 2. Virtual Scrolling</span>
<span class="kd">class</span> <span class="nx">VirtualScroller</span> <span class="p">{</span>
  <span class="kd">constructor</span><span class="p">(</span><span class="nx">container</span><span class="p">,</span> <span class="nx">itemHeight</span><span class="p">,</span> <span class="nx">totalItems</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">container</span> <span class="o">=</span> <span class="nx">container</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">itemHeight</span> <span class="o">=</span> <span class="nx">itemHeight</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">totalItems</span> <span class="o">=</span> <span class="nx">totalItems</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">visibleItems</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">ceil</span><span class="p">(</span><span class="nx">container</span><span class="p">.</span><span class="nx">clientHeight</span> <span class="o">/</span> <span class="nx">itemHeight</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">scrollTop</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">startIndex</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">endIndex</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">visibleItems</span><span class="p">;</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">setup</span><span class="p">();</span>
  <span class="p">}</span>

  <span class="nx">setup</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// Create viewport</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">viewport</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="dl">"</span><span class="s2">div</span><span class="dl">"</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">viewport</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">height</span> <span class="o">=</span> <span class="s2">`</span><span class="p">${</span><span class="k">this</span><span class="p">.</span><span class="nx">totalItems</span> <span class="o">*</span> <span class="k">this</span><span class="p">.</span><span class="nx">itemHeight</span><span class="p">}</span><span class="s2">px`</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">viewport</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">position</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">relative</span><span class="dl">"</span><span class="p">;</span>

    <span class="c1">// Create visible items container</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">visibleContainer</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="dl">"</span><span class="s2">div</span><span class="dl">"</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">visibleContainer</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">position</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">absolute</span><span class="dl">"</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">visibleContainer</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">top</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">0</span><span class="dl">"</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">visibleContainer</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">left</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">0</span><span class="dl">"</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">visibleContainer</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">right</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">0</span><span class="dl">"</span><span class="p">;</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">viewport</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">visibleContainer</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">container</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">viewport</span><span class="p">);</span>

    <span class="c1">// Add scroll listener</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">container</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="dl">"</span><span class="s2">scroll</span><span class="dl">"</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">handleScroll</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">));</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">render</span><span class="p">();</span>
  <span class="p">}</span>

  <span class="nx">handleScroll</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">scrollTop</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">container</span><span class="p">.</span><span class="nx">scrollTop</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">updateVisibleRange</span><span class="p">();</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">render</span><span class="p">();</span>
  <span class="p">}</span>

  <span class="nx">updateVisibleRange</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">startIndex</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">scrollTop</span> <span class="o">/</span> <span class="k">this</span><span class="p">.</span><span class="nx">itemHeight</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">endIndex</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">min</span><span class="p">(</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">startIndex</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">visibleItems</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">totalItems</span>
    <span class="p">);</span>
  <span class="p">}</span>

  <span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">visibleContainer</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="dl">""</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">visibleContainer</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">transform</span> <span class="o">=</span> <span class="s2">`translateY(</span><span class="p">${</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">startIndex</span> <span class="o">*</span> <span class="k">this</span><span class="p">.</span><span class="nx">itemHeight</span>
    <span class="p">}</span><span class="s2">px)`</span><span class="p">;</span>

    <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">startIndex</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">endIndex</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">const</span> <span class="nx">item</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">createItem</span><span class="p">(</span><span class="nx">i</span><span class="p">);</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">visibleContainer</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">item</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="nx">createItem</span><span class="p">(</span><span class="nx">index</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">item</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="dl">"</span><span class="s2">div</span><span class="dl">"</span><span class="p">);</span>
    <span class="nx">item</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">height</span> <span class="o">=</span> <span class="s2">`</span><span class="p">${</span><span class="k">this</span><span class="p">.</span><span class="nx">itemHeight</span><span class="p">}</span><span class="s2">px`</span><span class="p">;</span>
    <span class="nx">item</span><span class="p">.</span><span class="nx">textContent</span> <span class="o">=</span> <span class="s2">`Item </span><span class="p">${</span><span class="nx">index</span> <span class="o">+</span> <span class="mi">1</span><span class="p">}</span><span class="s2">`</span><span class="p">;</span>
    <span class="k">return</span> <span class="nx">item</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// 3. Intersection Observer for Lazy Loading</span>
<span class="kd">class</span> <span class="nx">LazyLoader</span> <span class="p">{</span>
  <span class="kd">constructor</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">observer</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">IntersectionObserver</span><span class="p">(</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">handleIntersection</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">),</span>
      <span class="p">{</span>
        <span class="na">rootMargin</span><span class="p">:</span> <span class="dl">"</span><span class="s2">50px</span><span class="dl">"</span><span class="p">,</span>
        <span class="na">threshold</span><span class="p">:</span> <span class="mf">0.1</span><span class="p">,</span>
      <span class="p">}</span>
    <span class="p">);</span>
  <span class="p">}</span>

  <span class="nx">observe</span><span class="p">(</span><span class="nx">element</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">observer</span><span class="p">.</span><span class="nx">observe</span><span class="p">(</span><span class="nx">element</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="nx">handleIntersection</span><span class="p">(</span><span class="nx">entries</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">entries</span><span class="p">.</span><span class="nx">forEach</span><span class="p">((</span><span class="nx">entry</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">entry</span><span class="p">.</span><span class="nx">isIntersecting</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">loadContent</span><span class="p">(</span><span class="nx">entry</span><span class="p">.</span><span class="nx">target</span><span class="p">);</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">observer</span><span class="p">.</span><span class="nx">unobserve</span><span class="p">(</span><span class="nx">entry</span><span class="p">.</span><span class="nx">target</span><span class="p">);</span>
      <span class="p">}</span>
    <span class="p">});</span>
  <span class="p">}</span>

  <span class="nx">loadContent</span><span class="p">(</span><span class="nx">element</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">src</span> <span class="o">=</span> <span class="nx">element</span><span class="p">.</span><span class="nx">dataset</span><span class="p">.</span><span class="nx">src</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">src</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">element</span><span class="p">.</span><span class="nx">tagName</span> <span class="o">===</span> <span class="dl">"</span><span class="s2">IMG</span><span class="dl">"</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">element</span><span class="p">.</span><span class="nx">src</span> <span class="o">=</span> <span class="nx">src</span><span class="p">;</span>
      <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">element</span><span class="p">.</span><span class="nx">tagName</span> <span class="o">===</span> <span class="dl">"</span><span class="s2">IFRAME</span><span class="dl">"</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">element</span><span class="p">.</span><span class="nx">src</span> <span class="o">=</span> <span class="nx">src</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="nx">element</span><span class="p">.</span><span class="nx">removeAttribute</span><span class="p">(</span><span class="dl">"</span><span class="s2">data-src</span><span class="dl">"</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// Usage</span>
<span class="kd">const</span> <span class="nx">lazyLoader</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">LazyLoader</span><span class="p">();</span>
<span class="nb">document</span><span class="p">.</span><span class="nx">querySelectorAll</span><span class="p">(</span><span class="dl">"</span><span class="s2">[data-src]</span><span class="dl">"</span><span class="p">).</span><span class="nx">forEach</span><span class="p">((</span><span class="nx">element</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">lazyLoader</span><span class="p">.</span><span class="nx">observe</span><span class="p">(</span><span class="nx">element</span><span class="p">);</span>
<span class="p">});</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h2 id="-memory-management">üéØ Memory Management</h2>

<h3 id="memory-leaks-prevention">Memory Leaks Prevention</h3>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
</pre></td><td class="rouge-code"><pre><span class="c1">// 1. Event Listener Cleanup</span>
<span class="kd">class</span> <span class="nx">EventManager</span> <span class="p">{</span>
  <span class="kd">constructor</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">listeners</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Map</span><span class="p">();</span>
  <span class="p">}</span>

  <span class="nx">addListener</span><span class="p">(</span><span class="nx">element</span><span class="p">,</span> <span class="nx">event</span><span class="p">,</span> <span class="nx">handler</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">listeners</span><span class="p">.</span><span class="nx">has</span><span class="p">(</span><span class="nx">element</span><span class="p">))</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">listeners</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="nx">element</span><span class="p">,</span> <span class="k">new</span> <span class="nb">Map</span><span class="p">());</span>
    <span class="p">}</span>

    <span class="kd">const</span> <span class="nx">elementListeners</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">listeners</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="nx">element</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">elementListeners</span><span class="p">.</span><span class="nx">has</span><span class="p">(</span><span class="nx">event</span><span class="p">))</span> <span class="p">{</span>
      <span class="nx">elementListeners</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="nx">event</span><span class="p">,</span> <span class="p">[]);</span>
    <span class="p">}</span>

    <span class="nx">elementListeners</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="nx">event</span><span class="p">).</span><span class="nx">push</span><span class="p">(</span><span class="nx">handler</span><span class="p">);</span>
    <span class="nx">element</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="nx">event</span><span class="p">,</span> <span class="nx">handler</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="nx">removeListener</span><span class="p">(</span><span class="nx">element</span><span class="p">,</span> <span class="nx">event</span><span class="p">,</span> <span class="nx">handler</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">elementListeners</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">listeners</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="nx">element</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">elementListeners</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">const</span> <span class="nx">handlers</span> <span class="o">=</span> <span class="nx">elementListeners</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="nx">event</span><span class="p">);</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">handlers</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="nx">index</span> <span class="o">=</span> <span class="nx">handlers</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">handler</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">index</span> <span class="o">&gt;</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">handlers</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span><span class="nx">index</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
          <span class="nx">element</span><span class="p">.</span><span class="nx">removeEventListener</span><span class="p">(</span><span class="nx">event</span><span class="p">,</span> <span class="nx">handler</span><span class="p">);</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="nx">cleanup</span><span class="p">(</span><span class="nx">element</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">elementListeners</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">listeners</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="nx">element</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">elementListeners</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">elementListeners</span><span class="p">.</span><span class="nx">forEach</span><span class="p">((</span><span class="nx">handlers</span><span class="p">,</span> <span class="nx">event</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">handlers</span><span class="p">.</span><span class="nx">forEach</span><span class="p">((</span><span class="nx">handler</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
          <span class="nx">element</span><span class="p">.</span><span class="nx">removeEventListener</span><span class="p">(</span><span class="nx">event</span><span class="p">,</span> <span class="nx">handler</span><span class="p">);</span>
        <span class="p">});</span>
      <span class="p">});</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">listeners</span><span class="p">.</span><span class="k">delete</span><span class="p">(</span><span class="nx">element</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// 2. WeakMap for Caching</span>
<span class="kd">class</span> <span class="nx">CacheManager</span> <span class="p">{</span>
  <span class="kd">constructor</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">cache</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">WeakMap</span><span class="p">();</span>
  <span class="p">}</span>

  <span class="kd">set</span><span class="p">(</span><span class="nx">key</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">cache</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="nx">key</span><span class="p">,</span> <span class="nx">value</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="kd">get</span><span class="p">(</span><span class="nx">key</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">cache</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="nx">key</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="nx">has</span><span class="p">(</span><span class="nx">key</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">cache</span><span class="p">.</span><span class="nx">has</span><span class="p">(</span><span class="nx">key</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="c1">// No need for cleanup - WeakMap automatically removes entries</span>
  <span class="c1">// when the key object is garbage collected</span>
<span class="p">}</span>

<span class="c1">// 3. AbortController for Cancellable Requests</span>
<span class="kd">class</span> <span class="nx">RequestManager</span> <span class="p">{</span>
  <span class="kd">constructor</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">controllers</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Map</span><span class="p">();</span>
  <span class="p">}</span>

  <span class="k">async</span> <span class="nx">request</span><span class="p">(</span><span class="nx">url</span><span class="p">,</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{})</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">controller</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">AbortController</span><span class="p">();</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">controllers</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="nx">url</span><span class="p">,</span> <span class="nx">controller</span><span class="p">);</span>

    <span class="k">try</span> <span class="p">{</span>
      <span class="kd">const</span> <span class="nx">response</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">fetch</span><span class="p">(</span><span class="nx">url</span><span class="p">,</span> <span class="p">{</span>
        <span class="p">...</span><span class="nx">options</span><span class="p">,</span>
        <span class="na">signal</span><span class="p">:</span> <span class="nx">controller</span><span class="p">.</span><span class="nx">signal</span><span class="p">,</span>
      <span class="p">});</span>

      <span class="k">this</span><span class="p">.</span><span class="nx">controllers</span><span class="p">.</span><span class="k">delete</span><span class="p">(</span><span class="nx">url</span><span class="p">);</span>
      <span class="k">return</span> <span class="nx">response</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">error</span><span class="p">.</span><span class="nx">name</span> <span class="o">===</span> <span class="dl">"</span><span class="s2">AbortError</span><span class="dl">"</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Request was cancelled</span><span class="dl">"</span><span class="p">);</span>
      <span class="p">}</span>
      <span class="k">throw</span> <span class="nx">error</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="nx">cancel</span><span class="p">(</span><span class="nx">url</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">controller</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">controllers</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="nx">url</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">controller</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">controller</span><span class="p">.</span><span class="nx">abort</span><span class="p">();</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">controllers</span><span class="p">.</span><span class="k">delete</span><span class="p">(</span><span class="nx">url</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="nx">cancelAll</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">controllers</span><span class="p">.</span><span class="nx">forEach</span><span class="p">((</span><span class="nx">controller</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">controller</span><span class="p">.</span><span class="nx">abort</span><span class="p">());</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">controllers</span><span class="p">.</span><span class="nx">clear</span><span class="p">();</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h2 id="-performance-monitoring">üìä Performance Monitoring</h2>

<h3 id="real-user-monitoring-rum">Real User Monitoring (RUM)</h3>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
</pre></td><td class="rouge-code"><pre><span class="kd">class</span> <span class="nx">PerformanceMonitor</span> <span class="p">{</span>
  <span class="kd">constructor</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">metrics</span> <span class="o">=</span> <span class="p">{};</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">init</span><span class="p">();</span>
  <span class="p">}</span>

  <span class="nx">init</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// Core Web Vitals</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">observeLCP</span><span class="p">();</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">observeFID</span><span class="p">();</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">observeCLS</span><span class="p">();</span>

    <span class="c1">// Custom metrics</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">observeCustomMetrics</span><span class="p">();</span>

    <span class="c1">// Error tracking</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">observeErrors</span><span class="p">();</span>
  <span class="p">}</span>

  <span class="nx">observeLCP</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">new</span> <span class="nx">PerformanceObserver</span><span class="p">((</span><span class="nx">list</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="kd">const</span> <span class="nx">entries</span> <span class="o">=</span> <span class="nx">list</span><span class="p">.</span><span class="nx">getEntries</span><span class="p">();</span>
      <span class="kd">const</span> <span class="nx">lastEntry</span> <span class="o">=</span> <span class="nx">entries</span><span class="p">[</span><span class="nx">entries</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">];</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">metrics</span><span class="p">.</span><span class="nx">lcp</span> <span class="o">=</span> <span class="nx">lastEntry</span><span class="p">.</span><span class="nx">startTime</span><span class="p">;</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">reportMetric</span><span class="p">(</span><span class="dl">"</span><span class="s2">LCP</span><span class="dl">"</span><span class="p">,</span> <span class="nx">lastEntry</span><span class="p">.</span><span class="nx">startTime</span><span class="p">);</span>
    <span class="p">}).</span><span class="nx">observe</span><span class="p">({</span> <span class="na">entryTypes</span><span class="p">:</span> <span class="p">[</span><span class="dl">"</span><span class="s2">largest-contentful-paint</span><span class="dl">"</span><span class="p">]</span> <span class="p">});</span>
  <span class="p">}</span>

  <span class="nx">observeFID</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">new</span> <span class="nx">PerformanceObserver</span><span class="p">((</span><span class="nx">list</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="kd">const</span> <span class="nx">entries</span> <span class="o">=</span> <span class="nx">list</span><span class="p">.</span><span class="nx">getEntries</span><span class="p">();</span>
      <span class="nx">entries</span><span class="p">.</span><span class="nx">forEach</span><span class="p">((</span><span class="nx">entry</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">metrics</span><span class="p">.</span><span class="nx">fid</span> <span class="o">=</span> <span class="nx">entry</span><span class="p">.</span><span class="nx">processingStart</span> <span class="o">-</span> <span class="nx">entry</span><span class="p">.</span><span class="nx">startTime</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">reportMetric</span><span class="p">(</span><span class="dl">"</span><span class="s2">FID</span><span class="dl">"</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">metrics</span><span class="p">.</span><span class="nx">fid</span><span class="p">);</span>
      <span class="p">});</span>
    <span class="p">}).</span><span class="nx">observe</span><span class="p">({</span> <span class="na">entryTypes</span><span class="p">:</span> <span class="p">[</span><span class="dl">"</span><span class="s2">first-input</span><span class="dl">"</span><span class="p">]</span> <span class="p">});</span>
  <span class="p">}</span>

  <span class="nx">observeCLS</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">clsValue</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">new</span> <span class="nx">PerformanceObserver</span><span class="p">((</span><span class="nx">list</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="kd">const</span> <span class="nx">entries</span> <span class="o">=</span> <span class="nx">list</span><span class="p">.</span><span class="nx">getEntries</span><span class="p">();</span>
      <span class="nx">entries</span><span class="p">.</span><span class="nx">forEach</span><span class="p">((</span><span class="nx">entry</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">entry</span><span class="p">.</span><span class="nx">hadRecentInput</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">clsValue</span> <span class="o">+=</span> <span class="nx">entry</span><span class="p">.</span><span class="nx">value</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">});</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">metrics</span><span class="p">.</span><span class="nx">cls</span> <span class="o">=</span> <span class="nx">clsValue</span><span class="p">;</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">reportMetric</span><span class="p">(</span><span class="dl">"</span><span class="s2">CLS</span><span class="dl">"</span><span class="p">,</span> <span class="nx">clsValue</span><span class="p">);</span>
    <span class="p">}).</span><span class="nx">observe</span><span class="p">({</span> <span class="na">entryTypes</span><span class="p">:</span> <span class="p">[</span><span class="dl">"</span><span class="s2">layout-shift</span><span class="dl">"</span><span class="p">]</span> <span class="p">});</span>
  <span class="p">}</span>

  <span class="nx">observeCustomMetrics</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// Custom timing</span>
    <span class="nx">performance</span><span class="p">.</span><span class="nx">mark</span><span class="p">(</span><span class="dl">"</span><span class="s2">app-start</span><span class="dl">"</span><span class="p">);</span>

    <span class="c1">// Measure app initialization</span>
    <span class="nb">window</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="dl">"</span><span class="s2">load</span><span class="dl">"</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="nx">performance</span><span class="p">.</span><span class="nx">mark</span><span class="p">(</span><span class="dl">"</span><span class="s2">app-loaded</span><span class="dl">"</span><span class="p">);</span>
      <span class="nx">performance</span><span class="p">.</span><span class="nx">measure</span><span class="p">(</span><span class="dl">"</span><span class="s2">app-init</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">app-start</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">app-loaded</span><span class="dl">"</span><span class="p">);</span>

      <span class="kd">const</span> <span class="nx">measure</span> <span class="o">=</span> <span class="nx">performance</span><span class="p">.</span><span class="nx">getEntriesByName</span><span class="p">(</span><span class="dl">"</span><span class="s2">app-init</span><span class="dl">"</span><span class="p">)[</span><span class="mi">0</span><span class="p">];</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">reportMetric</span><span class="p">(</span><span class="dl">"</span><span class="s2">AppInit</span><span class="dl">"</span><span class="p">,</span> <span class="nx">measure</span><span class="p">.</span><span class="nx">duration</span><span class="p">);</span>
    <span class="p">});</span>
  <span class="p">}</span>

  <span class="nx">observeErrors</span><span class="p">()</span> <span class="p">{</span>
    <span class="nb">window</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="dl">"</span><span class="s2">error</span><span class="dl">"</span><span class="p">,</span> <span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">reportError</span><span class="p">(</span><span class="dl">"</span><span class="s2">JavaScript Error</span><span class="dl">"</span><span class="p">,</span> <span class="p">{</span>
        <span class="na">message</span><span class="p">:</span> <span class="nx">event</span><span class="p">.</span><span class="nx">message</span><span class="p">,</span>
        <span class="na">filename</span><span class="p">:</span> <span class="nx">event</span><span class="p">.</span><span class="nx">filename</span><span class="p">,</span>
        <span class="na">lineno</span><span class="p">:</span> <span class="nx">event</span><span class="p">.</span><span class="nx">lineno</span><span class="p">,</span>
        <span class="na">colno</span><span class="p">:</span> <span class="nx">event</span><span class="p">.</span><span class="nx">colno</span><span class="p">,</span>
      <span class="p">});</span>
    <span class="p">});</span>

    <span class="nb">window</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="dl">"</span><span class="s2">unhandledrejection</span><span class="dl">"</span><span class="p">,</span> <span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">reportError</span><span class="p">(</span><span class="dl">"</span><span class="s2">Unhandled Promise Rejection</span><span class="dl">"</span><span class="p">,</span> <span class="p">{</span>
        <span class="na">reason</span><span class="p">:</span> <span class="nx">event</span><span class="p">.</span><span class="nx">reason</span><span class="p">,</span>
      <span class="p">});</span>
    <span class="p">});</span>
  <span class="p">}</span>

  <span class="nx">reportMetric</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Send to analytics service</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">`Metric: </span><span class="p">${</span><span class="nx">name</span><span class="p">}</span><span class="s2"> = </span><span class="p">${</span><span class="nx">value</span><span class="p">}</span><span class="s2">`</span><span class="p">);</span>

    <span class="c1">// You could send this to Google Analytics, custom analytics, etc.</span>
    <span class="k">if</span> <span class="p">(</span><span class="nb">window</span><span class="p">.</span><span class="nx">gtag</span><span class="p">)</span> <span class="p">{</span>
      <span class="nb">window</span><span class="p">.</span><span class="nx">gtag</span><span class="p">(</span><span class="dl">"</span><span class="s2">event</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">performance</span><span class="dl">"</span><span class="p">,</span> <span class="p">{</span>
        <span class="na">metric_name</span><span class="p">:</span> <span class="nx">name</span><span class="p">,</span>
        <span class="na">metric_value</span><span class="p">:</span> <span class="nx">value</span><span class="p">,</span>
      <span class="p">});</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="nx">reportError</span><span class="p">(</span><span class="nx">type</span><span class="p">,</span> <span class="nx">details</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="s2">`Error: </span><span class="p">${</span><span class="nx">type</span><span class="p">}</span><span class="s2">`</span><span class="p">,</span> <span class="nx">details</span><span class="p">);</span>

    <span class="c1">// Send to error tracking service</span>
    <span class="k">if</span> <span class="p">(</span><span class="nb">window</span><span class="p">.</span><span class="nx">Sentry</span><span class="p">)</span> <span class="p">{</span>
      <span class="nb">window</span><span class="p">.</span><span class="nx">Sentry</span><span class="p">.</span><span class="nx">captureException</span><span class="p">(</span><span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="nx">type</span><span class="p">),</span> <span class="p">{</span>
        <span class="na">extra</span><span class="p">:</span> <span class="nx">details</span><span class="p">,</span>
      <span class="p">});</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="nx">getMetrics</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">{</span>
      <span class="p">...</span><span class="k">this</span><span class="p">.</span><span class="nx">metrics</span><span class="p">,</span>
      <span class="na">navigation</span><span class="p">:</span> <span class="nx">performance</span><span class="p">.</span><span class="nx">getEntriesByType</span><span class="p">(</span><span class="dl">"</span><span class="s2">navigation</span><span class="dl">"</span><span class="p">)[</span><span class="mi">0</span><span class="p">],</span>
      <span class="na">memory</span><span class="p">:</span> <span class="nx">performance</span><span class="p">.</span><span class="nx">memory</span><span class="p">,</span>
    <span class="p">};</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// Usage</span>
<span class="kd">const</span> <span class="nx">monitor</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PerformanceMonitor</span><span class="p">();</span>

<span class="c1">// Get metrics after page load</span>
<span class="nb">window</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="dl">"</span><span class="s2">load</span><span class="dl">"</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">setTimeout</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Performance Metrics:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">monitor</span><span class="p">.</span><span class="nx">getMetrics</span><span class="p">());</span>
  <span class="p">},</span> <span class="mi">1000</span><span class="p">);</span>
<span class="p">});</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<hr />

<h2 id="-summary">üéØ Summary</h2>

<p>Understanding browser architecture helps you:</p>

<ol>
  <li><strong>Optimize performance</strong> by leveraging browser capabilities</li>
  <li><strong>Debug issues</strong> more effectively</li>
  <li><strong>Write more efficient code</strong> that works with the browser‚Äôs rendering pipeline</li>
  <li><strong>Implement security best practices</strong> to protect users</li>
  <li><strong>Monitor and improve</strong> real-world performance</li>
</ol>

<h3 id="key-takeaways">Key Takeaways</h3>

<ul>
  <li><strong>Multi-process architecture</strong> provides security and stability</li>
  <li><strong>Rendering pipeline</strong> affects performance and user experience</li>
  <li><strong>Network optimization</strong> reduces loading times</li>
  <li><strong>Security model</strong> protects users from malicious code</li>
  <li><strong>Memory management</strong> prevents leaks and improves performance</li>
</ul>

<h3 id="next-steps">Next Steps</h3>

<ol>
  <li><strong>Profile your applications</strong> using browser DevTools</li>
  <li><strong>Monitor Core Web Vitals</strong> in production</li>
  <li><strong>Implement performance optimizations</strong> based on browser capabilities</li>
  <li><strong>Stay updated</strong> with browser features and best practices</li>
</ol>

        </div>
    </article>
</div>
    </main>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>Study Resources</h3>
                    <p>Comprehensive collection of frontend interview questions, coding challenges, and system design problems.</p>
                </div>
                <div class="footer-section">
                    <h3>Progress Tracking</h3>
                    <p>Monitor your learning journey with detailed progress indicators and completion status.</p>
                </div>
                <div class="footer-section">
                    <h3>Big Tech Ready</h3>
                    <p>Curated content specifically designed for interviews at Google, Meta, Amazon, Apple, and Netflix.</p>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 Frontend Interview Hub. Built for aspiring frontend engineers.</p>
            </div>
        </div>
    </footer>

    <!-- Scripts -->
    <script src="/assets/js/app.js"></script>
</body>
</html>