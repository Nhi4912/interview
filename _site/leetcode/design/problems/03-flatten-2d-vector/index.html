<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flatten 2D Vector | Frontend Interview Preparation Guide</title>
    <meta name="description" content="Comprehensive frontend interview materials for Big Tech companies">
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
    
    <!-- Styles -->
    <link rel="stylesheet" href="/assets/css/main.css">
</head>
<body>
    <!-- Navigation -->
    <header>
        <nav class="container">
            <div class="logo">Frontend Interview Hub</div>
            <button class="mobile-menu-toggle" aria-label="Toggle navigation menu" aria-expanded="false">
                <span aria-hidden="true">☰</span>
            </button>
            <ul class="nav-links" role="navigation" aria-label="Main navigation">
                <li><a href="/">Home</a></li>
                <li><a href="#progress">Progress</a></li>
                <li><a href="#knowledge">Knowledge</a></li>
                <li><a href="https://github.com/nee/interview" target="_blank" rel="noopener">GitHub</a></li>
            </ul>
        </nav>
    </header>

    <!-- Main Content -->
    <main>
        <div class="content-container">
    
        <nav class="breadcrumb">
            <ol>
                <li><a href="/">Home</a></li>
                
                
                
                    
                
                    
                        
                        
                            <li><a href="/leetcode/">Leetcode</a></li>
                        
                    
                
                    
                        
                        
                            <li><a href="/leetcode/design/">Design</a></li>
                        
                    
                
                    
                        
                        
                            <li><a href="/leetcode/design/problems/">Problems</a></li>
                        
                    
                
                    
                        
                        
                            <li class="active">Flatten 2d vector</li>
                        
                    
                
            </ol>
        </nav>
    
    
    <article class="content">
        
            <header class="content-header">
                <h1 class="content-title">Flatten 2D Vector</h1>
                
                
                    <div class="content-meta">
                        <span class="difficulty difficulty-easy">Easy</span>
                        
                            <span class="category">Design</span>
                        
                        
                            <div class="tags">
                                
                                    <span class="tag">Design</span>
                                
                                    <span class="tag">Two Pointers</span>
                                
                            </div>
                        
                    </div>
                
            </header>
        
        
        <div class="content-body">
            <h1 id="flatten-2d-vector">Flatten 2D Vector</h1>

<h2 id="problem-description">Problem Description</h2>

<ul>
  <li>
    <ul>
      <li>Design an iterator to flatten a 2D vector. It should support the following operations:  * - next and hasNext.  *  * Implement the Vector2D class:</li>
    </ul>
  </li>
</ul>

<h2 id="solutions">Solutions</h2>

<p>/**</p>
<ul>
  <li>Flatten 2D Vector
 *</li>
  <li>Problem: https://leetcode.com/problems/flatten-2d-vector/
 *</li>
  <li>Design an iterator to flatten a 2D vector. It should support the following operations:</li>
  <li>
    <ul>
      <li>next and hasNext.
 *</li>
    </ul>
  </li>
  <li>Implement the Vector2D class:</li>
  <li>
    <ul>
      <li>Vector2D(int[][] vec) initializes the object with the 2D vector vec.</li>
    </ul>
  </li>
  <li>
    <ul>
      <li>int next() returns the next element from the 2D vector and moves the pointer one step forward.</li>
    </ul>
  </li>
  <li>
    <ul>
      <li>boolean hasNext() returns true if there are still some elements in the vector, and false otherwise.
 *</li>
    </ul>
  </li>
  <li>Example 1:</li>
  <li>Input: [“Vector2D”, “next”, “next”, “next”, “hasNext”, “hasNext”, “next”, “hasNext”]</li>
  <li>[[[[1, 2], [3], [4]]], [], [], [], [], [], [], []]</li>
  <li>Output: [null, 1, 2, 3, true, true, 4, false]
 *</li>
  <li>Explanation:</li>
  <li>Vector2D vector2D = new Vector2D([[1, 2], [3], [4]]);</li>
  <li>vector2D.next();    // return 1</li>
  <li>vector2D.next();    // return 2</li>
  <li>vector2D.next();    // return 3</li>
  <li>vector2D.hasNext(); // return True</li>
  <li>vector2D.hasNext(); // return True</li>
  <li>vector2D.next();    // return 4</li>
  <li>vector2D.hasNext(); // return False
 *</li>
  <li>Constraints:</li>
  <li>
    <ul>
      <li>0 &lt;= vec.length &lt;= 200</li>
    </ul>
  </li>
  <li>
    <ul>
      <li>0 &lt;= vec[i].length &lt;= 500</li>
    </ul>
  </li>
  <li>
    <ul>
      <li>-1000 &lt;= vec[i][j] &lt;= 1000</li>
    </ul>
  </li>
  <li>
    <ul>
      <li>At most 10^5 calls will be made to next and hasNext in total.
 *</li>
    </ul>
  </li>
  <li>Solution Approach:</li>
  <li>
    <ol>
      <li>Store the 2D vector and current position</li>
    </ol>
  </li>
  <li>
    <ol>
      <li>Use two pointers: outer index for rows, inner index for columns</li>
    </ol>
  </li>
  <li>
    <ol>
      <li>Skip empty rows when moving to next element</li>
    </ol>
  </li>
  <li>
    <ol>
      <li>Update pointers after each next() call
 *</li>
    </ol>
  </li>
  <li>Time Complexity: O(1) average for next() and hasNext()</li>
  <li>Space Complexity: O(1) extra space
 */</li>
</ul>

<p>/**</p>
<ul>
  <li>Vector2D class for flattening 2D vector
 *</li>
  <li>Lớp Vector2D để làm phẳng vector 2D
 */
class Vector2D {
  private vec: number[][];
  private outerIndex: number;
  private innerIndex: number;</li>
</ul>

<p>constructor(vec: number[][]) {
    this.vec = vec;
    this.outerIndex = 0;
    this.innerIndex = 0;</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre>// Move to first non-empty row
this.moveToNext();   }
</pre></td></tr></tbody></table></code></pre></div></div>

<p>/**</p>
<ul>
  <li>Move to the next valid position
   *</li>
  <li>Di chuyển đến vị trí hợp lệ tiếp theo
   */
  private moveToNext(): void {
    // Skip empty rows
    while (
 this.outerIndex &lt; this.vec.length &amp;&amp;
 this.innerIndex &gt;= this.vec[this.outerIndex].length
    ) {
 this.outerIndex++;
 this.innerIndex = 0;
    }
  }</li>
</ul>

<p>/**</p>
<ul>
  <li>Get the next element from the 2D vector
   *</li>
  <li>Lấy phần tử tiếp theo từ vector 2D
   *</li>
  <li>@returns Phần tử tiếp theo
   */
  next(): number {
    if (!this.hasNext()) {
 throw new Error(“No more elements”);
    }</li>
</ul>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="rouge-code"><pre>const result = this.vec[this.outerIndex][this.innerIndex];
this.innerIndex++;

// Move to next valid position
this.moveToNext();

return result;   }
</pre></td></tr></tbody></table></code></pre></div></div>

<p>/**</p>
<ul>
  <li>Check if there are more elements
   *</li>
  <li>Kiểm tra xem còn phần tử nào không
   *</li>
  <li>@returns true nếu còn phần tử, false nếu không
   */
  hasNext(): boolean {
    return (
 this.outerIndex &lt; this.vec.length &amp;&amp;
 this.innerIndex &lt; this.vec[this.outerIndex].length
    );
  }
}</li>
</ul>

<p>/**</p>
<ul>
  <li>Alternative Implementation: Using Queue
 *</li>
  <li>Giải pháp thay thế: Sử dụng Queue
 */
class Vector2DQueue {
  private queue: number[];</li>
</ul>

<p>constructor(vec: number[][]) {
    this.queue = [];</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="rouge-code"><pre>// Flatten the 2D vector into a queue
for (const row of vec) {
  for (const element of row) {
    this.queue.push(element);
  }
}   }
</pre></td></tr></tbody></table></code></pre></div></div>

<p>next(): number {
    if (!this.hasNext()) {
      throw new Error(“No more elements”);
    }</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>return this.queue.shift()!;   }
</pre></td></tr></tbody></table></code></pre></div></div>

<p>hasNext(): boolean {
    return this.queue.length &gt; 0;
  }
}</p>

<p>/**</p>
<ul>
  <li>Implementation with Reset Functionality
 *</li>
  <li>Giải pháp với chức năng đặt lại
 */
class Vector2DWithReset {
  private vec: number[][];
  private outerIndex: number;
  private innerIndex: number;
  private originalOuterIndex: number;
  private originalInnerIndex: number;</li>
</ul>

<p>constructor(vec: number[][]) {
    this.vec = vec;
    this.outerIndex = 0;
    this.innerIndex = 0;
    this.originalOuterIndex = 0;
    this.originalInnerIndex = 0;</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>this.moveToNext();   }
</pre></td></tr></tbody></table></code></pre></div></div>

<p>private moveToNext(): void {
    while (
      this.outerIndex &lt; this.vec.length &amp;&amp;
      this.innerIndex &gt;= this.vec[this.outerIndex].length
    ) {
      this.outerIndex++;
      this.innerIndex = 0;
    }
  }</p>

<p>next(): number {
    if (!this.hasNext()) {
      throw new Error(“No more elements”);
    }</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="rouge-code"><pre>const result = this.vec[this.outerIndex][this.innerIndex];
this.innerIndex++;

this.moveToNext();

return result;   }
</pre></td></tr></tbody></table></code></pre></div></div>

<p>hasNext(): boolean {
    return (
      this.outerIndex &lt; this.vec.length &amp;&amp;
      this.innerIndex &lt; this.vec[this.outerIndex].length
    );
  }</p>

<p>/**</p>
<ul>
  <li>Reset the iterator to the beginning
   *</li>
  <li>Đặt lại iterator về đầu
   */
  reset(): void {
    this.outerIndex = this.originalOuterIndex;
    this.innerIndex = this.originalInnerIndex;
    this.moveToNext();
  }</li>
</ul>

<p>/**</p>
<ul>
  <li>Get current position
   *</li>
  <li>Lấy vị trí hiện tại
   */
  getCurrentPosition(): { outer: number; inner: number } {
    return { outer: this.outerIndex, inner: this.innerIndex };
  }
}</li>
</ul>

<p>/**</p>
<ul>
  <li>Implementation with Peek Functionality
 *</li>
  <li>Giải pháp với chức năng xem trước
 */
class Vector2DWithPeek {
  private vec: number[][];
  private outerIndex: number;
  private innerIndex: number;</li>
</ul>

<p>constructor(vec: number[][]) {
    this.vec = vec;
    this.outerIndex = 0;
    this.innerIndex = 0;</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>this.moveToNext();   }
</pre></td></tr></tbody></table></code></pre></div></div>

<p>private moveToNext(): void {
    while (
      this.outerIndex &lt; this.vec.length &amp;&amp;
      this.innerIndex &gt;= this.vec[this.outerIndex].length
    ) {
      this.outerIndex++;
      this.innerIndex = 0;
    }
  }</p>

<p>next(): number {
    if (!this.hasNext()) {
      throw new Error(“No more elements”);
    }</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="rouge-code"><pre>const result = this.vec[this.outerIndex][this.innerIndex];
this.innerIndex++;

this.moveToNext();

return result;   }
</pre></td></tr></tbody></table></code></pre></div></div>

<p>hasNext(): boolean {
    return (
      this.outerIndex &lt; this.vec.length &amp;&amp;
      this.innerIndex &lt; this.vec[this.outerIndex].length
    );
  }</p>

<p>/**</p>
<ul>
  <li>Peek at the next element without moving the pointer
   *</li>
  <li>Xem phần tử tiếp theo mà không di chuyển con trỏ
   *</li>
  <li>@returns Phần tử tiếp theo hoặc null nếu không có
   */
  peek(): number | null {
    if (!this.hasNext()) {
 return null;
    }</li>
</ul>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>return this.vec[this.outerIndex][this.innerIndex];   } }
</pre></td></tr></tbody></table></code></pre></div></div>

<p>// Test cases / Các trường hợp kiểm thử
function runTests() {
  console.log(“=== Flatten 2D Vector Tests ===”);
  console.log(“=== Kiểm thử bài toán Làm phẳng Vector 2D ===\n”);</p>

<p>const testCases = [
    {
      name: “Example 1: Basic case”,
      input: [[1, 2], [3], [4]],
      description: “Standard 2D vector with mixed row lengths”,
    },
    {
      name: “Empty vector”,
      input: [],
      description: “Empty 2D vector”,
    },
    {
      name: “Single element”,
      input: [[5]],
      description: “Vector with single element”,
    },
    {
      name: “Empty rows”,
      input: [[], [1, 2], [], [3], []],
      description: “Vector with empty rows”,
    },
    {
      name: “All empty rows”,
      input: [[], [], []],
      description: “Vector with all empty rows”,
    },
    {
      name: “Large vector”,
      input: [[1, 2, 3], [4, 5], [6], [7, 8, 9, 10]],
      description: “Vector with multiple rows of different lengths”,
    },
  ];</p>

<p>for (const testCase of testCases) {
    console.log(<code class="language-plaintext highlighter-rouge">Test: ${testCase.name}</code>);
    console.log(<code class="language-plaintext highlighter-rouge">Input: ${JSON.stringify(testCase.input)}</code>);
    console.log(<code class="language-plaintext highlighter-rouge">Description: ${testCase.description}</code>);</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
</pre></td><td class="rouge-code"><pre>const vector2D = new Vector2D(testCase.input);

console.log("Iteration results:");
console.log("Kết quả lặp:");
let count = 0;
while (vector2D.hasNext() &amp;&amp; count &lt; 20) {
  // Limit to prevent infinite loop
  const element = vector2D.next();
  console.log(`  ${count + 1}. ${element}`);
  count++;
}

if (!vector2D.hasNext()) {
  console.log("  No more elements");
}

console.log("---");   }
</pre></td></tr></tbody></table></code></pre></div></div>

<p>// Test with reset functionality
  console.log(“\n=== Testing with Reset Functionality ===”);
  console.log(“=== Kiểm thử với chức năng đặt lại ===\n”);</p>

<p>const testVector = [[1, 2], [3], [4]];
  const vectorWithReset = new Vector2DWithReset(testVector);</p>

<p>console.log(“First iteration:”);
  console.log(“Lần lặp đầu tiên:”);
  while (vectorWithReset.hasNext()) {
    console.log(<code class="language-plaintext highlighter-rouge">  ${vectorWithReset.next()}</code>);
  }</p>

<p>console.log(“\nResetting…”);
  console.log(“Đang đặt lại…”);
  vectorWithReset.reset();</p>

<p>console.log(“Second iteration after reset:”);
  console.log(“Lần lặp thứ hai sau khi đặt lại:”);
  while (vectorWithReset.hasNext()) {
    console.log(<code class="language-plaintext highlighter-rouge">  ${vectorWithReset.next()}</code>);
  }</p>

<p>// Test with peek functionality
  console.log(“\n=== Testing with Peek Functionality ===”);
  console.log(“=== Kiểm thử với chức năng xem trước ===\n”);</p>

<p>const vectorWithPeek = new Vector2DWithPeek([[1, 2], [3], [4]]);</p>

<p>console.log(“Peeking without consuming:”);
  console.log(“Xem trước mà không tiêu thụ:”);
  while (vectorWithPeek.hasNext()) {
    const peeked = vectorWithPeek.peek();
    const next = vectorWithPeek.next();
    console.log(<code class="language-plaintext highlighter-rouge">  Peeked: ${peeked}, Next: ${next}</code>);
  }</p>

<p>// Performance comparison
  console.log(“\n=== Performance Comparison ===”);
  console.log(“=== So sánh hiệu suất ===\n”);</p>

<p>const largeVector = Array.from({ length: 1000 }, (<em>, i) =&gt;
    Array.from(
      { length: Math.floor(Math.random() * 10) + 1 },
      (</em>, j) =&gt; i * 1000 + j
    )
  );</p>

<p>console.log(“Testing with large vector (1000 rows)…”);
  console.log(“Kiểm thử với vector lớn (1000 hàng)…”);</p>

<p>const start1 = performance.now();
  const vector1 = new Vector2D(largeVector);
  let count1 = 0;
  while (vector1.hasNext()) {
    vector1.next();
    count1++;
  }
  const time1 = performance.now() - start1;</p>

<p>const start2 = performance.now();
  const vector2 = new Vector2DQueue(largeVector);
  let count2 = 0;
  while (vector2.hasNext()) {
    vector2.next();
    count2++;
  }
  const time2 = performance.now() - start2;</p>

<p>console.log(<code class="language-plaintext highlighter-rouge">Two Pointers: ${time1.toFixed(4)}ms, ${count1} elements</code>);
  console.log(<code class="language-plaintext highlighter-rouge">Queue: ${time2.toFixed(4)}ms, ${count2} elements</code>);
  console.log(<code class="language-plaintext highlighter-rouge">Results match: ${count1 === count2 ? "✅ Yes" : "❌ No"}</code>);
}</p>

<p>// Run tests if this file is executed directly
if (require.main === module) {
  runTests();
}</p>

<p>export { Vector2D, Vector2DQueue, Vector2DWithReset, Vector2DWithPeek };</p>


        </div>
    </article>
</div>
    </main>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>Study Resources</h3>
                    <p>Comprehensive collection of frontend interview questions, coding challenges, and system design problems.</p>
                </div>
                <div class="footer-section">
                    <h3>Progress Tracking</h3>
                    <p>Monitor your learning journey with detailed progress indicators and completion status.</p>
                </div>
                <div class="footer-section">
                    <h3>Big Tech Ready</h3>
                    <p>Curated content specifically designed for interviews at Google, Meta, Amazon, Apple, and Netflix.</p>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 Frontend Interview Hub. Built for aspiring frontend engineers.</p>
            </div>
        </div>
    </footer>

    <!-- Scripts -->
    <script src="/assets/js/app.js"></script>
</body>
</html>