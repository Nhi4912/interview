<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Insert Delete GetRandom O(1) | Frontend Interview Preparation Guide</title>
    <meta name="description" content="Comprehensive frontend interview materials for Big Tech companies">
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
    
    <!-- Styles -->
    <link rel="stylesheet" href="/assets/css/main.css">
</head>
<body>
    <!-- Navigation -->
    <header>
        <nav class="container">
            <div class="logo">Frontend Interview Hub</div>
            <button class="mobile-menu-toggle" aria-label="Toggle navigation menu" aria-expanded="false">
                <span aria-hidden="true">☰</span>
            </button>
            <ul class="nav-links" role="navigation" aria-label="Main navigation">
                <li><a href="/">Home</a></li>
                <li><a href="#progress">Progress</a></li>
                <li><a href="#knowledge">Knowledge</a></li>
                <li><a href="https://github.com/nee/interview" target="_blank" rel="noopener">GitHub</a></li>
            </ul>
        </nav>
    </header>

    <!-- Main Content -->
    <main>
        <div class="content-container">
    
        <nav class="breadcrumb">
            <ol>
                <li><a href="/">Home</a></li>
                
                
                
                    
                
                    
                        
                        
                            <li><a href="/leetcode/">Leetcode</a></li>
                        
                    
                
                    
                        
                        
                            <li><a href="/leetcode/design/">Design</a></li>
                        
                    
                
                    
                        
                        
                            <li><a href="/leetcode/design/problems/">Problems</a></li>
                        
                    
                
                    
                        
                        
                            <li class="active">Insert delete getrandom o(1)</li>
                        
                    
                
            </ol>
        </nav>
    
    
    <article class="content">
        
            <header class="content-header">
                <h1 class="content-title">Insert Delete GetRandom O(1)</h1>
                
                
                    <div class="content-meta">
                        <span class="difficulty difficulty-hard">Hard</span>
                        
                            <span class="category">Design</span>
                        
                        
                            <div class="tags">
                                
                                    <span class="tag">Design</span>
                                
                                    <span class="tag">Hash Table</span>
                                
                            </div>
                        
                    </div>
                
            </header>
        
        
        <div class="content-body">
            <h1 id="insert-delete-getrandom-o1">Insert Delete GetRandom O(1)</h1>

<h2 id="problem-description">Problem Description</h2>

<ul>
  <li>
    <ul>
      <li>Implement the RandomizedSet class:  * - RandomizedSet() Initializes the RandomizedSet object.  * - bool insert(int val) Inserts an item val into the set if not present. Returns true if the item was not present, false otherwise.  * - bool remove(int val) Removes an item val from the set if present. Returns true if the item was present, false otherwise.</li>
    </ul>
  </li>
</ul>

<h2 id="solutions">Solutions</h2>

<p>/**</p>
<ul>
  <li>Insert Delete GetRandom O(1)
 *</li>
  <li>Problem: https://leetcode.com/problems/insert-delete-getrandom-o1/
 *</li>
  <li>Implement the RandomizedSet class:</li>
  <li>
    <ul>
      <li>RandomizedSet() Initializes the RandomizedSet object.</li>
    </ul>
  </li>
  <li>
    <ul>
      <li>bool insert(int val) Inserts an item val into the set if not present. Returns true if the item was not present, false otherwise.</li>
    </ul>
  </li>
  <li>
    <ul>
      <li>bool remove(int val) Removes an item val from the set if present. Returns true if the item was present, false otherwise.</li>
    </ul>
  </li>
  <li>
    <ul>
      <li>int getRandom() Returns a random element from the current set of elements (it’s guaranteed that at least one element exists when this method is called).
 *</li>
    </ul>
  </li>
  <li>Each function must work in average O(1) time complexity.
 *</li>
  <li>Example 1:</li>
  <li>Input: [“RandomizedSet”, “insert”, “remove”, “insert”, “getRandom”, “remove”, “insert”, “getRandom”]</li>
  <li>[[], [1], [2], [2], [], [1], [2], []]</li>
  <li>Output: [null, true, false, true, 2, true, false, 2]
 *</li>
  <li>Explanation:</li>
  <li>RandomizedSet randomizedSet = new RandomizedSet();</li>
  <li>randomizedSet.insert(1); // Inserts 1 to the set. Returns true as 1 was inserted successfully.</li>
  <li>randomizedSet.remove(2); // Returns false as 2 does not exist in the set.</li>
  <li>randomizedSet.insert(2); // Inserts 2 to the set, returns true. Set now contains [1,2].</li>
  <li>randomizedSet.getRandom(); // getRandom() should return either 1 or 2 randomly.</li>
  <li>randomizedSet.remove(1); // Removes 1 from the set, returns true. Set now contains [2].</li>
  <li>randomizedSet.insert(2); // 2 was already in the set, so return false.</li>
  <li>randomizedSet.getRandom(); // Since 2 is the only number in the set, getRandom() will always return 2.
 *</li>
  <li>Constraints:</li>
  <li>
    <ul>
      <li>-2^31 &lt;= val &lt;= 2^31 - 1</li>
    </ul>
  </li>
  <li>
    <ul>
      <li>At most 2 * 10^5 calls will be made to insert, remove, and getRandom.</li>
    </ul>
  </li>
  <li>
    <ul>
      <li>There will be at least one element in the data structure when getRandom is called.
 *</li>
    </ul>
  </li>
  <li>Solution Approach:</li>
  <li>
    <ol>
      <li>Use HashMap + ArrayList combination</li>
    </ol>
  </li>
  <li>
    <ol>
      <li>HashMap stores value -&gt; index mapping</li>
    </ol>
  </li>
  <li>
    <ol>
      <li>ArrayList stores values for random access</li>
    </ol>
  </li>
  <li>
    <ol>
      <li>For removal, swap with last element and remove last</li>
    </ol>
  </li>
  <li>
    <ol>
      <li>All operations achieve O(1) average time complexity
 *</li>
    </ol>
  </li>
  <li>Time Complexity: O(1) average for all operations</li>
  <li>Space Complexity: O(n) where n is the number of elements
 */</li>
</ul>

<p>/**</p>
<ul>
  <li>RandomizedSet class with O(1) operations
 *</li>
  <li>Lớp RandomizedSet với các thao tác O(1)
 */
class RandomizedSet {
  private map: Map&lt;number, number&gt;; // value -&gt; index
  private array: number[]; // values for random access</li>
</ul>

<p>constructor() {
    this.map = new Map();
    this.array = [];
  }</p>

<p>/**</p>
<ul>
  <li>Insert a value into the set
   *</li>
  <li>Chèn một giá trị vào tập hợp
   *</li>
  <li>@param val - Value to insert</li>
  <li>@returns true if inserted, false if already exists
   */
  insert(val: number): boolean {
    if (this.map.has(val)) {
 return false;
    }</li>
</ul>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre>this.array.push(val);
this.map.set(val, this.array.length - 1);
return true;   }
</pre></td></tr></tbody></table></code></pre></div></div>

<p>/**</p>
<ul>
  <li>Remove a value from the set
   *</li>
  <li>Xóa một giá trị khỏi tập hợp
   *</li>
  <li>@param val - Value to remove</li>
  <li>@returns true if removed, false if not found
   */
  remove(val: number): boolean {
    if (!this.map.has(val)) {
 return false;
    }</li>
</ul>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre></td><td class="rouge-code"><pre>const index = this.map.get(val)!;
const lastElement = this.array[this.array.length - 1];

// Swap with last element
this.array[index] = lastElement;
this.map.set(lastElement, index);

// Remove last element
this.array.pop();
this.map.delete(val);

return true;   }
</pre></td></tr></tbody></table></code></pre></div></div>

<p>/**</p>
<ul>
  <li>Get a random element from the set
   *</li>
  <li>Lấy một phần tử ngẫu nhiên từ tập hợp
   *</li>
  <li>@returns Random element from the set
   */
  getRandom(): number {
    const randomIndex = Math.floor(Math.random() * this.array.length);
    return this.array[randomIndex];
  }</li>
</ul>

<p>/**</p>
<ul>
  <li>Get the size of the set
   *</li>
  <li>Lấy kích thước của tập hợp
   *</li>
  <li>@returns Number of elements in the set
   */
  size(): number {
    return this.array.length;
  }</li>
</ul>

<p>/**</p>
<ul>
  <li>Check if a value exists in the set
   *</li>
  <li>Kiểm tra xem một giá trị có tồn tại trong tập hợp không
   *</li>
  <li>@param val - Value to check</li>
  <li>@returns true if exists, false otherwise
   */
  has(val: number): boolean {
    return this.map.has(val);
  }</li>
</ul>

<p>/**</p>
<ul>
  <li>Get all elements in the set
   *</li>
  <li>Lấy tất cả phần tử trong tập hợp
   *</li>
  <li>@returns Array of all elements
   */
  toArray(): number[] {
    return […this.array];
  }
}</li>
</ul>

<p>/**</p>
<ul>
  <li>Alternative Implementation: Using Set + Array
 *</li>
  <li>Giải pháp thay thế: Sử dụng Set + Array
 */
class RandomizedSetAlternative {
  private set: Set<number>;
  private array: number[];</number></li>
</ul>

<p>constructor() {
    this.set = new Set();
    this.array = [];
  }</p>

<p>insert(val: number): boolean {
    if (this.set.has(val)) {
      return false;
    }</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre>this.set.add(val);
this.array.push(val);
return true;   }
</pre></td></tr></tbody></table></code></pre></div></div>

<p>remove(val: number): boolean {
    if (!this.set.has(val)) {
      return false;
    }</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="rouge-code"><pre>this.set.delete(val);
const index = this.array.indexOf(val);

if (index &gt; -1) {
  this.array.splice(index, 1);
}

return true;   }
</pre></td></tr></tbody></table></code></pre></div></div>

<p>getRandom(): number {
    const randomIndex = Math.floor(Math.random() * this.array.length);
    return this.array[randomIndex];
  }</p>

<p>size(): number {
    return this.set.size;
  }</p>

<p>has(val: number): boolean {
    return this.set.has(val);
  }</p>

<p>toArray(): number[] {
    return […this.set];
  }
}</p>

<p>/**</p>
<ul>
  <li>Implementation with Statistics Tracking
 *</li>
  <li>Giải pháp với theo dõi thống kê
 */
class RandomizedSetWithStats extends RandomizedSet {
  private insertCount: number = 0;
  private removeCount: number = 0;
  private getRandomCount: number = 0;
  private valueFrequency: Map&lt;number, number&gt; = new Map();</li>
</ul>

<p>insert(val: number): boolean {
    const result = super.insert(val);
    this.insertCount++;</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="rouge-code"><pre>if (result) {
  this.valueFrequency.set(val, (this.valueFrequency.get(val) || 0) + 1);
}

return result;   }
</pre></td></tr></tbody></table></code></pre></div></div>

<p>remove(val: number): boolean {
    const result = super.remove(val);
    this.removeCount++;</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre></td><td class="rouge-code"><pre>if (result) {
  const freq = this.valueFrequency.get(val) || 0;
  if (freq &gt; 1) {
    this.valueFrequency.set(val, freq - 1);
  } else {
    this.valueFrequency.delete(val);
  }
}

return result;   }
</pre></td></tr></tbody></table></code></pre></div></div>

<p>getRandom(): number {
    this.getRandomCount++;
    return super.getRandom();
  }</p>

<p>/**</p>
<ul>
  <li>Get statistics about operations
   *</li>
  <li>Lấy thống kê về các thao tác
   *</li>
  <li>@returns Object containing operation statistics
   */
  getStats(): {
    insertCount: number;
    removeCount: number;
    getRandomCount: number;
    valueFrequency: Map&lt;number, number&gt;;
  } {
    return {
 insertCount: this.insertCount,
 removeCount: this.removeCount,
 getRandomCount: this.getRandomCount,
 valueFrequency: new Map(this.valueFrequency),
    };
  }</li>
</ul>

<p>/**</p>
<ul>
  <li>Get random distribution analysis
   *</li>
  <li>Phân tích phân bố ngẫu nhiên
   *</li>
  <li>@param iterations - Number of getRandom calls to test</li>
  <li>@returns Object containing distribution analysis
   */
  analyzeRandomDistribution(iterations: number): {
    distribution: Map&lt;number, number&gt;;
    expectedFrequency: number;
    actualFrequencies: number[];
  } {
    const distribution = new Map&lt;number, number&gt;();
    const elements = this.toArray();</li>
</ul>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre></td><td class="rouge-code"><pre>if (elements.length === 0) {
  return { distribution, expectedFrequency: 0, actualFrequencies: [] };
}

const expectedFrequency = iterations / elements.length;

for (let i = 0; i &lt; iterations; i++) {
  const randomValue = this.getRandom();
  distribution.set(randomValue, (distribution.get(randomValue) || 0) + 1);
}

const actualFrequencies = elements.map((val) =&gt; distribution.get(val) || 0);

return { distribution, expectedFrequency, actualFrequencies };   } }
</pre></td></tr></tbody></table></code></pre></div></div>

<p>// Test cases / Các trường hợp kiểm thử
function runTests() {
  console.log(“=== Insert Delete GetRandom O(1) Tests ===”);
  console.log(“=== Kiểm thử bài toán Chèn Xóa Lấy ngẫu nhiên O(1) ===\n”);</p>

<p>const testCases = [
    {
      name: “Example 1: Standard operations”,
      operations: [
        { type: “insert”, value: 1, expected: true },
        { type: “remove”, value: 2, expected: false },
        { type: “insert”, value: 2, expected: true },
        { type: “getRandom”, expected: “any” },
        { type: “remove”, value: 1, expected: true },
        { type: “insert”, value: 2, expected: false },
        { type: “getRandom”, expected: 2 },
      ],
      description: “Standard sequence of operations”,
    },
    {
      name: “Empty set operations”,
      operations: [
        { type: “remove”, value: 1, expected: false },
        { type: “insert”, value: 1, expected: true },
        { type: “getRandom”, expected: 1 },
      ],
      description: “Operations on initially empty set”,
    },
    {
      name: “Duplicate insertions”,
      operations: [
        { type: “insert”, value: 1, expected: true },
        { type: “insert”, value: 1, expected: false },
        { type: “insert”, value: 2, expected: true },
        { type: “insert”, value: 2, expected: false },
      ],
      description: “Testing duplicate insertions”,
    },
    {
      name: “Remove non-existent elements”,
      operations: [
        { type: “remove”, value: 1, expected: false },
        { type: “insert”, value: 1, expected: true },
        { type: “remove”, value: 2, expected: false },
        { type: “remove”, value: 1, expected: true },
        { type: “remove”, value: 1, expected: false },
      ],
      description: “Testing removal of non-existent elements”,
    },
  ];</p>

<p>for (const testCase of testCases) {
    console.log(<code class="language-plaintext highlighter-rouge">Test: ${testCase.name}</code>);
    console.log(<code class="language-plaintext highlighter-rouge">Description: ${testCase.description}</code>);</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
</pre></td><td class="rouge-code"><pre>const randomizedSet = new RandomizedSet();
let testPassed = true;

for (let i = 0; i &lt; testCase.operations.length; i++) {
  const operation = testCase.operations[i];
  let result: any;

  switch (operation.type) {
    case "insert":
      result = randomizedSet.insert(operation.value);
      break;
    case "remove":
      result = randomizedSet.remove(operation.value);
      break;
    case "getRandom":
      result = randomizedSet.getRandom();
      break;
  }

  let passed = false;
  if (operation.expected === "any") {
    passed = true; // Any value is acceptable for getRandom
  } else {
    passed = result === operation.expected;
  }

  console.log(
    `  ${i + 1}. ${operation.type}(${operation.value || ""}) -&gt; ${result} ${
      passed ? "✅" : "❌"
    }`
  );

  if (!passed) {
    testPassed = false;
  }
}

console.log(`Test ${testPassed ? "PASSED" : "FAILED"}`);
console.log(`Final set: [${randomizedSet.toArray().join(", ")}]`);
console.log("---");   }
</pre></td></tr></tbody></table></code></pre></div></div>

<p>// Test with statistics
  console.log(“\n=== Testing with Statistics ===”);
  console.log(“=== Kiểm thử với thống kê ===\n”);</p>

<p>const statsSet = new RandomizedSetWithStats();</p>

<p>// Perform some operations
  statsSet.insert(1);
  statsSet.insert(2);
  statsSet.insert(3);
  statsSet.remove(2);
  statsSet.insert(4);
  statsSet.getRandom();
  statsSet.getRandom();
  statsSet.getRandom();</p>

<p>const stats = statsSet.getStats();
  console.log(“Operation Statistics:”);
  console.log(<code class="language-plaintext highlighter-rouge">  Insert operations: ${stats.insertCount}</code>);
  console.log(<code class="language-plaintext highlighter-rouge">  Remove operations: ${stats.removeCount}</code>);
  console.log(<code class="language-plaintext highlighter-rouge">  GetRandom operations: ${stats.getRandomCount}</code>);
  console.log(<code class="language-plaintext highlighter-rouge">  Current set: [${statsSet.toArray().join(", ")}]</code>);</p>

<p>// Test random distribution
  console.log(“\n=== Testing Random Distribution ===”);
  console.log(“=== Kiểm thử phân bố ngẫu nhiên ===\n”);</p>

<p>const testSet = new RandomizedSetWithStats();
  testSet.insert(1);
  testSet.insert(2);
  testSet.insert(3);
  testSet.insert(4);
  testSet.insert(5);</p>

<p>const distributionAnalysis = testSet.analyzeRandomDistribution(1000);</p>

<p>console.log(“Random Distribution Analysis (1000 calls):”);
  console.log(
    <code class="language-plaintext highlighter-rouge">Expected frequency per element: ${distributionAnalysis.expectedFrequency.toFixed(
      2
    )}</code>
  );
  console.log(“Actual frequencies:”);
  testSet.toArray().forEach((val, index) =&gt; {
    const actual = distributionAnalysis.actualFrequencies[index];
    const expected = distributionAnalysis.expectedFrequency;
    const deviation = (Math.abs(actual - expected) / expected) * 100;
    console.log(<code class="language-plaintext highlighter-rouge">  ${val}: ${actual} (${deviation.toFixed(1)}% deviation)</code>);
  });</p>

<p>// Performance comparison
  console.log(“\n=== Performance Comparison ===”);
  console.log(“=== So sánh hiệu suất ===\n”);</p>

<p>const set1 = new RandomizedSet();
  const set2 = new RandomizedSetAlternative();</p>

<p>const operations = 10000;
  const testValues = Array.from({ length: 1000 }, (_, i) =&gt; i);</p>

<p>console.log(<code class="language-plaintext highlighter-rouge">Testing with ${operations} operations...</code>);
  console.log(<code class="language-plaintext highlighter-rouge">Kiểm thử với ${operations} thao tác...</code>);</p>

<p>// Test RandomizedSet
  const start1 = performance.now();
  for (let i = 0; i &lt; operations; i++) {
    const val = testValues[i % testValues.length];
    const operation = i % 3;</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre></td><td class="rouge-code"><pre>switch (operation) {
  case 0:
    set1.insert(val);
    break;
  case 1:
    set1.remove(val);
    break;
  case 2:
    set1.getRandom();
    break;
}   }   const time1 = performance.now() - start1;
</pre></td></tr></tbody></table></code></pre></div></div>

<p>// Test RandomizedSetAlternative
  const start2 = performance.now();
  for (let i = 0; i &lt; operations; i++) {
    const val = testValues[i % testValues.length];
    const operation = i % 3;</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre></td><td class="rouge-code"><pre>switch (operation) {
  case 0:
    set2.insert(val);
    break;
  case 1:
    set2.remove(val);
    break;
  case 2:
    set2.getRandom();
    break;
}   }   const time2 = performance.now() - start2;
</pre></td></tr></tbody></table></code></pre></div></div>

<p>console.log(<code class="language-plaintext highlighter-rouge">HashMap + Array: ${time1.toFixed(4)}ms</code>);
  console.log(<code class="language-plaintext highlighter-rouge">Set + Array: ${time2.toFixed(4)}ms</code>);
  console.log(<code class="language-plaintext highlighter-rouge">Speedup: ${(time2 / time1).toFixed(2)}x</code>);</p>

<p>// Verify final states match
  const finalState1 = set1.toArray().sort((a, b) =&gt; a - b);
  const finalState2 = set2.toArray().sort((a, b) =&gt; a - b);
  console.log(
    <code class="language-plaintext highlighter-rouge">Final states match: ${
      JSON.stringify(finalState1) === JSON.stringify(finalState2)
        ? "✅ Yes"
        : "❌ No"
    }</code>
  );
}</p>

<p>// Run tests if this file is executed directly
if (require.main === module) {
  runTests();
}</p>

<p>export { RandomizedSet, RandomizedSetAlternative, RandomizedSetWithStats };</p>


        </div>
    </article>
</div>
    </main>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>Study Resources</h3>
                    <p>Comprehensive collection of frontend interview questions, coding challenges, and system design problems.</p>
                </div>
                <div class="footer-section">
                    <h3>Progress Tracking</h3>
                    <p>Monitor your learning journey with detailed progress indicators and completion status.</p>
                </div>
                <div class="footer-section">
                    <h3>Big Tech Ready</h3>
                    <p>Curated content specifically designed for interviews at Google, Meta, Amazon, Apple, and Netflix.</p>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 Frontend Interview Hub. Built for aspiring frontend engineers.</p>
            </div>
        </div>
    </footer>

    <!-- Scripts -->
    <script src="/assets/js/app.js"></script>
</body>
</html>